"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[664],{2525:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(3645),l=i.n(n)()((function(t){return t[1]}));l.push([t.id,".input{height:25px!important}input[type=number]{width:150px}input[type=file]::-webkit-file-upload-button{background-color:#f90;border:2px solid #000;border-radius:5px}input[type=file]::file-selector-button{background-color:#f90;border:2px solid #000;border-radius:5px}.card__available{color:#f90}.card__not-available{color:red}.review__form{font-size:15px}.login-redirect{border-bottom:1px solid #000;display:inline;font-size:25px}.card__img-content{background:#e4e4e4;border-radius:20px;box-shadow:0 4px 4px rgba(0,0,0,.25);height:230px;margin-bottom:30px;position:relative;text-align:center;width:150px;z-index:3}.card__img{filter:drop-shadow(12px 9px 4px rgba(0,0,0,.25));-webkit-filter:drop-shadow(12px 9px 4px rgba(0,0,0,.25));height:95%;position:relative;width:auto;z-index:3}.card__text{font-size:15px!important}.col-11,.play{padding:0!important}.play{background-color:#f90;border-radius:100%;color:#fff;height:40px;margin-left:10px;width:40px}.play span{font-size:30px!important;text-align:center}",""]);const s=l},6012:(t,e,i)=>{i.d(e,{ZP:()=>k});const n={name:"colorPicker",add:function(t){const e=t.context;e.colorPicker={colorListHTML:"",_colorInput:"",_defaultColor:"#000",_styleProperty:"color",_currentColor:"",_colorList:[]},e.colorPicker.colorListHTML=this.createColorList(t,this._makeColorList)},createColorList:function(t,e){const i=t.options,n=t.lang,l=i.colorList&&0!==i.colorList.length?i.colorList:["#ff0000","#ff5e00","#ffe400","#abf200","#00d8ff","#0055ff","#6600ff","#ff00dd","#000000","#ffd8d8","#fae0d4","#faf4c0","#e4f7ba","#d4f4fa","#d9e5ff","#e8d9ff","#ffd9fa","#f1f1f1","#ffa7a7","#ffc19e","#faed7d","#cef279","#b2ebf4","#b2ccff","#d1b2ff","#ffb2f5","#bdbdbd","#f15f5f","#f29661","#e5d85c","#bce55c","#5cd1e5","#6699ff","#a366ff","#f261df","#8c8c8c","#980000","#993800","#998a00","#6b9900","#008299","#003399","#3d0099","#990085","#353535","#670000","#662500","#665c00","#476600","#005766","#002266","#290066","#660058","#222222"];let s=[],o='<div class="se-list-inner">';for(let t,i=0,n=l.length;i<n;i++)t=l[i],t&&("string"==typeof t&&(s.push(t),i<n-1)||(s.length>0&&(o+='<div class="se-selector-color">'+e(s)+"</div>",s=[]),"object"==typeof t&&(o+='<div class="se-selector-color">'+e(t)+"</div>")));return o+='<form class="se-form-group"><input type="text" maxlength="9" class="_se_color_picker_input se-color-input"/><button type="submit" class="se-btn-primary _se_color_picker_submit" title="'+n.dialogBox.submitButton+'">'+t.icons.checked+'</button><button type="button" class="se-btn _se_color_picker_remove" title="'+n.toolbar.removeFormat+'">'+t.icons.erase+"</button></form></div>",o},_makeColorList:function(t){let e="";e+='<ul class="se-color-pallet">';for(let i,n=0,l=t.length;n<l;n++)i=t[n],"string"==typeof i&&(e+='<li><button type="button" data-value="'+i+'" title="'+i+'" style="background-color:'+i+';"></button></li>');return e+="</ul>",e},init:function(t,e){const i=this.plugins.colorPicker;let n=e||(i.getColorInNode.call(this,t)||this.context.colorPicker._defaultColor);n=i.isHexColor(n)?n:i.rgb2hex(n)||n;const l=this.context.colorPicker._colorList;if(l)for(let t=0,e=l.length;t<e;t++)n.toLowerCase()===l[t].getAttribute("data-value").toLowerCase()?this.util.addClass(l[t],"active"):this.util.removeClass(l[t],"active");i.setInputText.call(this,i.colorName2hex.call(this,n))},setCurrentColor:function(t){this.context.colorPicker._currentColor=t,this.context.colorPicker._colorInput.style.borderColor=t},setInputText:function(t){t=/^#/.test(t)?t:"#"+t,this.context.colorPicker._colorInput.value=t,this.plugins.colorPicker.setCurrentColor.call(this,t)},getColorInNode:function(t){let e="";const i=this.context.colorPicker._styleProperty;for(;t&&!this.util.isWysiwygDiv(t)&&0===e.length;)1===t.nodeType&&t.style[i]&&(e=t.style[i]),t=t.parentNode;return e},isHexColor:function(t){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(t)},rgb2hex:function(t){const e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},colorName2hex:function(t){if(/^#/.test(t))return t;var e=this.util.createElement("div");e.style.display="none",e.style.color=t;var i=this._w.getComputedStyle(this._d.body.appendChild(e)).color.match(/\d+/g).map((function(t){return parseInt(t,10)}));return this.util.removeItem(e),i.length>=3&&"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).substr(1)}},l={name:"fontColor",display:"submenu",add:function(t,e){t.addModule([n]);const i=t.context;i.fontColor={previewEl:null,colorInput:null,colorList:null};let l=this.setSubmenu(t);i.fontColor.colorInput=l.querySelector("._se_color_picker_input"),i.fontColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(t)),l.querySelector("._se_color_picker_submit").addEventListener("click",this.submit.bind(t)),l.querySelector("._se_color_picker_remove").addEventListener("click",this.remove.bind(t)),l.addEventListener("click",this.pickup.bind(t)),i.fontColor.colorList=l.querySelectorAll("li button"),t.initMenuTarget(this.name,e,l),l=null},setSubmenu:function(t){const e=t.context.colorPicker.colorListHTML,i=t.util.createElement("DIV");return i.className="se-submenu se-list-layer",i.innerHTML=e,i},on:function(){const t=this.context.colorPicker,e=this.context.fontColor;t._colorInput=e.colorInput;const i=this.wwComputedStyle.color;t._defaultColor=i?this.plugins.colorPicker.isHexColor(i)?i:this.plugins.colorPicker.rgb2hex(i):"#333333",t._styleProperty="color",t._colorList=e.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(t){this.plugins.colorPicker.setCurrentColor.call(this,t.target.value)},submit:function(){this.plugins.fontColor.applyColor.call(this,this.context.colorPicker._currentColor)},pickup:function(t){t.preventDefault(),t.stopPropagation(),this.plugins.fontColor.applyColor.call(this,t.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["color"],["span"],!0),this.submenuOff()},applyColor:function(t){if(!t)return;const e=this.util.createElement("SPAN");e.style.color=t,this.nodeChange(e,["color"],null,null),this.submenuOff()}},s={name:"hiliteColor",display:"submenu",add:function(t,e){t.addModule([n]);const i=t.context;i.hiliteColor={previewEl:null,colorInput:null,colorList:null};let l=this.setSubmenu(t);i.hiliteColor.colorInput=l.querySelector("._se_color_picker_input"),i.hiliteColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(t)),l.querySelector("._se_color_picker_submit").addEventListener("click",this.submit.bind(t)),l.querySelector("._se_color_picker_remove").addEventListener("click",this.remove.bind(t)),l.addEventListener("click",this.pickup.bind(t)),i.hiliteColor.colorList=l.querySelectorAll("li button"),t.initMenuTarget(this.name,e,l),l=null},setSubmenu:function(t){const e=t.context.colorPicker.colorListHTML,i=t.util.createElement("DIV");return i.className="se-submenu se-list-layer",i.innerHTML=e,i},on:function(){const t=this.context.colorPicker,e=this.context.hiliteColor;t._colorInput=e.colorInput;const i=this.wwComputedStyle.backgroundColor;t._defaultColor=i?this.plugins.colorPicker.isHexColor(i)?i:this.plugins.colorPicker.rgb2hex(i):"#ffffff",t._styleProperty="backgroundColor",t._colorList=e.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(t){this.plugins.colorPicker.setCurrentColor.call(this,t.target.value)},submit:function(){this.plugins.hiliteColor.applyColor.call(this,this.context.colorPicker._currentColor)},pickup:function(t){t.preventDefault(),t.stopPropagation(),this.plugins.hiliteColor.applyColor.call(this,t.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["background-color"],["span"],!0),this.submenuOff()},applyColor:function(t){if(!t)return;const e=this.util.createElement("SPAN");e.style.backgroundColor=t,this.nodeChange(e,["background-color"],null,null),this.submenuOff()}},o={name:"template",display:"submenu",add:function(t,e){t.context.template={selectedIndex:-1};let i=this.setSubmenu(t);i.querySelector("ul").addEventListener("click",this.pickup.bind(t)),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){const e=t.options.templates;if(!e||0===e.length)throw Error('[SUNEDITOR.plugins.template.fail] To use the "template" plugin, please define the "templates" option.');const i=t.util.createElement("DIV");i.className="se-list-layer";let n='<div class="se-submenu se-list-inner"><ul class="se-list-basic">';for(let t,i=0,l=e.length;i<l;i++)t=e[i],n+='<li><button type="button" class="se-btn-list" data-value="'+i+'" title="'+t.name+'">'+t.name+"</button></li>";return n+="</ul></div>",i.innerHTML=n,i},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation(),this.context.template.selectedIndex=1*t.target.getAttribute("data-value");const e=this.options.templates[this.context.template.selectedIndex];if(!e.html)throw this.submenuOff(),Error('[SUNEDITOR.template.fail] cause : "templates[i].html not found"');this.setContents(e.html),this.submenuOff()}};var a=i(8784),r=i.n(a);const c={name:"selectMenu",add:function(t){t.context.selectMenu={caller:{},callerContext:null}},setForm:function(){return'<div class="se-select-list"></div>'},createList:function(t,e,i){t.form.innerHTML="<ul>"+i+"</ul>",t.items=e,t.menus=t.form.querySelectorAll("li")},initEvent:function(t,e){const i=e.querySelector(".se-select-list"),n=this.context.selectMenu.caller[t]={form:i,items:[],menus:[],index:-1,item:null,clickMethod:null,callerName:t};i.addEventListener("mousedown",this.plugins.selectMenu.onMousedown_list),i.addEventListener("mousemove",this.plugins.selectMenu.onMouseMove_list.bind(this,n)),i.addEventListener("click",this.plugins.selectMenu.onClick_list.bind(this,n))},onMousedown_list:function(t){t.preventDefault(),t.stopPropagation()},onMouseMove_list:function(t,e){this.util.addClass(t.form,"__se_select-menu-mouse-move");const i=e.target.getAttribute("data-index");i&&(t.index=1*i)},onClick_list:function(t,e){const i=e.target.getAttribute("data-index");i&&t.clickMethod.call(this,t.items[i])},moveItem:function(t,e){this.util.removeClass(t.form,"__se_select-menu-mouse-move"),e=t.index+e;const i=t.menus,n=i.length,l=t.index=e>=n?0:e<0?n-1:e;for(let t=0;t<n;t++)t===l?this.util.addClass(i[t],"active"):this.util.removeClass(i[t],"active");t.item=t.items[l]},getItem:function(t,e){return e=!e||e<0?t.index:e,t.items[e]},on:function(t,e){const i=this.context.selectMenu.caller[t];this.context.selectMenu.callerContext=i,i.clickMethod=e,i.callerName=t},open:function(t,e){const i=t.form;i.style.visibility="hidden",i.style.display="block",e(i),i.style.visibility=""},close:function(t){t.form.style.display="none",t.items=[],t.menus=[],t.index=-1,t.item=null},init:function(t){t&&(t.items=[],t.menus=[],t.index=-1,t.item=null,t.callerName="",this.context.selectMenu.callerContext=null)}},u={name:"anchor",add:function(t){t.addModule([c]),t.context.anchor={caller:{},forms:this.setDialogForm(t),host:(t._w.location.origin+t._w.location.pathname).replace(/\/$/,""),callerContext:null}},setDialogForm:function(t){const e=t.lang,i=t.options.linkRel,n=(t.options.linkRelDefault.default||"").split(" "),l=t.icons,s=t.util.createElement("DIV");let o='<div class="se-dialog-body"><div class="se-dialog-form"><label>'+e.dialogBox.linkBox.url+'</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url" type="text" placeholder="'+(t.options.protocol||"")+'" /><button type="button" class="se-btn se-dialog-files-edge-button _se_bookmark_button" title="'+e.dialogBox.linkBox.bookmark+'">'+l.bookmark+"</button>"+t.plugins.selectMenu.setForm()+'</div><div class="se-anchor-preview-form"><span class="se-svg se-anchor-preview-icon _se_anchor_bookmark_icon">'+l.bookmark+'</span><span class="se-svg se-anchor-preview-icon _se_anchor_download_icon">'+l.download+'</span><pre class="se-link-preview"></pre></div></div><div class="se-dialog-form"><label>'+e.dialogBox.linkBox.text+'</label><input class="se-input-form _se_anchor_text" type="text" /></div><div class="se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_check" />&nbsp;'+e.dialogBox.linkBox.newWindowCheck+'</label><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_download" />&nbsp;'+e.dialogBox.linkBox.downloadLinkCheck+"</label>";if(i.length>0){o+='<div class="se-anchor-rel"><button type="button" class="se-btn se-btn-select se-anchor-rel-btn">&lt;rel&gt;</button><div class="se-anchor-rel-wrapper"><pre class="se-link-preview se-anchor-rel-preview"></pre></div><div class="se-list-layer"><div class="se-list-inner"><ul class="se-list-basic se-list-checked">';for(let t,e=0,s=i.length;e<s;e++)t=i[e],o+='<li><button type="button" class="se-btn-list'+(n.indexOf(t)>-1?" se-checked":"")+'" data-command="'+t+'" title="'+t+'"><span class="se-svg">'+l.checked+"</span>"+t+"</button></li>";o+="</ul></div></div></div>"}return o+="</div></div>",s.innerHTML=o,s},initEvent:function(t,e){const i=this.plugins.anchor,n=this.context.anchor.caller[t]={modal:e,urlInput:null,linkDefaultRel:this.options.linkRelDefault,defaultRel:this.options.linkRelDefault.default||"",currentRel:[],linkAnchor:null,linkValue:"",_change:!1,callerName:t};"string"==typeof n.linkDefaultRel.default&&(n.linkDefaultRel.default=n.linkDefaultRel.default.trim()),"string"==typeof n.linkDefaultRel.check_new_window&&(n.linkDefaultRel.check_new_window=n.linkDefaultRel.check_new_window.trim()),"string"==typeof n.linkDefaultRel.check_bookmark&&(n.linkDefaultRel.check_bookmark=n.linkDefaultRel.check_bookmark.trim()),n.urlInput=e.querySelector(".se-input-url"),n.anchorText=e.querySelector("._se_anchor_text"),n.newWindowCheck=e.querySelector("._se_anchor_check"),n.downloadCheck=e.querySelector("._se_anchor_download"),n.download=e.querySelector("._se_anchor_download_icon"),n.preview=e.querySelector(".se-link-preview"),n.bookmark=e.querySelector("._se_anchor_bookmark_icon"),n.bookmarkButton=e.querySelector("._se_bookmark_button"),this.plugins.selectMenu.initEvent.call(this,t,e);const l=this.context.selectMenu.caller[t];this.options.linkRel.length>0&&(n.relButton=e.querySelector(".se-anchor-rel-btn"),n.relList=e.querySelector(".se-list-layer"),n.relPreview=e.querySelector(".se-anchor-rel-preview"),n.relButton.addEventListener("click",i.onClick_relButton.bind(this,n)),n.relList.addEventListener("click",i.onClick_relList.bind(this,n))),n.newWindowCheck.addEventListener("change",i.onChange_newWindowCheck.bind(this,n)),n.downloadCheck.addEventListener("change",i.onChange_downloadCheck.bind(this,n)),n.anchorText.addEventListener("input",i.onChangeAnchorText.bind(this,n)),n.urlInput.addEventListener("input",i.onChangeUrlInput.bind(this,n)),n.urlInput.addEventListener("keydown",i.onKeyDownUrlInput.bind(this,l)),n.urlInput.addEventListener("focus",i.onFocusUrlInput.bind(this,n,l)),n.urlInput.addEventListener("blur",i.onBlurUrlInput.bind(this,l)),n.bookmarkButton.addEventListener("click",i.onClick_bookmarkButton.bind(this,n))},on:function(t,e){const i=this.plugins.anchor;if(e){if(t.linkAnchor){this.context.dialog.updateModal=!0;const e=this.options.linkNoPrefix?t.linkAnchor.href.replace(t.linkAnchor.origin+"/",""):t.linkAnchor.href;t.linkValue=t.preview.textContent=t.urlInput.value=i.selfPathBookmark.call(this,e)?e.substr(e.lastIndexOf("#")):e,t.anchorText.value=t.linkAnchor.textContent||t.linkAnchor.getAttribute("alt"),t.newWindowCheck.checked=!!/_blank/i.test(t.linkAnchor.target),t.downloadCheck.checked=t.linkAnchor.download}}else i.init.call(this,t),t.anchorText.value=this.getSelection().toString().trim(),t.newWindowCheck.checked=this.options.linkTargetNewWindow;this.context.anchor.callerContext=t,i.setRel.call(this,t,e&&t.linkAnchor?t.linkAnchor.rel:t.defaultRel),i.setLinkPreview.call(this,t,t.linkValue),this.plugins.selectMenu.on.call(this,t.callerName,this.plugins.anchor.setHeaderBookmark)},selfPathBookmark:function(t){const e=this._w.location.href.replace(/\/$/,"");return 0===t.indexOf("#")||0===t.indexOf(e)&&t.indexOf("#")===(-1===e.indexOf("#")?e.length:e.substr(0,e.indexOf("#")).length)},_closeRelMenu:null,toggleRelList:function(t,e){if(e){const e=t.relButton,i=t.relList;this.util.addClass(e,"active"),i.style.visibility="hidden",i.style.display="block",this.options.rtl?i.style.left=e.offsetLeft-i.offsetWidth-1+"px":i.style.left=e.offsetLeft+e.offsetWidth+1+"px",i.style.top=e.offsetTop+e.offsetHeight/2-i.offsetHeight/2+"px",i.style.visibility="",this.plugins.anchor._closeRelMenu=function(t,e,i){i&&(t.relButton.contains(i.target)||t.relList.contains(i.target))||(this.util.removeClass(e,"active"),t.relList.style.display="none",this.modalForm.removeEventListener("click",this.plugins.anchor._closeRelMenu),this.plugins.anchor._closeRelMenu=null)}.bind(this,t,e),this.modalForm.addEventListener("click",this.plugins.anchor._closeRelMenu)}else this.plugins.anchor._closeRelMenu&&this.plugins.anchor._closeRelMenu()},onClick_relButton:function(t,e){this.plugins.anchor.toggleRelList.call(this,t,!this.util.hasClass(e.target,"active"))},onClick_relList:function(t,e){const i=e.target,n=i.getAttribute("data-command");if(!n)return;const l=t.currentRel,s=this.util.toggleClass(i,"se-checked"),o=l.indexOf(n);s?-1===o&&l.push(n):o>-1&&l.splice(o,1),t.relPreview.title=t.relPreview.textContent=l.join(" ")},setRel:function(t,e){const i=t.relList,n=t.currentRel=e?e.split(" "):[];if(!i)return;const l=i.querySelectorAll("button");for(let t,e=0,i=l.length;e<i;e++)t=l[e].getAttribute("data-command"),n.indexOf(t)>-1?this.util.addClass(l[e],"se-checked"):this.util.removeClass(l[e],"se-checked");t.relPreview.title=t.relPreview.textContent=n.join(" ")},createHeaderList:function(t,e,i){const n=this.util.getListChildren(this.context.element.wysiwyg,(function(t){return/h[1-6]/i.test(t.nodeName)}));if(0===n.length)return;const l=new this._w.RegExp("^"+i.replace(/^#/,""),"i"),s=[];let o="";for(let t,e=0,i=n.length;e<i;e++)t=n[e],l.test(t.textContent)&&(s.push(t),o+='<li class="se-select-item" data-index="'+e+'">'+t.textContent+"</li>");0===s.length?this.plugins.selectMenu.close.call(this,e):(this.plugins.selectMenu.createList(e,s,o),this.plugins.selectMenu.open.call(this,e,this.plugins.anchor._setMenuListPosition.bind(this,t)))},_setMenuListPosition:function(t,e){e.style.top=t.urlInput.offsetHeight+1+"px"},onKeyDownUrlInput:function(t,e){switch(e.keyCode){case 38:e.preventDefault(),e.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,t,-1);break;case 40:e.preventDefault(),e.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,t,1);break;case 13:t.index>-1&&(e.preventDefault(),e.stopPropagation(),this.plugins.anchor.setHeaderBookmark.call(this,this.plugins.selectMenu.getItem(t,null)))}},setHeaderBookmark:function(t){const e=this.context.anchor.callerContext,i=t.id||"h_"+this._w.Math.random().toString().replace(/.+\./,"");t.id=i,e.urlInput.value="#"+i,e.anchorText.value.trim()&&e._change||(e.anchorText.value=t.textContent),this.plugins.anchor.setLinkPreview.call(this,e,e.urlInput.value),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext),this.context.anchor.callerContext.urlInput.focus()},onChangeAnchorText:function(t,e){t._change=!!e.target.value.trim()},onChangeUrlInput:function(t,e){const i=e.target.value.trim();this.plugins.anchor.setLinkPreview.call(this,t,i),this.plugins.anchor.selfPathBookmark.call(this,i)?this.plugins.anchor.createHeaderList.call(this,t,this.context.selectMenu.callerContext,i):this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)},onFocusUrlInput:function(t,e){const i=t.urlInput.value;this.plugins.anchor.selfPathBookmark.call(this,i)&&this.plugins.anchor.createHeaderList.call(this,t,e,i)},onBlurUrlInput:function(t){this.plugins.selectMenu.close.call(this,t)},setLinkPreview:function(t,e){const i=t.preview,n=this.options.linkProtocol,l=this.options.linkNoPrefix,s=/^(mailto\:|tel\:|sms\:|https*\:\/\/|#)/.test(e),o=!!n&&this._w.RegExp("^"+e.substr(0,n.length)).test(n);e=t.linkValue=i.textContent=e?l?e:!n||s||o?s?e:/^www\./.test(e)?"http://"+e:this.context.anchor.host+(/^\//.test(e)?"":"/")+e:n+e:"",this.plugins.anchor.selfPathBookmark.call(this,e)?(t.bookmark.style.display="block",this.util.addClass(t.bookmarkButton,"active")):(t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active")),!this.plugins.anchor.selfPathBookmark.call(this,e)&&t.downloadCheck.checked?t.download.style.display="block":t.download.style.display="none"},setCtx:function(t,e){t&&(e.linkAnchor=t,e.linkValue=t.href,e.currentRel=t.rel.split(" "))},updateAnchor:function(t,e,i,n,l){!this.plugins.anchor.selfPathBookmark.call(this,e)&&n.downloadCheck.checked?t.setAttribute("download",i||e):t.removeAttribute("download"),n.newWindowCheck.checked?t.target="_blank":t.removeAttribute("target");const s=n.currentRel.join(" ");s?t.rel=s:t.removeAttribute("rel"),t.href=e,t.setAttribute("alt",i),l?0===t.children.length&&(t.textContent=""):t.textContent=i},createAnchor:function(t,e){if(0===t.linkValue.length)return null;const i=t.linkValue,n=t.anchorText,l=0===n.value.length?i:n.value,s=t.linkAnchor||this.util.createElement("A");return this.plugins.anchor.updateAnchor.call(this,s,i,l,t,e),t.linkValue=t.preview.textContent=t.urlInput.value=t.anchorText.value="",s},onClick_bookmarkButton:function(t){let e=t.urlInput.value;this.plugins.anchor.selfPathBookmark.call(this,e)?(e=e.substr(1),t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active"),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)):(e="#"+e,t.bookmark.style.display="block",this.util.addClass(t.bookmarkButton,"active"),t.downloadCheck.checked=!1,t.download.style.display="none",this.plugins.anchor.createHeaderList.call(this,t,this.context.selectMenu.callerContext,e)),t.urlInput.value=e,this.plugins.anchor.setLinkPreview.call(this,t,e),t.urlInput.focus()},onChange_newWindowCheck:function(t,e){"string"==typeof t.linkDefaultRel.check_new_window&&(e.target.checked?this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relMerge.call(this,t,t.linkDefaultRel.check_new_window)):this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relDelete.call(this,t,t.linkDefaultRel.check_new_window)))},onChange_downloadCheck:function(t,e){e.target.checked?(t.download.style.display="block",t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active"),t.linkValue=t.preview.textContent=t.urlInput.value=t.urlInput.value.replace(/^\#+/,""),"string"==typeof t.linkDefaultRel.check_bookmark&&this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relMerge.call(this,t,t.linkDefaultRel.check_bookmark))):(t.download.style.display="none","string"==typeof t.linkDefaultRel.check_bookmark&&this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relDelete.call(this,t,t.linkDefaultRel.check_bookmark)))},_relMerge:function(t,e){const i=t.currentRel;if(!e)return i.join(" ");if(/^only\:/.test(e))return e=e.replace(/^only\:/,"").trim(),t.currentRel=e.split(" "),e;const n=e.split(" ");for(let t,e=0,l=n.length;e<l;e++)t=i.indexOf(n[e]),-1===t&&i.push(n[e]);return i.join(" ")},_relDelete:function(t,e){if(!e)return t.currentRel.join(" ");/^only\:/.test(e)&&(e=e.replace(/^only\:/,"").trim());const i=t.currentRel.join(" ").replace(this._w.RegExp(e+"\\s*"),"");return t.currentRel=i.split(" "),i},init:function(t){t.linkAnchor=null,t.linkValue=t.preview.textContent=t.urlInput.value="",t.anchorText.value="",t.newWindowCheck.checked=!1,t.downloadCheck.checked=!1,t._change=!1,this.plugins.anchor.setRel.call(this,t,t.defaultRel),t.relList&&this.plugins.anchor.toggleRelList.call(this,t,!1),this.context.anchor.callerContext=null,this.plugins.selectMenu.init.call(this,this.context.selectMenu.callerContext)}},d={name:"link",display:"dialog",add:function(t){t.addModule([r(),u]);const e=t.context,i=e.link={focusElement:null,_linkAnchor:null,anchorCtx:null};let n=this.setDialog(t);i.modal=n;let l=this.setController_LinkButton(t);i.linkController=l,n.querySelector("form").addEventListener("submit",this.submit.bind(t)),l.addEventListener("click",this.onClick_linkController.bind(t)),e.dialog.modal.appendChild(n),e.element.relative.appendChild(l),t.plugins.anchor.initEvent.call(t,"link",n),i.focusElement=e.anchor.caller.link.urlInput,n=null,l=null},setDialog:function(t){const e=t.lang,i=t.util.createElement("DIV"),n=t.icons;i.className="se-dialog-content",i.style.display="none";let l='<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" aria-label="Close" title="'+e.dialogBox.close+'">'+n.cancel+'</button><span class="se-modal-title">'+e.dialogBox.linkBox.title+"</span></div>"+t.context.anchor.forms.innerHTML+'<div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+e.dialogBox.submitButton+'"><span>'+e.dialogBox.submitButton+"</span></button></div></form>";return i.innerHTML=l,i},setController_LinkButton:function(t){const e=t.lang,i=t.icons,n=t.util.createElement("DIV");return n.className="se-controller se-controller-link",n.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><span><a target="_blank" href=""></a>&nbsp;</span><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">'+i.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="unlink" tabindex="-1" class="se-btn se-tooltip">'+i.unlink+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.unlink+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">'+i.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",n},open:function(){this.plugins.dialog.open.call(this,"link","link"===this.currentControllerName)},submit:function(t){this.showLoading(),t.preventDefault(),t.stopPropagation();try{const t=this.plugins.anchor.createAnchor.call(this,this.context.anchor.caller.link,!1);if(null===t)return;if(this.context.dialog.updateModal){const t=this.context.link._linkAnchor.childNodes[0];this.setRange(t,0,t,t.textContent.length)}else{const e=this.getSelectedElements();if(e.length>1){const i=this.util.createElement(e[0].nodeName);if(i.appendChild(t),!this.insertNode(i,null,!0))return}else if(!this.insertNode(t,null,!0))return;this.setRange(t.childNodes[0],0,t.childNodes[0],t.textContent.length)}}finally{this.plugins.dialog.close.call(this),this.closeLoading(),this.history.push(!1)}return!1},active:function(t){if(t){if(this.util.isAnchor(t)&&null===t.getAttribute("data-image-link"))return this.controllerArray.indexOf(this.context.link.linkController)<0&&this.plugins.link.call_controller.call(this,t),!0}else this.controllerArray.indexOf(this.context.link.linkController)>-1&&this.controllersOff();return!1},on:function(t){this.plugins.anchor.on.call(this,this.context.anchor.caller.link,t)},call_controller:function(t){this.editLink=this.context.link._linkAnchor=this.context.anchor.caller.link.linkAnchor=t;const e=this.context.link.linkController,i=e.querySelector("a");i.href=t.href,i.title=t.textContent,i.textContent=t.textContent,this.util.addClass(t,"on"),this.setControllerPosition(e,t,"bottom",{left:0,top:0}),this.controllersOn(e,t,"link",this.util.removeClass.bind(this.util,this.context.link._linkAnchor,"on"))},onClick_linkController:function(t){t.stopPropagation();const e=t.target.getAttribute("data-command")||t.target.parentNode.getAttribute("data-command");if(e){if(t.preventDefault(),/update/.test(e))this.plugins.dialog.open.call(this,"link",!0);else if(/unlink/.test(e)){const t=this.util.getChildElement(this.context.link._linkAnchor,(function(t){return 0===t.childNodes.length||3===t.nodeType}),!1),e=this.util.getChildElement(this.context.link._linkAnchor,(function(t){return 0===t.childNodes.length||3===t.nodeType}),!0);this.setRange(t,0,e,e.textContent.length),this.nodeChange(null,null,["A"],!1)}else this.util.removeItem(this.context.link._linkAnchor),this.context.anchor.caller.link.linkAnchor=null,this.focus(),this.history.push(!1);this.controllersOff()}},init:function(){this.context.link.linkController.style.display="none",this.plugins.anchor.init.call(this,this.context.anchor.caller.link)}};var h=i(1841),p=i.n(h),g=i(5076),m=i.n(g),f=i(2527),_=i.n(f);const b={name:"image",display:"dialog",add:function(t){t.addModule([r(),u,p(),m(),_()]);const e=t.options,i=t.context,n=i.image={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,sizeUnit:e._imageSizeUnit,_linkElement:"",_altText:"",_align:"none",_floatClassRegExp:"__se__float\\-[a-z]+",_v_src:{_linkValue:""},svgDefaultSize:"30%",base64RenderIndex:0,_element:null,_cover:null,_container:null,inputX:null,inputY:null,_element_w:1,_element_h:1,_element_l:0,_element_t:0,_defaultSizeX:"auto",_defaultSizeY:"auto",_origin_w:"auto"===e.imageWidth?"":e.imageWidth,_origin_h:"auto"===e.imageHeight?"":e.imageHeight,_proportionChecked:!0,_resizing:e.imageResizing,_resizeDotHide:!e.imageHeightShow,_rotation:e.imageRotation,_alignHide:!e.imageAlignShow,_onlyPercentage:e.imageSizeOnlyPercentage,_ratio:!1,_ratioX:1,_ratioY:1,_captionShow:!0,_captionChecked:!1,_caption:null,captionCheckEl:null};let l=this.setDialog(t);n.modal=l,n.imgInputFile=l.querySelector("._se_image_file"),n.imgUrlFile=l.querySelector("._se_image_url"),n.focusElement=n.imgInputFile||n.imgUrlFile,n.altText=l.querySelector("._se_image_alt"),n.captionCheckEl=l.querySelector("._se_image_check_caption"),n.previewSrc=l.querySelector("._se_tab_content_image .se-link-preview"),l.querySelector(".se-dialog-tabs").addEventListener("click",this.openTab.bind(t)),l.querySelector("form").addEventListener("submit",this.submit.bind(t)),n.imgInputFile&&l.querySelector(".se-file-remove").addEventListener("click",this._removeSelectedFiles.bind(n.imgInputFile,n.imgUrlFile,n.previewSrc)),n.imgUrlFile&&n.imgUrlFile.addEventListener("input",this._onLinkPreview.bind(n.previewSrc,n._v_src,e.linkProtocol)),n.imgInputFile&&n.imgUrlFile&&n.imgInputFile.addEventListener("change",this._fileInputChange.bind(n));const s=l.querySelector(".__se__gallery");s&&s.addEventListener("click",this._openGallery.bind(t)),n.proportion={},n.inputX={},n.inputY={},e.imageResizing&&(n.proportion=l.querySelector("._se_image_check_proportion"),n.inputX=l.querySelector("._se_image_size_x"),n.inputY=l.querySelector("._se_image_size_y"),n.inputX.value=e.imageWidth,n.inputY.value=e.imageHeight,n.inputX.addEventListener("keyup",this.setInputSize.bind(t,"x")),n.inputY.addEventListener("keyup",this.setInputSize.bind(t,"y")),n.inputX.addEventListener("change",this.setRatio.bind(t)),n.inputY.addEventListener("change",this.setRatio.bind(t)),n.proportion.addEventListener("change",this.setRatio.bind(t)),l.querySelector(".se-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(t))),i.dialog.modal.appendChild(l),t.plugins.anchor.initEvent.call(t,"image",l.querySelector("._se_tab_content_url")),n.anchorCtx=t.context.anchor.caller.image,l=null},setDialog:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");n.className="se-dialog-content se-dialog-image",n.style.display="none";let l='<div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" class="close" aria-label="Close" title="'+i.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+i.dialogBox.imageBox.title+'</span></div><div class="se-dialog-tabs"><button type="button" class="_se_tab_link active" data-tab-link="image">'+i.toolbar.image+'</button><button type="button" class="_se_tab_link" data-tab-link="url">'+i.toolbar.link+'</button></div><form method="post" enctype="multipart/form-data"><div class="_se_tab_content _se_tab_content_image"><div class="se-dialog-body"><div style="border-bottom: 1px dashed #ccc;">';if(e.imageFileInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.imageBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_image_file" type="file" accept="'+e.imageAccept+'"'+(e.imageMultipleFile?' multiple="multiple"':"")+'/><button type="button" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+i.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.imageUrlInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.imageBox.url+'</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url _se_image_url" type="text" />'+(e.imageGalleryUrl&&t.plugins.imageGallery?'<button type="button" class="se-btn se-dialog-files-edge-button __se__gallery" title="'+i.toolbar.imageGallery+'">'+t.icons.image_gallery+"</button>":"")+'</div><pre class="se-link-preview"></pre></div>'),l+='</div><div class="se-dialog-form"><label>'+i.dialogBox.imageBox.altText+'</label><input class="se-input-form _se_image_alt" type="text" /></div>',e.imageResizing){const n=e.imageSizeOnlyPercentage,s=n?' style="display: none !important;"':"",o=e.imageHeightShow?"":' style="display: none !important;"';l+='<div class="se-dialog-form">',n||!e.imageHeightShow?l+='<div class="se-dialog-size-text"><label class="size-w">'+i.dialogBox.size+"</label></div>":l+='<div class="se-dialog-size-text"><label class="size-w">'+i.dialogBox.width+'</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h">'+i.dialogBox.height+"</label></div>",l+='<input class="se-input-control _se_image_size_x" placeholder="auto"'+(n?' type="number" min="1"':'type="text"')+(n?' max="100"':"")+' /><label class="se-dialog-size-x"'+o+">"+(n?"%":"x")+'</label><input type="text" class="se-input-control _se_image_size_y" placeholder="auto"'+s+(n?' max="100"':"")+o+"/><label"+s+o+'><input type="checkbox" class="se-dialog-btn-check _se_image_check_proportion" checked/>&nbsp;'+i.dialogBox.proportion+'</label><button type="button" title="'+i.dialogBox.revertButton+'" class="se-btn se-dialog-btn-revert" style="float: right;">'+t.icons.revert+"</button></div>"}return l+='<div class="se-dialog-form se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_image_check_caption" />&nbsp;'+i.dialogBox.caption+'</label></div></div></div><div class="_se_tab_content _se_tab_content_url" style="display: none">'+t.context.anchor.forms.innerHTML+'</div><div class="se-dialog-footer"><div'+(e.imageAlignShow?"":' style="display: none"')+'><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="none" checked>'+i.dialogBox.basic+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="left">'+i.dialogBox.left+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="center">'+i.dialogBox.center+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="right">'+i.dialogBox.right+'</label></div><button type="submit" class="se-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},_fileInputChange:function(){this.imgInputFile.value?(this.imgUrlFile.setAttribute("disabled",!0),this.previewSrc.style.textDecoration="line-through"):(this.imgUrlFile.removeAttribute("disabled"),this.previewSrc.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_openGallery:function(){this.callPlugin("imageGallery",this.plugins.imageGallery.open.bind(this,this.plugins.image._setUrlInput.bind(this.context.image)),null)},_setUrlInput:function(t){this.altText.value=t.alt,this._v_src._linkValue=this.previewSrc.textContent=this.imgUrlFile.value=t.src,this.imgUrlFile.focus()},_onLinkPreview:function(t,e,i){const n=i.target.value.trim();t._linkValue=this.textContent=n?e&&-1===n.indexOf("://")&&0!==n.indexOf("#")?e+n:-1===n.indexOf("://")?"/"+n:n:""},fileTags:["img"],select:function(t){this.plugins.image.onModifyMode.call(this,t,this.plugins.resizing.call_controller_resize.call(this,t,"image"))},destroy:function(t){const e=t||this.context.image._element,i=this.util.getParentElement(e,this.util.isMediaComponent)||e,n=1*e.getAttribute("data-index");let l=i.previousElementSibling||i.nextElementSibling;const s=i.parentNode;this.util.removeItem(i),this.plugins.image.init.call(this),this.controllersOff(),s!==this.context.element.wysiwyg&&this.util.removeItemAllParents(s,(function(t){return 0===t.childNodes.length}),null),this.focusEdge(l),this.plugins.fileManager.deleteInfo.call(this,"image",n,this.functions.onImageUpload),this.history.push(!1)},on:function(t){const e=this.context.image;t?e.imgInputFile&&this.options.imageMultipleFile&&e.imgInputFile.removeAttribute("multiple"):(e.inputX.value=e._origin_w=this.options.imageWidth===e._defaultSizeX?"":this.options.imageWidth,e.inputY.value=e._origin_h=this.options.imageHeight===e._defaultSizeY?"":this.options.imageHeight,e.imgInputFile&&this.options.imageMultipleFile&&e.imgInputFile.setAttribute("multiple","multiple")),this.plugins.anchor.on.call(this,e.anchorCtx,t)},open:function(){this.plugins.dialog.open.call(this,"image","image"===this.currentControllerName)},openTab:function(t){const e=this.context.image.modal,i="init"===t?e.querySelector("._se_tab_link"):t.target;if(!/^BUTTON$/i.test(i.tagName))return!1;const n=i.getAttribute("data-tab-link"),l="_se_tab_content";let s,o,a;for(o=e.getElementsByClassName(l),s=0;s<o.length;s++)o[s].style.display="none";for(a=e.getElementsByClassName("_se_tab_link"),s=0;s<a.length;s++)this.util.removeClass(a[s],"active");return e.querySelector("._se_tab_content_"+n).style.display="block",this.util.addClass(i,"active"),"image"===n&&this.context.image.focusElement?this.context.image.focusElement.focus():"url"===n&&this.context.anchor.caller.image.urlInput.focus(),!1},submit:function(t){const e=this.context.image,i=this.plugins.image;t.preventDefault(),t.stopPropagation(),e._altText=e.altText.value,e._align=e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value,e._captionChecked=e.captionCheckEl.checked,e._resizing&&(e._proportionChecked=e.proportion.checked);try{this.context.dialog.updateModal&&i.update_image.call(this,!1,!0,!1),e.imgInputFile&&e.imgInputFile.files.length>0?(this.showLoading(),i.submitAction.call(this,this.context.image.imgInputFile.files)):e.imgUrlFile&&e._v_src._linkValue.length>0&&(this.showLoading(),i.onRender_imgUrl.call(this,e._v_src._linkValue))}catch(t){throw this.closeLoading(),Error('[SUNEDITOR.image.submit.fail] cause : "'+t.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(0===t.length)return;let e=0,i=[];for(let n=0,l=t.length;n<l;n++)/image/i.test(t[n].type)&&(i.push(t[n]),e+=t[n].size);const n=this.options.imageUploadSizeLimit;if(n>0){let t=0;const i=this.context.image._infoList;for(let e=0,n=i.length;e<n;e++)t+=1*i[e].size;if(e+t>n){this.closeLoading();const i="[SUNEDITOR.imageUpload.fail] Size of uploadable total images: "+n/1e3+"KB";return void(("function"!=typeof this.functions.onImageUploadError||this.functions.onImageUploadError(i,{limitSize:n,currentSize:t,uploadSize:e},this))&&this.functions.noticeOpen(i))}}const l=this.context.image;l._uploadFileLength=i.length;const s={anchor:this.plugins.anchor.createAnchor.call(this,l.anchorCtx,!0),inputWidth:l.inputX.value,inputHeight:l.inputY.value,align:l._align,isUpdate:this.context.dialog.updateModal,alt:l._altText,element:l._element};if("function"==typeof this.functions.onImageUploadBefore){const t=this.functions.onImageUploadBefore(i,s,this,function(t){t&&this._w.Array.isArray(t.result)?this.plugins.image.register.call(this,s,t):this.plugins.image.upload.call(this,s,t)}.bind(this));if(void 0===t)return;if(!t)return void this.closeLoading();this._w.Array.isArray(t)&&t.length>0&&(i=t)}this.plugins.image.upload.call(this,s,i)},error:function(t,e){if(this.closeLoading(),"function"!=typeof this.functions.onImageUploadError||this.functions.onImageUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.image.error] response: "+t)},upload:function(t,e){if(!e)return void this.closeLoading();if("string"==typeof e)return void this.plugins.image.error.call(this,e,null);const i=this.options.imageUploadUrl,n=this.context.dialog.updateModal?1:e.length;if("string"==typeof i&&i.length>0){const l=new FormData;for(let t=0;t<n;t++)l.append("file-"+t,e[t]);this.plugins.fileManager.upload.call(this,i,this.options.imageUploadHeader,l,this.plugins.image.callBack_imgUpload.bind(this,t),this.functions.onImageUploadError)}else this.plugins.image.setup_reader.call(this,e,t.anchor,t.inputWidth,t.inputHeight,t.align,t.alt,n,t.isUpdate)},callBack_imgUpload:function(t,e){if("function"==typeof this.functions.imageUploadHandler)this.functions.imageUploadHandler(e,t,this);else{const i=JSON.parse(e.responseText);i.errorMessage?this.plugins.image.error.call(this,i.errorMessage,i):this.plugins.image.register.call(this,t,i)}},register:function(t,e){const i=e.result;for(let e,n=0,l=i.length;n<l;n++){if(e={name:i[n].name,size:i[n].size},t.isUpdate){this.plugins.image.update_src.call(this,i[n].url,t.element,e);break}this.plugins.image.create_image.call(this,i[n].url,t.anchor,t.inputWidth,t.inputHeight,t.align,e,t.alt)}this.closeLoading()},setup_reader:function(t,e,i,n,l,s,o,a){try{this.context.image.base64RenderIndex=o;const r=this._w.FileReader,c=[o];this.context.image.inputX.value=i,this.context.image.inputY.value=n;for(let u,d,h=0;h<o;h++)u=new r,d=t[h],u.onload=function(t,o,a,r,u){c[u]={result:t.result,file:r},0==--this.context.image.base64RenderIndex&&(this.plugins.image.onRender_imgBase64.call(this,o,c,a,e,i,n,l,s),this.closeLoading())}.bind(this,u,a,this.context.image._element,d,h),u.readAsDataURL(d)}catch(t){throw this.closeLoading(),Error('[SUNEDITOR.image.setup_reader.fail] cause : "'+t.message+'"')}},onRender_imgBase64:function(t,e,i,n,l,s,o,a){const r=this.plugins.image.update_src,c=this.plugins.image.create_image;for(let u=0,d=e.length;u<d;u++)t?(this.context.image._element.setAttribute("data-file-name",e[u].file.name),this.context.image._element.setAttribute("data-file-size",e[u].file.size),r.call(this,e[u].result,i,e[u].file)):c.call(this,e[u].result,n,l,s,o,e[u].file,a)},onRender_imgUrl:function(t){if(t||(t=this.context.image._v_src._linkValue),!t)return!1;const e=this.context.image;try{const i={name:t.split("/").pop(),size:0};this.context.dialog.updateModal?this.plugins.image.update_src.call(this,t,e._element,i):this.plugins.image.create_image.call(this,t,this.plugins.anchor.createAnchor.call(this,e.anchorCtx,!0),e.inputX.value,e.inputY.value,e._align,i,e._altText)}catch(t){throw Error('[SUNEDITOR.image.URLRendering.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}},onRender_link:function(t,e){return e?(e.setAttribute("data-image-link","image"),t.setAttribute("data-image-link",e.href),e.appendChild(t),e):t},setInputSize:function(t,e){e&&32===e.keyCode?e.preventDefault():this.plugins.resizing._module_setInputSize.call(this,this.context.image,t)},setRatio:function(){this.plugins.resizing._module_setRatio.call(this,this.context.image)},checkFileInfo:function(){const t=this.plugins.image,e=this.context.image,i=function(i){t.onModifyMode.call(this,i,null),t.openModify.call(this,!0),e.inputX.value=e._origin_w,e.inputY.value=e._origin_h;const n=this.util.getFormatElement(i);n&&(e._align=n.style.textAlign||n.style.float);this.util.getParentElement(i,this.util.isAnchor)&&!e.anchorCtx.linkValue&&(e.anchorCtx.linkValue=" "),t.update_image.call(this,!0,!1,!0),t.init.call(this)}.bind(this);this.plugins.fileManager.checkInfo.call(this,"image",["img"],this.functions.onImageUpload,i,!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"image",this.functions.onImageUpload)},create_image:function(t,e,i,n,l,s,o){const a=this.plugins.image,r=this.context.image;this.context.resizing._resize_plugin="image";let c=this.util.createElement("IMG");c.src=t,c.alt=o,c.setAttribute("data-rotate","0"),e=a.onRender_link.call(this,c,e),r._resizing&&c.setAttribute("data-proportion",r._proportionChecked);const u=this.plugins.component.set_cover.call(this,e),d=this.plugins.component.set_container.call(this,u,"se-image-container");r._captionChecked&&(r._caption=this.plugins.component.create_caption.call(this),r._caption.setAttribute("contenteditable",!1),u.appendChild(r._caption)),r._element=c,r._cover=u,r._container=d,a.applySize.call(this,i,n),a.setAlign.call(this,l,c,u,d),c.onload=a._image_create_onload.bind(this,c,r.svgDefaultSize,d),this.insertComponent(d,!0,!0,!0)&&this.plugins.fileManager.setInfo.call(this,"image",c,this.functions.onImageUpload,s,!0),this.context.resizing._resize_plugin=""},_image_create_onload:function(t,e,i){if(0===t.offsetWidth&&this.plugins.image.applySize.call(this,e,""),this.options.mediaAutoSelect)this.selectComponent(t,"image");else{const t=this.appendFormatTag(i,null);t&&this.setRange(t,0,t,0)}},update_image:function(t,e,i){const n=this.context.image;let l,s=n._element,o=n._cover,a=n._container,r=!1;null===o&&(r=!0,s=n._element.cloneNode(!0),o=this.plugins.component.set_cover.call(this,s)),null===a?(o=o.cloneNode(!0),s=o.querySelector("img"),r=!0,a=this.plugins.component.set_container.call(this,o,"se-image-container")):r&&(a.innerHTML="",a.appendChild(o),n._cover=o,n._element=s,r=!1);const c=this.util.isNumber(n.inputX.value)?n.inputX.value+n.sizeUnit:n.inputX.value,u=this.util.isNumber(n.inputY.value)?n.inputY.value+n.sizeUnit:n.inputY.value;l=/%$/.test(s.style.width)?c!==a.style.width||u!==a.style.height:c!==s.style.width||u!==s.style.height,s.alt=n._altText;let d=!1;n._captionChecked?n._caption||(n._caption=this.plugins.component.create_caption.call(this),o.appendChild(n._caption),d=!0):n._caption&&(this.util.removeItem(n._caption),n._caption=null,d=!0);const h=this.plugins.anchor.createAnchor.call(this,n.anchorCtx,!0);if(h)n._linkElement!==h?(n._linkElement=h.cloneNode(!1),o.insertBefore(this.plugins.image.onRender_link.call(this,s,n._linkElement),n._caption),this.util.removeItem(h)):n._linkElement.setAttribute("data-image-link","image");else if(null!==n._linkElement){const t=s;if(t.setAttribute("data-image-link",""),o.contains(n._linkElement)){const e=t.cloneNode(!0);o.removeChild(n._linkElement),o.insertBefore(e,n._caption),n._element=s=e}}if(r){const t=this.util.isRangeFormatElement(n._element.parentNode)||this.util.isWysiwygDiv(n._element.parentNode)?n._element:/^A$/i.test(n._element.parentNode.nodeName)?n._element.parentNode:this.util.getFormatElement(n._element)||n._element;if(this.util.isListCell(t)||this.util.isFormatElement(t))n._element.parentNode.replaceChild(a,n._element);else if(this.util.isFormatElement(t)&&t.childNodes.length>0)t.parentNode.insertBefore(a,t),this.util.removeItem(n._element),this.util.removeEmptyNode(t,null),0===t.children.length&&(t.innerHTML=this.util.htmlRemoveWhiteSpace(t.innerHTML));else if(this.util.isFormatElement(t.parentNode)){const e=t.parentNode;e.parentNode.insertBefore(a,t.previousSibling?e.nextElementSibling:e),this.util.removeItem(t)}else t.parentNode.replaceChild(a,t);s=a.querySelector("img"),n._element=s,n._cover=o,n._container=a}(d||!n._onlyPercentage&&l)&&!t&&(/\d+/.test(s.style.height)||this.context.resizing._rotateVertical&&n._captionChecked)&&(/%$/.test(n.inputX.value)||/%$/.test(n.inputY.value)?this.plugins.resizing.resetTransform.call(this,s):this.plugins.resizing.setTransformSize.call(this,s,this.util.getNumber(n.inputX.value,0),this.util.getNumber(n.inputY.value,0))),n._resizing&&(s.setAttribute("data-proportion",n._proportionChecked),l&&this.plugins.image.applySize.call(this)),this.plugins.image.setAlign.call(this,null,s,null,null),t&&this.plugins.fileManager.setInfo.call(this,"image",s,this.functions.onImageUpload,null,!0),e&&this.selectComponent(s,"image"),i||this.history.push(!1)},update_src:function(t,e,i){e.src=t,this._w.setTimeout(this.plugins.fileManager.setInfo.bind(this,"image",e,this.functions.onImageUpload,i,!0)),this.selectComponent(e,"image")},onModifyMode:function(t,e){if(!t)return;const i=this.context.image;i._linkElement=i.anchorCtx.linkAnchor=/^A$/i.test(t.parentNode.nodeName)?t.parentNode:null,i._element=t,i._cover=this.util.getParentElement(t,"FIGURE"),i._container=this.util.getParentElement(t,this.util.isMediaComponent),i._caption=this.util.getChildElement(i._cover,"FIGCAPTION"),i._align=t.style.float||t.getAttribute("data-align")||"none",t.style.float="",this.plugins.anchor.setCtx(i._linkElement,i.anchorCtx),e&&(i._element_w=e.w,i._element_h=e.h,i._element_t=e.t,i._element_l=e.l);let n,l,s=i._element.getAttribute("data-size")||i._element.getAttribute("data-origin");s?(s=s.split(","),n=s[0],l=s[1]):e&&(n=e.w,l=e.h),i._origin_w=n||t.style.width||t.width||"",i._origin_h=l||t.style.height||t.height||""},openModify:function(t){const e=this.context.image;e.imgUrlFile&&(e._v_src._linkValue=e.previewSrc.textContent=e.imgUrlFile.value=e._element.src),e._altText=e.altText.value=e._element.alt,(e.modal.querySelector('input[name="suneditor_image_radio"][value="'+e._align+'"]')||e.modal.querySelector('input[name="suneditor_image_radio"][value="none"]')).checked=!0,e._align=e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value,e._captionChecked=e.captionCheckEl.checked=!!e._caption,e._resizing&&this.plugins.resizing._module_setModifyInputSize.call(this,e,this.plugins.image),t||this.plugins.dialog.open.call(this,"image",!0)},applySize:function(t,e){const i=this.context.image;return t||(t=i.inputX.value||this.options.imageWidth),e||(e=i.inputY.value||this.options.imageHeight),i._onlyPercentage&&t||/%$/.test(t)?(this.plugins.image.setPercentSize.call(this,t,e),!0):(t&&"auto"!==t||e&&"auto"!==e?this.plugins.image.setSize.call(this,t,e,!1):this.plugins.image.setAutoSize.call(this),!1)},sizeRevert:function(){this.plugins.resizing._module_sizeRevert.call(this,this.context.image)},setSize:function(t,e,i,n){const l=this.context.image,s=/^(rw|lw)$/.test(n);/^(th|bh)$/.test(n)||(l._element.style.width=this.util.isNumber(t)?t+l.sizeUnit:t,this.plugins.image.cancelPercentAttr.call(this)),s||(l._element.style.height=this.util.isNumber(e)?e+l.sizeUnit:/%$/.test(e)?"":e),"center"===l._align&&this.plugins.image.setAlign.call(this,null,null,null,null),i||l._element.removeAttribute("data-percentage"),this.plugins.resizing._module_saveCurrentSize.call(this,l)},setAutoSize:function(){const t=this.context.image;this.plugins.resizing.resetTransform.call(this,t._element),this.plugins.image.cancelPercentAttr.call(this),t._element.style.maxWidth="",t._element.style.width="",t._element.style.height="",t._cover.style.width="",t._cover.style.height="",this.plugins.image.setAlign.call(this,null,null,null,null),t._element.setAttribute("data-percentage","auto,auto"),this.plugins.resizing._module_saveCurrentSize.call(this,t)},setOriginSize:function(){const t=this.context.image;t._element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,t._element),this.plugins.image.cancelPercentAttr.call(this);const e=(t._element.getAttribute("data-origin")||"").split(","),i=e[0],n=e[1];e&&(t._onlyPercentage||/%$/.test(i)&&(/%$/.test(n)||!/\d/.test(n))?this.plugins.image.setPercentSize.call(this,i,n):this.plugins.image.setSize.call(this,i,n),this.plugins.resizing._module_saveCurrentSize.call(this,t))},setPercentSize:function(t,e){const i=this.context.image;e=!e||/%$/.test(e)||this.util.getNumber(e,0)?this.util.isNumber(e)?e+i.sizeUnit:e||"":this.util.isNumber(e)?e+"%":e;const n=/%$/.test(e);i._container.style.width=this.util.isNumber(t)?t+"%":t,i._container.style.height="",i._cover.style.width="100%",i._cover.style.height=n?e:"",i._element.style.width="100%",i._element.style.height=n?"":e,i._element.style.maxWidth="","center"===i._align&&this.plugins.image.setAlign.call(this,null,null,null,null),i._element.setAttribute("data-percentage",t+","+e),this.plugins.resizing.setCaptionPosition.call(this,i._element),this.plugins.resizing._module_saveCurrentSize.call(this,i)},cancelPercentAttr:function(){const t=this.context.image;t._cover.style.width="",t._cover.style.height="",t._container.style.width="",t._container.style.height="",this.util.removeClass(t._container,this.context.image._floatClassRegExp),this.util.addClass(t._container,"__se__float-"+t._align),"center"===t._align&&this.plugins.image.setAlign.call(this,null,null,null,null)},setAlign:function(t,e,i,n){const l=this.context.image;t||(t=l._align),e||(e=l._element),i||(i=l._cover),n||(n=l._container),i.style.margin=t&&"none"!==t?"auto":"0",/%$/.test(e.style.width)&&"center"===t?(n.style.minWidth="100%",i.style.width=n.style.width):(n.style.minWidth="",i.style.width=this.context.resizing._rotateVertical?e.style.height||e.offsetHeight:e.style.width&&"auto"!==e.style.width?e.style.width||"100%":""),this.util.hasClass(n,"__se__float-"+t)||(this.util.removeClass(n,l._floatClassRegExp),this.util.addClass(n,"__se__float-"+t)),e.setAttribute("data-align",t)},init:function(){const t=this.context.image;t.imgInputFile&&(t.imgInputFile.value=""),t.imgUrlFile&&(t._v_src._linkValue=t.previewSrc.textContent=t.imgUrlFile.value=""),t.imgInputFile&&t.imgUrlFile&&(t.imgUrlFile.removeAttribute("disabled"),t.previewSrc.style.textDecoration=""),t.altText.value="",t.modal.querySelector('input[name="suneditor_image_radio"][value="none"]').checked=!0,t.captionCheckEl.checked=!1,t._element=null,this.plugins.image.openTab.call(this,"init"),t._resizing&&(t.inputX.value=this.options.imageWidth===t._defaultSizeX?"":this.options.imageWidth,t.inputY.value=this.options.imageHeight===t._defaultSizeY?"":this.options.imageHeight,t.proportion.checked=!0,t._ratio=!1,t._ratioX=1,t._ratioY=1),this.plugins.anchor.init.call(this,t.anchorCtx)}},v={name:"video",display:"dialog",add:function(t){t.addModule([r(),p(),m(),_()]);const e=t.options,i=t.context,n=i.video={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,sizeUnit:e._videoSizeUnit,_align:"none",_floatClassRegExp:"__se__float\\-[a-z]+",_youtubeQuery:e.youtubeQuery,_videoRatio:100*e.videoRatio+"%",_defaultRatio:100*e.videoRatio+"%",_linkValue:"",_element:null,_cover:null,_container:null,inputX:null,inputY:null,_element_w:1,_element_h:1,_element_l:0,_element_t:0,_defaultSizeX:"100%",_defaultSizeY:100*e.videoRatio+"%",_origin_w:"100%"===e.videoWidth?"":e.videoWidth,_origin_h:"56.25%"===e.videoHeight?"":e.videoHeight,_proportionChecked:!0,_resizing:e.videoResizing,_resizeDotHide:!e.videoHeightShow,_rotation:e.videoRotation,_alignHide:!e.videoAlignShow,_onlyPercentage:e.videoSizeOnlyPercentage,_ratio:!1,_ratioX:1,_ratioY:1,_captionShow:!1};let l=this.setDialog(t);n.modal=l,n.videoInputFile=l.querySelector("._se_video_file"),n.videoUrlFile=l.querySelector(".se-input-url"),n.focusElement=n.videoUrlFile||n.videoInputFile,n.preview=l.querySelector(".se-link-preview"),l.querySelector("form").addEventListener("submit",this.submit.bind(t)),n.videoInputFile&&l.querySelector(".se-dialog-files-edge-button").addEventListener("click",this._removeSelectedFiles.bind(n.videoInputFile,n.videoUrlFile,n.preview)),n.videoInputFile&&n.videoUrlFile&&n.videoInputFile.addEventListener("change",this._fileInputChange.bind(n)),n.videoUrlFile&&n.videoUrlFile.addEventListener("input",this._onLinkPreview.bind(n.preview,n,e.linkProtocol)),n.proportion={},n.videoRatioOption={},n.inputX={},n.inputY={},e.videoResizing&&(n.proportion=l.querySelector("._se_video_check_proportion"),n.videoRatioOption=l.querySelector(".se-video-ratio"),n.inputX=l.querySelector("._se_video_size_x"),n.inputY=l.querySelector("._se_video_size_y"),n.inputX.value=e.videoWidth,n.inputY.value=e.videoHeight,n.inputX.addEventListener("keyup",this.setInputSize.bind(t,"x")),n.inputY.addEventListener("keyup",this.setInputSize.bind(t,"y")),n.inputX.addEventListener("change",this.setRatio.bind(t)),n.inputY.addEventListener("change",this.setRatio.bind(t)),n.proportion.addEventListener("change",this.setRatio.bind(t)),n.videoRatioOption.addEventListener("change",this.setVideoRatio.bind(t)),l.querySelector(".se-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(t))),i.dialog.modal.appendChild(l),l=null},setDialog:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");n.className="se-dialog-content",n.style.display="none";let l='<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" aria-label="Close" title="'+i.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+i.dialogBox.videoBox.title+'</span></div><div class="se-dialog-body">';if(e.videoFileInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.videoBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_video_file" type="file" accept="'+e.videoAccept+'"'+(e.videoMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+i.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.videoUrlInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.videoBox.url+'</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'),e.videoResizing){const n=e.videoRatioList||[{name:"16:9",value:.5625},{name:"4:3",value:.75},{name:"21:9",value:.4285}],s=e.videoRatio,o=e.videoSizeOnlyPercentage,a=o?' style="display: none !important;"':"",r=e.videoHeightShow?"":' style="display: none !important;"',c=e.videoRatioShow?"":' style="display: none !important;"',u=o||e.videoHeightShow||e.videoRatioShow?"":' style="display: none !important;"';l+='<div class="se-dialog-form"><div class="se-dialog-size-text"><label class="size-w">'+i.dialogBox.width+'</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h"'+r+">"+i.dialogBox.height+'</label><label class="size-h"'+c+">("+i.dialogBox.ratio+')</label></div><input class="se-input-control _se_video_size_x" placeholder="100%"'+(o?' type="number" min="1"':'type="text"')+(o?' max="100"':"")+'/><label class="se-dialog-size-x"'+u+">"+(o?"%":"x")+'</label><input class="se-input-control _se_video_size_y" placeholder="'+100*e.videoRatio+'%"'+(o?' type="number" min="1"':'type="text"')+(o?' max="100"':"")+r+'/><select class="se-input-select se-video-ratio" title="'+i.dialogBox.ratio+'"'+c+">",r||(l+='<option value=""> - </option>');for(let t=0,e=n.length;t<e;t++)l+='<option value="'+n[t].value+'"'+(s.toString()===n[t].value.toString()?" selected":"")+">"+n[t].name+"</option>";l+='</select><button type="button" title="'+i.dialogBox.revertButton+'" class="se-btn se-dialog-btn-revert" style="float: right;">'+t.icons.revert+'</button></div><div class="se-dialog-form se-dialog-form-footer"'+a+u+'><label><input type="checkbox" class="se-dialog-btn-check _se_video_check_proportion" checked/>&nbsp;'+i.dialogBox.proportion+"</label></div>"}return l+='</div><div class="se-dialog-footer"><div'+(e.videoAlignShow?"":' style="display: none"')+'><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="none" checked>'+i.dialogBox.basic+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="left">'+i.dialogBox.left+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="center">'+i.dialogBox.center+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="right">'+i.dialogBox.right+'</label></div><button type="submit" class="se-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},_fileInputChange:function(){this.videoInputFile.value?(this.videoUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.videoUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_onLinkPreview:function(t,e,i){const n=i.target.value.trim();/^<iframe.*\/iframe>$/.test(n)?(t._linkValue=n,this.textContent='<IFrame :src=".."></IFrame>'):t._linkValue=this.textContent=n?e&&-1===n.indexOf("://")&&0!==n.indexOf("#")?e+n:-1===n.indexOf("://")?"/"+n:n:""},_setTagAttrs:function(t){t.setAttribute("controls",!0);const e=this.options.videoTagAttrs;if(e)for(let i in e)this.util.hasOwn(e,i)&&t.setAttribute(i,e[i])},createVideoTag:function(){const t=this.util.createElement("VIDEO");return this.plugins.video._setTagAttrs.call(this,t),t},_setIframeAttrs:function(t){t.frameBorder="0",t.allowFullscreen=!0;const e=this.options.videoIframeAttrs;if(e)for(let i in e)this.util.hasOwn(e,i)&&t.setAttribute(i,e[i])},createIframeTag:function(){const t=this.util.createElement("IFRAME");return this.plugins.video._setIframeAttrs.call(this,t),t},fileTags:["iframe","video"],select:function(t){this.plugins.video.onModifyMode.call(this,t,this.plugins.resizing.call_controller_resize.call(this,t,"video"))},destroy:function(t){const e=t||this.context.video._element,i=this.context.video._container,n=1*e.getAttribute("data-index");let l=i.previousElementSibling||i.nextElementSibling;const s=i.parentNode;this.util.removeItem(i),this.plugins.video.init.call(this),this.controllersOff(),s!==this.context.element.wysiwyg&&this.util.removeItemAllParents(s,(function(t){return 0===t.childNodes.length}),null),this.focusEdge(l),this.plugins.fileManager.deleteInfo.call(this,"video",n,this.functions.onVideoUpload),this.history.push(!1)},on:function(t){const e=this.context.video;t?e.videoInputFile&&this.options.videoMultipleFile&&e.videoInputFile.removeAttribute("multiple"):(e.inputX.value=e._origin_w=this.options.videoWidth===e._defaultSizeX?"":this.options.videoWidth,e.inputY.value=e._origin_h=this.options.videoHeight===e._defaultSizeY?"":this.options.videoHeight,e.proportion.disabled=!0,e.videoInputFile&&this.options.videoMultipleFile&&e.videoInputFile.setAttribute("multiple","multiple")),e._resizing&&this.plugins.video.setVideoRatioSelect.call(this,e._origin_h||e._defaultRatio)},open:function(){this.plugins.dialog.open.call(this,"video","video"===this.currentControllerName)},setVideoRatio:function(t){const e=this.context.video,i=t.target.options[t.target.selectedIndex].value;e._defaultSizeY=e._videoRatio=i?100*i+"%":e._defaultSizeY,e.inputY.placeholder=i?100*i+"%":"",e.inputY.value=""},setInputSize:function(t,e){if(e&&32===e.keyCode)return void e.preventDefault();const i=this.context.video;this.plugins.resizing._module_setInputSize.call(this,i,t),"y"===t&&this.plugins.video.setVideoRatioSelect.call(this,e.target.value||i._defaultRatio)},setRatio:function(){this.plugins.resizing._module_setRatio.call(this,this.context.video)},submit:function(t){const e=this.context.video,i=this.plugins.video;t.preventDefault(),t.stopPropagation(),e._align=e.modal.querySelector('input[name="suneditor_video_radio"]:checked').value;try{e.videoInputFile&&e.videoInputFile.files.length>0?(this.showLoading(),i.submitAction.call(this,this.context.video.videoInputFile.files)):e.videoUrlFile&&e._linkValue.length>0&&(this.showLoading(),i.setup_url.call(this,e._linkValue))}catch(t){throw this.closeLoading(),Error('[SUNEDITOR.video.submit.fail] cause : "'+t.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(0===t.length)return;let e=0,i=[];for(let n=0,l=t.length;n<l;n++)/video/i.test(t[n].type)&&(i.push(t[n]),e+=t[n].size);const n=this.options.videoUploadSizeLimit;if(n>0){let t=0;const i=this.context.video._infoList;for(let e=0,n=i.length;e<n;e++)t+=1*i[e].size;if(e+t>n){this.closeLoading();const i="[SUNEDITOR.videoUpload.fail] Size of uploadable total videos: "+n/1e3+"KB";return void(("function"!=typeof this.functions.onVideoUploadError||this.functions.onVideoUploadError(i,{limitSize:n,currentSize:t,uploadSize:e},this))&&this.functions.noticeOpen(i))}}const l=this.context.video;l._uploadFileLength=i.length;const s={inputWidth:l.inputX.value,inputHeight:l.inputY.value,align:l._align,isUpdate:this.context.dialog.updateModal,element:l._element};if("function"==typeof this.functions.onVideoUploadBefore){const t=this.functions.onVideoUploadBefore(i,s,this,function(t){t&&this._w.Array.isArray(t.result)?this.plugins.video.register.call(this,s,t):this.plugins.video.upload.call(this,s,t)}.bind(this));if(void 0===t)return;if(!t)return void this.closeLoading();"object"==typeof t&&t.length>0&&(i=t)}this.plugins.video.upload.call(this,s,i)},error:function(t,e){if(this.closeLoading(),"function"!=typeof this.functions.onVideoUploadError||this.functions.onVideoUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.video.error] response: "+t)},upload:function(t,e){if(!e)return void this.closeLoading();if("string"==typeof e)return void this.plugins.video.error.call(this,e,null);const i=this.options.videoUploadUrl,n=this.context.dialog.updateModal?1:e.length;if(!("string"==typeof i&&i.length>0))throw Error('[SUNEDITOR.videoUpload.fail] cause : There is no "videoUploadUrl" option.');{const l=new FormData;for(let t=0;t<n;t++)l.append("file-"+t,e[t]);this.plugins.fileManager.upload.call(this,i,this.options.videoUploadHeader,l,this.plugins.video.callBack_videoUpload.bind(this,t),this.functions.onVideoUploadError)}},callBack_videoUpload:function(t,e){if("function"==typeof this.functions.videoUploadHandler)this.functions.videoUploadHandler(e,t,this);else{const i=JSON.parse(e.responseText);i.errorMessage?this.plugins.video.error.call(this,i.errorMessage,i):this.plugins.video.register.call(this,t,i)}},register:function(t,e){const i=e.result,n=this.plugins.video.createVideoTag.call(this);for(let e,l=0,s=i.length;l<s;l++)e={name:i[l].name,size:i[l].size},this.plugins.video.create_video.call(this,t.isUpdate?t.element:n.cloneNode(!1),i[l].url,t.inputWidth,t.inputHeight,t.align,e,t.isUpdate);this.closeLoading()},setup_url:function(t){try{const e=this.context.video;if(t||(t=e._linkValue),!t)return!1;if(/^<iframe.*\/iframe>$/.test(t)){if(0===(t=(new this._w.DOMParser).parseFromString(t,"text/html").querySelector("iframe").src).length)return!1}if(/youtu\.?be/.test(t)){if(/^http/.test(t)||(t="https://"+t),t=t.replace("watch?v=",""),/^\/\/.+\/embed\//.test(t)||(t=t.replace(t.match(/\/\/.+\//)[0],"//www.youtube.com/embed/").replace("&","?&")),e._youtubeQuery.length>0)if(/\?/.test(t)){const i=t.split("?");t=i[0]+"?"+e._youtubeQuery+"&"+i[1]}else t+="?"+e._youtubeQuery}else/vimeo\.com/.test(t)&&(t.endsWith("/")&&(t=t.slice(0,-1)),t="https://player.vimeo.com/video/"+t.slice(t.lastIndexOf("/")+1));this.plugins.video.create_video.call(this,this.plugins.video[/youtu\.?be/.test(t)||/vimeo\.com/.test(t)?"createIframeTag":"createVideoTag"].call(this),t,e.inputX.value,e.inputY.value,e._align,null,this.context.dialog.updateModal)}catch(t){throw Error('[SUNEDITOR.video.upload.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}},create_video:function(t,e,i,n,l,s,o){this.context.resizing._resize_plugin="video";const a=this.context.video;let r=null,c=null,u=!1;if(o){if((t=a._element).src!==e){u=!0;const i=/youtu\.?be/.test(e),n=/vimeo\.com/.test(e);if(!i&&!n||/^iframe$/i.test(t.nodeName))if(i||n||/^videoo$/i.test(t.nodeName))t.src=e;else{const i=this.plugins.video.createVideoTag.call(this);i.src=e,t.parentNode.replaceChild(i,t),a._element=t=i}else{const i=this.plugins.video.createIframeTag.call(this);i.src=e,t.parentNode.replaceChild(i,t),a._element=t=i}}c=a._container,r=this.util.getParentElement(t,"FIGURE")}else u=!0,t.src=e,a._element=t,r=this.plugins.component.set_cover.call(this,t),c=this.plugins.component.set_container.call(this,r,"se-video-container");a._cover=r,a._container=c;const d=this.plugins.resizing._module_getSizeX.call(this,a)!==(i||a._defaultSizeX)||this.plugins.resizing._module_getSizeY.call(this,a)!==(n||a._videoRatio),h=!o||d;a._resizing&&(this.context.video._proportionChecked=a.proportion.checked,t.setAttribute("data-proportion",a._proportionChecked));let p=!1;h&&(p=this.plugins.video.applySize.call(this)),p&&"center"===l||this.plugins.video.setAlign.call(this,null,t,r,c);let g=!0;if(o)a._resizing&&this.context.resizing._rotateVertical&&h&&this.plugins.resizing.setTransformSize.call(this,t,null,null);else if(g=this.insertComponent(c,!1,!0,!this.options.mediaAutoSelect),!this.options.mediaAutoSelect){const t=this.appendFormatTag(c,null);t&&this.setRange(t,0,t,0)}g&&(u&&this.plugins.fileManager.setInfo.call(this,"video",t,this.functions.onVideoUpload,s,!0),o&&(this.selectComponent(t,"video"),this.history.push(!1))),this.context.resizing._resize_plugin=""},_update_videoCover:function(t){if(!t)return;const e=this.context.video;/^video$/i.test(t.nodeName)?this.plugins.video._setTagAttrs.call(this,t):this.plugins.video._setIframeAttrs.call(this,t);const i=this.util.isRangeFormatElement(t.parentNode)||this.util.isWysiwygDiv(t.parentNode)?t:this.util.getFormatElement(t)||t,n=t;e._element=t=t.cloneNode(!0);const l=e._cover=this.plugins.component.set_cover.call(this,t),s=e._container=this.plugins.component.set_container.call(this,l,"se-video-container");try{const o=i.querySelector("figcaption");let a=null;o&&(a=this.util.createElement("DIV"),a.innerHTML=o.innerHTML,this.util.removeItem(o));const r=(t.getAttribute("data-size")||t.getAttribute("data-origin")||"").split(",");this.plugins.video.applySize.call(this,r[0]||n.style.width||n.width||"",r[1]||n.style.height||n.height||"");const c=this.util.getFormatElement(n);c&&(e._align=c.style.textAlign||c.style.float),this.plugins.video.setAlign.call(this,null,t,l,s),this.util.isListCell(i)||this.util.isFormatElement(i)?n.parentNode.replaceChild(s,n):this.util.isFormatElement(i)&&i.childNodes.length>0?(i.parentNode.insertBefore(s,i),this.util.removeItem(n),this.util.removeEmptyNode(i,null),0===i.children.length&&(i.innerHTML=this.util.htmlRemoveWhiteSpace(i.innerHTML))):i.parentNode.replaceChild(s,i),a&&i.parentNode.insertBefore(a,s.nextElementSibling)}catch(t){console.warn("[SUNEDITOR.video.error] Maybe the video tag is nested.",t)}this.plugins.fileManager.setInfo.call(this,"video",t,this.functions.onVideoUpload,null,!0),this.plugins.video.init.call(this)},onModifyMode:function(t,e){const i=this.context.video;i._element=t,i._cover=this.util.getParentElement(t,"FIGURE"),i._container=this.util.getParentElement(t,this.util.isMediaComponent),i._align=t.style.float||t.getAttribute("data-align")||"none",t.style.float="",e&&(i._element_w=e.w,i._element_h=e.h,i._element_t=e.t,i._element_l=e.l);let n,l,s=i._element.getAttribute("data-size")||i._element.getAttribute("data-origin");s?(s=s.split(","),n=s[0],l=s[1]):e&&(n=e.w,l=e.h),i._origin_w=n||t.style.width||t.width||"",i._origin_h=l||t.style.height||t.height||""},openModify:function(t){const e=this.context.video;if(e.videoUrlFile&&(e._linkValue=e.preview.textContent=e.videoUrlFile.value=e._element.src||(e._element.querySelector("source")||"").src||""),(e.modal.querySelector('input[name="suneditor_video_radio"][value="'+e._align+'"]')||e.modal.querySelector('input[name="suneditor_video_radio"][value="none"]')).checked=!0,e._resizing){this.plugins.resizing._module_setModifyInputSize.call(this,e,this.plugins.video);const t=e._videoRatio=this.plugins.resizing._module_getSizeY.call(this,e);this.plugins.video.setVideoRatioSelect.call(this,t)||(e.inputY.value=e._onlyPercentage?this.util.getNumber(t,2):t)}t||this.plugins.dialog.open.call(this,"video",!0)},setVideoRatioSelect:function(t){let e=!1;const i=this.context.video,n=i.videoRatioOption.options;/%$/.test(t)||i._onlyPercentage?t=this.util.getNumber(t,2)/100+"":(!this.util.isNumber(t)||1*t>=1)&&(t=""),i.inputY.placeholder="";for(let l=0,s=n.length;l<s;l++)n[l].value===t?(e=n[l].selected=!0,i.inputY.placeholder=t?100*t+"%":""):n[l].selected=!1;return e},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"video",["iframe","video"],this.functions.onVideoUpload,this.plugins.video._update_videoCover.bind(this),!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"video",this.functions.onVideoUpload)},applySize:function(t,e){const i=this.context.video;return t||(t=i.inputX.value||this.options.videoWidth),e||(e=i.inputY.value||this.options.videoHeight),i._onlyPercentage||/%$/.test(t)||!t?(this.plugins.video.setPercentSize.call(this,t||"100%",e||(/%$/.test(i._videoRatio)?i._videoRatio:i._defaultRatio)),!0):(t&&"auto"!==t||e&&"auto"!==e?this.plugins.video.setSize.call(this,t,e||i._videoRatio||i._defaultRatio,!1):this.plugins.video.setAutoSize.call(this),!1)},sizeRevert:function(){this.plugins.resizing._module_sizeRevert.call(this,this.context.video)},setSize:function(t,e,i,n){const l=this.context.video,s=/^(rw|lw)$/.test(n),o=/^(th|bh)$/.test(n);o||(t=this.util.getNumber(t,0)),s||(e=this.util.isNumber(e)?e+l.sizeUnit:e||""),t=t?t+l.sizeUnit:"",o||(l._element.style.width=t),s||(l._cover.style.paddingBottom=l._cover.style.height=e),o||/%$/.test(t)||(l._cover.style.width=t,l._container.style.width=""),s||/%$/.test(e)?l._element.style.height="":l._element.style.height=e,i||l._element.removeAttribute("data-percentage"),this.plugins.resizing._module_saveCurrentSize.call(this,l)},setAutoSize:function(){this.plugins.video.setPercentSize.call(this,100,this.context.video._defaultRatio)},setOriginSize:function(t){const e=this.context.video;e._element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,e._element),this.plugins.video.cancelPercentAttr.call(this);const i=((t?e._element.getAttribute("data-size"):"")||e._element.getAttribute("data-origin")||"").split(",");if(i){const t=i[0],n=i[1];e._onlyPercentage||/%$/.test(t)&&(/%$/.test(n)||!/\d/.test(n))?this.plugins.video.setPercentSize.call(this,t,n):this.plugins.video.setSize.call(this,t,n),this.plugins.resizing._module_saveCurrentSize.call(this,e)}},setPercentSize:function(t,e){const i=this.context.video;e=!e||/%$/.test(e)||this.util.getNumber(e,0)?this.util.isNumber(e)?e+i.sizeUnit:e||i._defaultRatio:this.util.isNumber(e)?e+"%":e,i._container.style.width=this.util.isNumber(t)?t+"%":t,i._container.style.height="",i._cover.style.width="100%",i._cover.style.height=e,i._cover.style.paddingBottom=e,i._element.style.width="100%",i._element.style.height="100%",i._element.style.maxWidth="","center"===i._align&&this.plugins.video.setAlign.call(this,null,null,null,null),i._element.setAttribute("data-percentage",t+","+e),this.plugins.resizing._module_saveCurrentSize.call(this,i)},cancelPercentAttr:function(){const t=this.context.video;t._cover.style.width="",t._cover.style.height="",t._cover.style.paddingBottom="",t._container.style.width="",t._container.style.height="",this.util.removeClass(t._container,this.context.video._floatClassRegExp),this.util.addClass(t._container,"__se__float-"+t._align),"center"===t._align&&this.plugins.video.setAlign.call(this,null,null,null,null)},setAlign:function(t,e,i,n){const l=this.context.video;t||(t=l._align),e||(e=l._element),i||(i=l._cover),n||(n=l._container),i.style.margin=t&&"none"!==t?"auto":"0",/%$/.test(e.style.width)&&"center"===t?(n.style.minWidth="100%",i.style.width=n.style.width,i.style.height=i.style.height,i.style.paddingBottom=/%$/.test(i.style.height)?this.util.getNumber(this.util.getNumber(i.style.height,2)/100*this.util.getNumber(i.style.width,2),2)+"%":i.style.height):(n.style.minWidth="",i.style.width=this.context.resizing._rotateVertical?e.style.height||e.offsetHeight:e.style.width||"100%",i.style.paddingBottom=i.style.height),this.util.hasClass(n,"__se__float-"+t)||(this.util.removeClass(n,l._floatClassRegExp),this.util.addClass(n,"__se__float-"+t)),e.setAttribute("data-align",t)},init:function(){const t=this.context.video;t.videoInputFile&&(t.videoInputFile.value=""),t.videoUrlFile&&(t._linkValue=t.preview.textContent=t.videoUrlFile.value=""),t.videoInputFile&&t.videoUrlFile&&(t.videoUrlFile.removeAttribute("disabled"),t.preview.style.textDecoration=""),t._origin_w=this.options.videoWidth,t._origin_h=this.options.videoHeight,t.modal.querySelector('input[name="suneditor_video_radio"][value="none"]').checked=!0,t._resizing&&(t.inputX.value=this.options.videoWidth===t._defaultSizeX?"":this.options.videoWidth,t.inputY.value=this.options.videoHeight===t._defaultSizeY?"":this.options.videoHeight,t.proportion.checked=!0,t.proportion.disabled=!0,this.plugins.video.setVideoRatioSelect.call(this,t._defaultRatio))}},y={name:"audio",display:"dialog",add:function(t){t.addModule([r(),p(),_()]);const e=t.context,i=e.audio={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,targetSelect:null,_origin_w:t.options.audioWidth,_origin_h:t.options.audioHeight,_linkValue:"",_element:null,_cover:null,_container:null};let n=this.setDialog(t);i.modal=n,i.audioInputFile=n.querySelector("._se_audio_files"),i.audioUrlFile=n.querySelector(".se-input-url"),i.focusElement=i.audioInputFile||i.audioUrlFile,i.preview=n.querySelector(".se-link-preview");let l=this.setController(t);i.controller=l,n.querySelector("form").addEventListener("submit",this.submit.bind(t)),i.audioInputFile&&n.querySelector(".se-dialog-files-edge-button").addEventListener("click",this._removeSelectedFiles.bind(i.audioInputFile,i.audioUrlFile,i.preview)),i.audioInputFile&&i.audioUrlFile&&i.audioInputFile.addEventListener("change",this._fileInputChange.bind(i)),l.addEventListener("click",this.onClick_controller.bind(t)),i.audioUrlFile&&i.audioUrlFile.addEventListener("input",this._onLinkPreview.bind(i.preview,i,t.options.linkProtocol)),e.dialog.modal.appendChild(n),e.element.relative.appendChild(l),n=null,l=null},setDialog:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");n.className="se-dialog-content",n.style.display="none";let l='<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" aria-label="Close" title="'+i.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+i.dialogBox.audioBox.title+'</span></div><div class="se-dialog-body">';return e.audioFileInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.audioBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_audio_files" type="file" accept="'+e.audioAccept+'"'+(e.audioMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+i.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.audioUrlInput&&(l+='<div class="se-dialog-form"><label>'+i.dialogBox.audioBox.url+'</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'),l+='</div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},setController:function(t){const e=t.lang,i=t.icons,n=t.util.createElement("DIV");return n.className="se-controller se-controller-link",n.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-tooltip">'+i.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-tooltip">'+i.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",n},_fileInputChange:function(){this.audioInputFile.value?(this.audioUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.audioUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_createAudioTag:function(){const t=this.util.createElement("AUDIO");this.plugins.audio._setTagAttrs.call(this,t);const e=this.context.audio._origin_w,i=this.context.audio._origin_h;return t.setAttribute("origin-size",e+","+i),t.style.cssText=(e?"width:"+e+"; ":"")+(i?"height:"+i+";":""),t},_setTagAttrs:function(t){t.setAttribute("controls",!0);const e=this.options.audioTagAttrs;if(e)for(let i in e)this.util.hasOwn(e,i)&&t.setAttribute(i,e[i])},_onLinkPreview:function(t,e,i){const n=i.target.value.trim();t._linkValue=this.textContent=n?e&&-1===n.indexOf("://")&&0!==n.indexOf("#")?e+n:-1===n.indexOf("://")?"/"+n:n:""},fileTags:["audio"],select:function(t){this.plugins.audio.onModifyMode.call(this,t)},destroy:function(t){t=t||this.context.audio._element;const e=this.util.getParentElement(t,this.util.isComponent)||t,i=1*t.getAttribute("data-index"),n=e.previousElementSibling||e.nextElementSibling,l=e.parentNode;this.util.removeItem(e),this.plugins.audio.init.call(this),this.controllersOff(),l!==this.context.element.wysiwyg&&this.util.removeItemAllParents(l,(function(t){return 0===t.childNodes.length}),null),this.focusEdge(n),this.plugins.fileManager.deleteInfo.call(this,"audio",i,this.functions.onAudioUpload),this.history.push(!1)},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"audio",["audio"],this.functions.onAudioUpload,this.plugins.audio.updateCover.bind(this),!1)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"audio",this.functions.onAudioUpload)},on:function(t){const e=this.context.audio;t?e._element?(this.context.dialog.updateModal=!0,e._linkValue=e.preview.textContent=e.audioUrlFile.value=e._element.src,e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.removeAttribute("multiple")):e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.removeAttribute("multiple"):(this.plugins.audio.init.call(this),e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.setAttribute("multiple","multiple"))},open:function(){this.plugins.dialog.open.call(this,"audio","audio"===this.currentControllerName)},submit:function(t){const e=this.context.audio;t.preventDefault(),t.stopPropagation();try{e.audioInputFile&&e.audioInputFile.files.length>0?(this.showLoading(),this.plugins.audio.submitAction.call(this,e.audioInputFile.files)):e.audioUrlFile&&e._linkValue.length>0&&(this.showLoading(),this.plugins.audio.setupUrl.call(this,e._linkValue))}catch(t){throw this.closeLoading(),Error('[SUNEDITOR.audio.submit.fail] cause : "'+t.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(0===t.length)return;let e=0,i=[];for(let n=0,l=t.length;n<l;n++)/audio/i.test(t[n].type)&&(i.push(t[n]),e+=t[n].size);const n=this.options.audioUploadSizeLimit;if(n>0){let t=0;const i=this.context.audio._infoList;for(let e=0,n=i.length;e<n;e++)t+=1*i[e].size;if(e+t>n){this.closeLoading();const i="[SUNEDITOR.audioUpload.fail] Size of uploadable total audios: "+n/1e3+"KB";return void(("function"!=typeof this.functions.onAudioUploadError||this.functions.onAudioUploadError(i,{limitSize:n,currentSize:t,uploadSize:e},this))&&this.functions.noticeOpen(i))}}const l=this.context.audio;l._uploadFileLength=i.length;const s={isUpdate:this.context.dialog.updateModal,element:l._element};if("function"==typeof this.functions.onAudioUploadBefore){const t=this.functions.onAudioUploadBefore(i,s,this,function(t){t&&this._w.Array.isArray(t.result)?this.plugins.audio.register.call(this,s,t):this.plugins.audio.upload.call(this,s,t)}.bind(this));if(void 0===t)return;if(!t)return void this.closeLoading();"object"==typeof t&&t.length>0&&(i=t)}this.plugins.audio.upload.call(this,s,i)},error:function(t,e){if(this.closeLoading(),"function"!=typeof this.functions.onAudioUploadError||this.functions.onAudioUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.audio.exception] response: "+t)},upload:function(t,e){if(!e)return void this.closeLoading();if("string"==typeof e)return void this.plugins.audio.error.call(this,e,null);const i=this.options.audioUploadUrl,n=this.context.dialog.updateModal?1:e.length,l=new FormData;for(let t=0;t<n;t++)l.append("file-"+t,e[t]);this.plugins.fileManager.upload.call(this,i,this.options.audioUploadHeader,l,this.plugins.audio.callBack_upload.bind(this,t),this.functions.onAudioUploadError)},callBack_upload:function(t,e){if("function"==typeof this.functions.audioUploadHandler)this.functions.audioUploadHandler(e,t,this);else{const i=JSON.parse(e.responseText);i.errorMessage?this.plugins.audio.error.call(this,i.errorMessage,i):this.plugins.audio.register.call(this,t,i)}},register:function(t,e){const i=e.result;for(let e,n,l=0,s=i.length;l<s;l++)n=t.isUpdate?t.element:this.plugins.audio._createAudioTag.call(this),e={name:i[l].name,size:i[l].size},this.plugins.audio.create_audio.call(this,n,i[l].url,e,t.isUpdate);this.closeLoading()},setupUrl:function(t){try{if(0===t.length)return!1;this.plugins.audio.create_audio.call(this,this.plugins.audio._createAudioTag.call(this),t,null,this.context.dialog.updateModal)}catch(t){throw Error('[SUNEDITOR.audio.audio.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}},create_audio:function(t,e,i,n){const l=this.context.audio;if(n){if(l._element&&(t=l._element),!t||t.src===e)return void this.selectComponent(t,"audio");t.src=e,this.selectComponent(t,"audio")}else{t.src=e;const i=this.plugins.component.set_cover.call(this,t),n=this.plugins.component.set_container.call(this,i,"");if(!this.insertComponent(n,!1,!0,!this.options.mediaAutoSelect))return void this.focus();if(!this.options.mediaAutoSelect){const t=this.appendFormatTag(n,null);t&&this.setRange(t,0,t,0)}}this.plugins.fileManager.setInfo.call(this,"audio",t,this.functions.onAudioUpload,i,!1),n&&this.history.push(!1)},updateCover:function(t){const e=this.context.audio;this.plugins.audio._setTagAttrs.call(this,t);const i=this.util.isRangeFormatElement(t.parentNode)||this.util.isWysiwygDiv(t.parentNode)?t:this.util.getFormatElement(t)||t,n=t;e._element=t=t.cloneNode(!1);const l=this.plugins.component.set_cover.call(this,t),s=this.plugins.component.set_container.call(this,l,"se-audio-container");try{this.util.isListCell(i)||this.util.isFormatElement(i)?n.parentNode.replaceChild(s,n):this.util.isFormatElement(i)&&i.childNodes.length>0?(i.parentNode.insertBefore(s,i),this.util.removeItem(n),this.util.removeEmptyNode(i,null),0===i.children.length&&(i.innerHTML=this.util.htmlRemoveWhiteSpace(i.innerHTML))):i.parentNode.replaceChild(s,i)}catch(t){console.warn("[SUNEDITOR.audio.error] Maybe the audio tag is nested.",t)}this.plugins.fileManager.setInfo.call(this,"audio",t,this.functions.onAudioUpload,null,!1),this.plugins.audio.init.call(this)},onModifyMode:function(t){const e=this.context.audio;this.setControllerPosition(e.controller,t,"bottom",{left:0,top:0}),this.controllersOn(e.controller,t,this.plugins.audio.onControllerOff.bind(this,t),"audio"),this.util.addClass(t,"active"),e._element=t,e._cover=this.util.getParentElement(t,"FIGURE"),e._container=this.util.getParentElement(t,this.util.isComponent)},openModify:function(t){if(this.context.audio.audioUrlFile){const t=this.context.audio;t._linkValue=t.preview.textContent=t.audioUrlFile.value=t._element.src}t||this.plugins.dialog.open.call(this,"audio",!0)},onClick_controller:function(t){t.stopPropagation();const e=t.target.getAttribute("data-command");e&&(t.preventDefault(),/update/.test(e)?this.plugins.audio.openModify.call(this,!1):this.plugins.audio.destroy.call(this,this.context.audio._element),this.controllersOff())},onControllerOff:function(t){this.util.removeClass(t,"active"),this.context.audio.controller.style.display="none"},init:function(){if(this.context.dialog.updateModal)return;const t=this.context.audio;t.audioInputFile&&(t.audioInputFile.value=""),t.audioUrlFile&&(t._linkValue=t.preview.textContent=t.audioUrlFile.value=""),t.audioInputFile&&t.audioUrlFile&&(t.audioUrlFile.removeAttribute("disabled"),t.preview.style.textDecoration=""),t._element=null}},x={name:"math",display:"dialog",add:function(t){t.addModule([r()]);const e=t.context;e.math={focusElement:null,previewElement:null,fontSizeElement:null,defaultFontSize:"",_mathExp:null};let i=this.setDialog(t);e.math.modal=i,e.math.focusElement=i.querySelector(".se-math-exp"),e.math.previewElement=i.querySelector(".se-math-preview"),e.math.fontSizeElement=i.querySelector(".se-math-size"),e.math.focusElement.addEventListener(t.util.isIE?"textinput":"input",this._renderMathExp.bind(t,e.math),!1),e.math.fontSizeElement.addEventListener("change",function(t){this.fontSize=t.target.value}.bind(e.math.previewElement.style),!1);let n=this.setController_MathButton(t);e.math.mathController=n,e.math._mathExp=null,i.querySelector("form").addEventListener("submit",this.submit.bind(t),!1),n.addEventListener("click",this.onClick_mathController.bind(t)),e.math.previewElement.style.fontSize=e.math.defaultFontSize,e.dialog.modal.appendChild(i),e.element.relative.appendChild(n),i=null,n=null},setDialog:function(t){const e=t.lang,i=t.util.createElement("DIV"),n=t.options.mathFontSize;let l=n[0].value;i.className="se-dialog-content",i.style.display="none";let s='<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" aria-label="Close" title="'+e.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+e.dialogBox.mathBox.title+'</span></div><div class="se-dialog-body"><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.inputLabel+' (<a href="https://katex.org/docs/supported.html" target="_blank">KaTeX</a>)</label><textarea class="se-input-form se-math-exp" type="text"></textarea></div><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.fontSizeLabel+'</label><select class="se-input-select se-math-size">';for(let t,e=0,i=n.length;e<i;e++)t=n[e],t.default&&(l=t.value),s+='<option value="'+t.value+'"'+(t.default?" selected":"")+">"+t.text+"</option>";return s+='</select></div><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.previewLabel+'</label><p class="se-math-preview"></p></div></div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+e.dialogBox.submitButton+'"><span>'+e.dialogBox.submitButton+"</span></button></div></form>",t.context.math.defaultFontSize=l,i.innerHTML=s,i},setController_MathButton:function(t){const e=t.lang,i=t.util.createElement("DIV");return i.className="se-controller se-controller-link",i.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">'+t.icons.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">'+t.icons.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",i},open:function(){this.plugins.dialog.open.call(this,"math","math"===this.currentControllerName)},managedTags:function(){return{className:"katex",method:function(t){if(!t.getAttribute("data-exp")||!this.options.katex)return;const e=this._d.createRange().createContextualFragment(this.plugins.math._renderer.call(this,this.util.HTMLDecoder(t.getAttribute("data-exp"))));t.innerHTML=e.querySelector(".katex").innerHTML}}},_renderer:function(t){return this.options.katex.src.renderToString(t,{throwOnError:!0,displayMode:!0})},_renderMathExp:function(t,e){t.previewElement.innerHTML=this.plugins.math._renderer.call(this,e.target.value)},submit:function(t){this.showLoading(),t.preventDefault(),t.stopPropagation();const e=function(){if(0===this.context.math.focusElement.value.trim().length)return!1;const t=this.context.math,e=t.focusElement.value,i=t.previewElement.querySelector(".katex");if(!i)return!1;if(i.className="__se__katex "+i.className,i.setAttribute("contenteditable",!1),i.setAttribute("data-exp",this.util.HTMLEncoder(e)),i.setAttribute("data-font-size",t.fontSizeElement.value),i.style.fontSize=t.fontSizeElement.value,this.context.dialog.updateModal){const e=this.util.getParentElement(t._mathExp,".katex");e.parentNode.replaceChild(i,e),this.setRange(i,0,i,1)}else{const t=this.getSelectedElements();if(t.length>1){const e=this.util.createElement(t[0].nodeName);if(e.appendChild(i),!this.insertNode(e,null,!0))return!1}else if(!this.insertNode(i,null,!0))return!1;const e=this.util.createTextNode(this.util.zeroWidthSpace);i.parentNode.insertBefore(e,i.nextSibling),this.setRange(i,0,i,1)}return t.focusElement.value="",t.fontSizeElement.value="1em",t.previewElement.style.fontSize="1em",t.previewElement.innerHTML="",!0}.bind(this);try{e()&&(this.plugins.dialog.close.call(this),this.history.push(!1))}catch(t){this.plugins.dialog.close.call(this)}finally{this.closeLoading()}return!1},active:function(t){if(t){if(t.getAttribute("data-exp"))return this.controllerArray.indexOf(this.context.math.mathController)<0&&(this.setRange(t,0,t,1),this.plugins.math.call_controller.call(this,t)),!0}else this.controllerArray.indexOf(this.context.math.mathController)>-1&&this.controllersOff();return!1},on:function(t){if(t){const t=this.context.math;if(t._mathExp){const e=this.util.HTMLDecoder(t._mathExp.getAttribute("data-exp")),i=t._mathExp.getAttribute("data-font-size")||"1em";this.context.dialog.updateModal=!0,t.focusElement.value=e,t.fontSizeElement.value=i,t.previewElement.innerHTML=this.plugins.math._renderer.call(this,e),t.previewElement.style.fontSize=i}}else this.plugins.math.init.call(this)},call_controller:function(t){this.context.math._mathExp=t;const e=this.context.math.mathController;this.setControllerPosition(e,t,"bottom",{left:0,top:0}),this.controllersOn(e,t,"math")},onClick_mathController:function(t){t.stopPropagation();const e=t.target.getAttribute("data-command")||t.target.parentNode.getAttribute("data-command");e&&(t.preventDefault(),/update/.test(e)?(this.context.math.focusElement.value=this.util.HTMLDecoder(this.context.math._mathExp.getAttribute("data-exp")),this.plugins.dialog.open.call(this,"math",!0)):(this.util.removeItem(this.context.math._mathExp),this.context.math._mathExp=null,this.focus(),this.history.push(!1)),this.controllersOff())},init:function(){const t=this.context.math;t.mathController.style.display="none",t._mathExp=null,t.focusElement.value="",t.previewElement.innerHTML=""}};var w=i(1665),C=i.n(w);const k={blockquote:{name:"blockquote",display:"command",add:function(t,e){t.context.blockquote={targetButton:e,tag:t.util.createElement("BLOCKQUOTE")}},active:function(t){if(t){if(/blockquote/i.test(t.nodeName))return this.util.addClass(this.context.blockquote.targetButton,"active"),!0}else this.util.removeClass(this.context.blockquote.targetButton,"active");return!1},action:function(){const t=this.util.getParentElement(this.getSelectionNode(),"blockquote");t?this.detachRangeFormatElement(t,null,null,!1,!1):this.applyRangeFormatElement(this.context.blockquote.tag.cloneNode(!1))}},align:{name:"align",display:"submenu",add:function(t,e){const i=t.icons,n=t.context;n.align={targetButton:e,_itemMenu:null,_alignList:null,currentAlign:"",defaultDir:t.options.rtl?"right":"left",icons:{justify:i.align_justify,left:i.align_left,right:i.align_right,center:i.align_center}};let l=this.setSubmenu(t),s=n.align._itemMenu=l.querySelector("ul");s.addEventListener("click",this.pickup.bind(t)),n.align._alignList=s.querySelectorAll("li button"),t.initMenuTarget(this.name,e,l),l=null,s=null},setSubmenu:function(t){const e=t.lang,i=t.icons,n=t.util.createElement("DIV"),l=t.options.alignItems;let s="";for(let t,n,o=0;o<l.length;o++)t=l[o],n=e.toolbar["align"+t.charAt(0).toUpperCase()+t.slice(1)],s+='<li><button type="button" class="se-btn-list se-btn-align" data-value="'+t+'" title="'+n+'"><span class="se-list-icon">'+i["align_"+t]+"</span>"+n+"</button></li>";return n.className="se-submenu se-list-layer se-list-align",n.innerHTML='<div class="se-list-inner"><ul class="se-list-basic">'+s+"</ul></div>",n},active:function(t){const e=this.context.align,i=e.targetButton,n=i.firstElementChild;if(t){if(this.util.isFormatElement(t)){const l=t.style.textAlign;if(l)return this.util.changeElement(n,e.icons[l]||e.icons[e.defaultDir]),i.setAttribute("data-focus",l),!0}}else this.util.changeElement(n,e.icons[e.defaultDir]),i.removeAttribute("data-focus");return!1},on:function(){const t=this.context.align,e=t._alignList,i=t.targetButton.getAttribute("data-focus")||t.defaultDir;if(i!==t.currentAlign){for(let t=0,n=e.length;t<n;t++)i===e[t].getAttribute("data-value")?this.util.addClass(e[t],"active"):this.util.removeClass(e[t],"active");t.currentAlign=i}},exchangeDir:function(){const t=this.options.rtl?"right":"left";if(!this.context.align||this.context.align.defaultDir===t)return;this.context.align.defaultDir=t;let e=this.context.align._itemMenu,i=e.querySelector('[data-value="left"]'),n=e.querySelector('[data-value="right"]');if(i&&n){const t=i.parentElement,e=n.parentElement;t.appendChild(n),e.appendChild(i)}},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i=null;for(;!i&&!/UL/i.test(e.tagName);)i=e.getAttribute("data-value"),e=e.parentNode;if(!i)return;const n=this.context.align.defaultDir,l=this.getSelectedElements();for(let t=0,e=l.length;t<e;t++)this.util.setStyle(l[t],"textAlign",i===n?"":i);this.effectNode=null,this.submenuOff(),this.focus(),this.history.push(!1)}},font:{name:"font",display:"submenu",add:function(t,e){const i=t.context;i.font={targetText:e.querySelector(".txt"),targetTooltip:e.parentNode.querySelector(".se-tooltip-text"),_fontList:null,currentFont:""};let n=this.setSubmenu(t);n.querySelector(".se-list-inner").addEventListener("click",this.pickup.bind(t)),i.font._fontList=n.querySelectorAll("ul li button"),t.initMenuTarget(this.name,e,n),n=null},setSubmenu:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");let l,s,o,a;n.className="se-submenu se-list-layer se-list-font-family";let r=e.font?e.font:["Arial","Comic Sans MS","Courier New","Impact","Georgia","tahoma","Trebuchet MS","Verdana"],c='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(o=0,a=r.length;o<a;o++)l=r[o],s=l.split(",")[0],c+='<li><button type="button" class="se-btn-list" data-value="'+l+'" data-txt="'+s+'" title="'+s+'" style="font-family:'+l+';">'+s+"</button></li>";return c+="</ul></div>",n.innerHTML=c,n},active:function(t){const e=this.context.font.targetText,i=this.context.font.targetTooltip;if(t){if(t.style&&t.style.fontFamily.length>0){const n=t.style.fontFamily.replace(/["']/g,"");return this.util.changeTxt(e,n),this.util.changeTxt(i,this.lang.toolbar.font+" ("+n+")"),!0}}else{const t=this.hasFocus?this.wwComputedStyle.fontFamily:this.lang.toolbar.font;this.util.changeTxt(e,t),this.util.changeTxt(i,this.hasFocus?this.lang.toolbar.font+(t?" ("+t+")":""):t)}return!1},on:function(){const t=this.context.font,e=t._fontList,i=t.targetText.textContent;if(i!==t.currentFont){for(let t=0,n=e.length;t<n;t++)i===e[t].getAttribute("data-value")?this.util.addClass(e[t],"active"):this.util.removeClass(e[t],"active");t.currentFont=i}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();const e=t.target.getAttribute("data-value");if(e){const t=this.util.createElement("SPAN");t.style.fontFamily=e,this.nodeChange(t,["font-family"],null,null)}else this.nodeChange(null,["font-family"],["span"],!0);this.submenuOff()}},fontSize:{name:"fontSize",display:"submenu",add:function(t,e){const i=t.context;i.fontSize={targetText:e.querySelector(".txt"),_sizeList:null,currentSize:""};let n=this.setSubmenu(t),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(t)),i.fontSize._sizeList=l.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null,l=null},setSubmenu:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");n.className="se-submenu se-list-layer se-list-font-size";const l=e.fontSize?e.fontSize:[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72];let s='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(let t,i=0,n=e.fontSizeUnit,o=l.length;i<o;i++)t=l[i],s+='<li><button type="button" class="se-btn-list" data-value="'+t+n+'" title="'+t+n+'" style="font-size:'+t+n+';">'+t+"</button></li>";return s+="</ul></div>",n.innerHTML=s,n},active:function(t){if(t){if(t.style&&t.style.fontSize.length>0)return this.util.changeTxt(this.context.fontSize.targetText,t.style.fontSize),!0}else this.util.changeTxt(this.context.fontSize.targetText,this.hasFocus?this.options.__defaultFontSize||this.wwComputedStyle.fontSize:this.lang.toolbar.fontSize);return!1},on:function(){const t=this.context.fontSize,e=t._sizeList,i=t.targetText.textContent;if(i!==t.currentSize){for(let t=0,n=e.length;t<n;t++)i===e[t].getAttribute("data-value")?this.util.addClass(e[t],"active"):this.util.removeClass(e[t],"active");t.currentSize=i}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();const e=t.target.getAttribute("data-value");if(e){const t=this.util.createElement("SPAN");t.style.fontSize=e,this.nodeChange(t,["font-size"],null,null)}else this.nodeChange(null,["font-size"],["span"],!0);this.submenuOff()}},fontColor:l,hiliteColor:s,horizontalRule:{name:"horizontalRule",display:"submenu",add:function(t,e){t.context.horizontalRule={currentHR:null};let i=this.setSubmenu(t);i.querySelector("ul").addEventListener("click",this.horizontalRulePick.bind(t)),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){const e=t.lang,i=t.util.createElement("DIV"),n=t.options.hrItems||[{name:e.toolbar.hr_solid,class:"__se__solid"},{name:e.toolbar.hr_dashed,class:"__se__dashed"},{name:e.toolbar.hr_dotted,class:"__se__dotted"}];let l="";for(let t=0,e=n.length;t<e;t++)l+='<li><button type="button" class="se-btn-list btn_line" data-command="horizontalRule" data-value="'+n[t].class+'" title="'+n[t].name+'"><hr'+(n[t].class?' class="'+n[t].class+'"':"")+(n[t].style?' style="'+n[t].style+'"':"")+"/></button></li>";return i.className="se-submenu se-list-layer se-list-line",i.innerHTML='<div class="se-list-inner"><ul class="se-list-basic">'+l+"</ul></div>",i},active:function(t){if(t){if(/HR/i.test(t.nodeName))return this.context.horizontalRule.currentHR=t,this.util.hasClass(t,"on")||(this.util.addClass(t,"on"),this.controllersOn("hr",this.util.removeClass.bind(this.util,t,"on"))),!0}else this.util.hasClass(this.context.horizontalRule.currentHR,"on")&&this.controllersOff();return!1},appendHr:function(t){return this.focus(),this.insertComponent(t.cloneNode(!1),!1,!0,!1)},horizontalRulePick:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i=e.getAttribute("data-command");for(;!i&&!/UL/i.test(e.tagName);)e=e.parentNode,i=e.getAttribute("data-command");if(!i)return;const n=this.plugins.horizontalRule.appendHr.call(this,e.firstElementChild);n&&(this.setRange(n,0,n,0),this.submenuOff())}},list:{name:"list",display:"submenu",add:function(t,e){const i=t.context;i.list={targetButton:e,_list:null,currentList:"",icons:{bullets:t.icons.list_bullets,number:t.icons.list_number}};let n=this.setSubmenu(t),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(t)),i.list._list=l.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null,l=null},setSubmenu:function(t){const e=t.lang,i=t.util.createElement("DIV");return i.className="se-submenu se-list-layer",i.innerHTML='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="OL" title="'+e.toolbar.orderList+'">'+t.icons.list_number+'</button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="UL" title="'+e.toolbar.unorderList+'">'+t.icons.list_bullets+"</button></li></ul></div>",i},active:function(t){const e=this.context.list.targetButton,i=e.firstElementChild,n=this.util;if(n.isList(t)){const l=t.nodeName;return e.setAttribute("data-focus",l),n.addClass(e,"active"),/UL/i.test(l)?n.changeElement(i,this.context.list.icons.bullets):n.changeElement(i,this.context.list.icons.number),!0}return e.removeAttribute("data-focus"),n.changeElement(i,this.context.list.icons.number),n.removeClass(e,"active"),!1},on:function(){const t=this.context.list,e=t._list,i=t.targetButton.getAttribute("data-focus")||"";if(i!==t.currentList){for(let t=0,n=e.length;t<n;t++)i===e[t].getAttribute("data-command")?this.util.addClass(e[t],"active"):this.util.removeClass(e[t],"active");t.currentList=i}},editList:function(t,e,i){let n=this.getRange(),l=e||this.getSelectedElementsAndComponents(!1);if(0===l.length){if(e)return;if(n=this.getRange_addLine(n,null),l=this.getSelectedElementsAndComponents(!1),0===l.length)return}const s=this.util;s.sortByDepth(l,!0);let o=l[0],a=l[l.length-1],r=!s.isListCell(o)&&!s.isComponent(o)||o.previousElementSibling?o.previousElementSibling:o.parentNode.previousElementSibling,c=!s.isListCell(a)&&!s.isComponent(a)||a.nextElementSibling?a.nextElementSibling:a.parentNode.nextElementSibling;const u={sc:n.startContainer,so:n.startContainer===n.endContainer&&s.onlyZeroWidthSpace(n.startContainer)&&0===n.startOffset&&1===n.endOffset?n.endOffset:n.startOffset,ec:n.endContainer,eo:n.endOffset};let d=!0;for(let t=0,e=l.length;t<e;t++)if(!s.isList(s.getRangeFormatElement(l[t],function(e){return this.getRangeFormatElement(e)&&e!==l[t]}.bind(s)))){d=!1;break}if(!d||r&&o.tagName===r.tagName&&t===r.tagName.toUpperCase()||c&&a.tagName===c.tagName&&t===c.tagName.toUpperCase()){const e=r?r.parentNode:r,i=c?c.parentNode:c;r=e&&!s.isWysiwygDiv(e)&&e.nodeName===t?e:r,c=i&&!s.isWysiwygDiv(i)&&i.nodeName===t?i:c;const n=r&&r.tagName===t,o=c&&c.tagName===t;let a=n?r:s.createElement(t),d=null,h=null,p=null,g=null;const m=function(t){return!this.isComponent(t)&&!this.isList(t)}.bind(s);for(let e,i,o,r,c,g,f,_,b,v=0,y=l.length;v<y;v++)if(i=l[v],0!==i.childNodes.length||s._isIgnoreNodeChange(i)){if(r=l[v+1],c=i.parentNode,g=r?r.parentNode:null,o=s.isListCell(i),b=s.isRangeFormatElement(c)?c:null,f=o&&!s.isWysiwygDiv(c)?c.parentNode:c,_=o&&!s.isWysiwygDiv(c)?!r||s.isListCell(f)?c:c.nextSibling:i.nextSibling,e=s.createElement("LI"),s.copyFormatAttributes(e,i),0===v&&u.sc===i&&(u.sc=e),v===y-1&&u.ec===i&&(u.ec=e),s.isComponent(i)){const t=/^HR$/i.test(i.nodeName);t||(e.innerHTML="<br>"),e.innerHTML+=i.outerHTML,t&&(e.innerHTML+="<br>")}else{const t=i.childNodes;for(;t[0];)e.appendChild(t[0])}a.appendChild(e),r||(h=a),r&&f===g&&!s.isRangeFormatElement(_)||(d||(d=a),n&&r&&f===g||r&&s.isList(g)&&g===c||a.parentNode!==f&&f.insertBefore(a,_)),s.removeItem(i),n&&null===p&&(p=a.children.length-1),r&&(s.getRangeFormatElement(g,m)!==s.getRangeFormatElement(c,m)||s.isList(g)&&s.isList(c)&&s.getElementDepth(g)!==s.getElementDepth(c))&&(a=s.createElement(t)),b&&0===b.children.length&&s.removeItem(b)}else s.removeItem(i);p&&(d=d.children[p]),o&&(g=a.children.length-1,a.innerHTML+=c.innerHTML,h=a.children[g],s.removeItem(c))}else{if(i)for(let t=0,e=l.length;t<e;t++)for(let i=t-1;i>=0;i--)if(l[i].contains(l[t])){l.splice(t,1),t--,e--;break}const e=s.getRangeFormatElement(o),n=e&&e.tagName===t;let a,r;const c=function(t){return!this.isComponent(t)}.bind(s);n||(r=s.createElement(t));for(let e,o,u=0,d=l.length;u<d;u++)o=s.getRangeFormatElement(l[u],c),o&&s.isList(o)&&(e?e!==o?(i&&s.isListCell(o.parentNode)?this.plugins.list._detachNested.call(this,a.f):this.detachRangeFormatElement(a.f[0].parentNode,a.f,r,!1,!0),o=l[u].parentNode,n||(r=s.createElement(t)),e=o,a={r:e,f:[s.getParentElement(l[u],"LI")]}):a.f.push(s.getParentElement(l[u],"LI")):(e=o,a={r:e,f:[s.getParentElement(l[u],"LI")]}),u===d-1&&(i&&s.isListCell(o.parentNode)?this.plugins.list._detachNested.call(this,a.f):this.detachRangeFormatElement(a.f[0].parentNode,a.f,r,!1,!0)))}return this.effectNode=null,u},_detachNested:function(t){const e=t[0],i=t[t.length-1],n=i.nextElementSibling,l=e.parentNode,s=l.parentNode.nextElementSibling,o=l.parentNode.parentNode;for(let e=0,i=t.length;e<i;e++)o.insertBefore(t[e],s);if(n&&l.children.length>0){const t=l.cloneNode(!1),e=l.childNodes,s=this.util.getPositionIndex(n);for(;e[s];)t.appendChild(e[s]);i.appendChild(t)}0===l.children.length&&this.util.removeItem(l),this.util.mergeSameTags(o);const a=this.util.getEdgeChildNodes(e,i);return{cc:e.parentNode,sc:a.sc,ec:a.ec}},editInsideList:function(t,e){const i=(e=e||this.getSelectedElements().filter(function(t){return this.isListCell(t)}.bind(this.util))).length;if(0===i||!t&&!this.util.isListCell(e[0].previousElementSibling)&&!this.util.isListCell(e[i-1].nextElementSibling))return{sc:e[0],so:0,ec:e[i-1],eo:1};let n=e[0].parentNode,l=e[i-1],s=null;if(t){if(n!==l.parentNode&&this.util.isList(l.parentNode.parentNode)&&l.nextElementSibling)for(l=l.nextElementSibling;l;)e.push(l),l=l.nextElementSibling;s=this.plugins.list.editList.call(this,n.nodeName.toUpperCase(),e,!0)}else{let t=this.util.createElement(n.nodeName),o=e[0].previousElementSibling,a=l.nextElementSibling;const r={s:null,e:null,sl:n,el:n};for(let l,s=0,c=i;s<c;s++)l=e[s],l.parentNode!==n&&(this.plugins.list._insiedList.call(this,n,t,o,a,r),n=l.parentNode,t=this.util.createElement(n.nodeName)),o=l.previousElementSibling,a=l.nextElementSibling,t.appendChild(l);this.plugins.list._insiedList.call(this,n,t,o,a,r);const c=this.util.getNodeFromPath(r.s,r.sl),u=this.util.getNodeFromPath(r.e,r.el);s={sc:c,so:0,ec:u,eo:u.textContent.length}}return s},_insiedList:function(t,e,i,n,l){let s=!1;if(i&&e.tagName===i.tagName){const t=e.children;for(;t[0];)i.appendChild(t[0]);e=i,s=!0}if(n&&e.tagName===n.tagName){const t=n.children;for(;t[0];)e.appendChild(t[0]);const i=n.nextElementSibling;n.parentNode.removeChild(n),n=i}if(!s){this.util.isListCell(i)&&(t=i,n=null),t.insertBefore(e,n),l.s||(l.s=this.util.getNodePath(e.firstElementChild.firstChild,t,null),l.sl=t);const s=t.contains(l.sl)?this.util.getNodePath(l.sl,t):null;l.e=this.util.getNodePath(e.lastElementChild.firstChild,t,null),l.el=t,this.util.mergeSameTags(t,[l.s,l.e,s],!1),this.util.mergeNestedTags(t),s&&(l.sl=this.util.getNodeFromPath(s,t))}return e},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i="";for(;!i&&!/^UL$/i.test(e.tagName);)i=e.getAttribute("data-command"),e=e.parentNode;if(!i)return;const n=this.plugins.list.editList.call(this,i,null,!1);n&&this.setRange(n.sc,n.so,n.ec,n.eo),this.submenuOff(),this.history.push(!1)}},table:{name:"table",display:"submenu",add:function(t,e){const i=t.context;let n=i.table={_element:null,_tdElement:null,_trElement:null,_trElements:null,_tableXY:[],_maxWidth:!0,_fixedColumn:!1,_rtl:t.options.rtl,cellControllerTop:"top"===t.options.tableCellControllerPosition,resizeText:null,headerButton:null,mergeButton:null,splitButton:null,splitMenu:null,maxText:t.lang.controller.maxSize,minText:t.lang.controller.minSize,_physical_cellCnt:0,_logical_cellCnt:0,_rowCnt:0,_rowIndex:0,_physical_cellIndex:0,_logical_cellIndex:0,_current_colSpan:0,_current_rowSpan:0,icons:{expansion:t.icons.expansion,reduction:t.icons.reduction}},l=this.setSubmenu(t),s=l.querySelector(".se-controller-table-picker");n.tableHighlight=l.querySelector(".se-table-size-highlighted"),n.tableUnHighlight=l.querySelector(".se-table-size-unhighlighted"),n.tableDisplay=l.querySelector(".se-table-size-display"),t.options.rtl&&(n.tableHighlight.style.left="167px");let o=this.setController_table(t);n.tableController=o,n.resizeButton=o.querySelector("._se_table_resize"),n.resizeText=o.querySelector("._se_table_resize > span > span"),n.columnFixedButton=o.querySelector("._se_table_fixed_column"),n.headerButton=o.querySelector("._se_table_header");let a=this.setController_tableEditor(t,n.cellControllerTop);n.resizeDiv=a,n.splitMenu=a.querySelector(".se-btn-group-sub"),n.mergeButton=a.querySelector("._se_table_merge_button"),n.splitButton=a.querySelector("._se_table_split_button"),n.insertRowAboveButton=a.querySelector("._se_table_insert_row_a"),n.insertRowBelowButton=a.querySelector("._se_table_insert_row_b"),s.addEventListener("mousemove",this.onMouseMove_tablePicker.bind(t,n)),s.addEventListener("click",this.appendTable.bind(t)),a.addEventListener("click",this.onClick_tableController.bind(t)),o.addEventListener("click",this.onClick_tableController.bind(t)),t.initMenuTarget(this.name,e,l),i.element.relative.appendChild(a),i.element.relative.appendChild(o),l=null,s=null,a=null,o=null,n=null},setSubmenu:function(t){const e=t.util.createElement("DIV");return e.className="se-submenu se-selector-table",e.innerHTML='<div class="se-table-size"><div class="se-table-size-picker se-controller-table-picker"></div><div class="se-table-size-highlighted"></div><div class="se-table-size-unhighlighted"></div></div><div class="se-table-size-display">1 x 1</div>',e},setController_table:function(t){const e=t.lang,i=t.icons,n=t.util.createElement("DIV");return n.className="se-controller se-controller-table",n.innerHTML='<div><div class="se-btn-group"><button type="button" data-command="resize" class="se-btn se-tooltip _se_table_resize">'+i.expansion+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.maxSize+'</span></span></button><button type="button" data-command="layout" class="se-btn se-tooltip _se_table_fixed_column">'+i.fixed_column_width+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.fixedColumnWidth+'</span></span></button><button type="button" data-command="header" class="se-btn se-tooltip _se_table_header">'+i.table_header+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.tableHeader+'</span></span></button><button type="button" data-command="remove" class="se-btn se-tooltip">'+i.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",n},setController_tableEditor:function(t,e){const i=t.lang,n=t.icons,l=t.util.createElement("DIV");return l.className="se-controller se-controller-table-cell",l.innerHTML=(e?"":'<div class="se-arrow se-arrow-up"></div>')+'<div class="se-btn-group"><button type="button" data-command="insert" data-value="row" data-option="up" class="se-btn se-tooltip _se_table_insert_row_a">'+n.insert_row_above+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.insertRowAbove+'</span></span></button><button type="button" data-command="insert" data-value="row" data-option="down" class="se-btn se-tooltip _se_table_insert_row_b">'+n.insert_row_below+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.insertRowBelow+'</span></span></button><button type="button" data-command="delete" data-value="row" class="se-btn se-tooltip">'+n.delete_row+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.deleteRow+'</span></span></button><button type="button" data-command="merge" class="_se_table_merge_button se-btn se-tooltip" disabled>'+n.merge_cell+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.mergeCells+'</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="insert" data-value="cell" data-option="left" class="se-btn se-tooltip">'+n.insert_column_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.insertColumnBefore+'</span></span></button><button type="button" data-command="insert" data-value="cell" data-option="right" class="se-btn se-tooltip">'+n.insert_column_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.insertColumnAfter+'</span></span></button><button type="button" data-command="delete" data-value="cell" class="se-btn se-tooltip">'+n.delete_column+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.deleteColumn+'</span></span></button><button type="button" data-command="onsplit" class="_se_table_split_button se-btn se-tooltip">'+n.split_cell+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+i.controller.splitCells+'</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-table-split"><div class="se-list-inner"><ul class="se-list-basic"><li class="se-btn-list" data-command="split" data-value="vertical" style="line-height:32px;" title="'+i.controller.VerticalSplit+'">'+i.controller.VerticalSplit+'</li><li class="se-btn-list" data-command="split" data-value="horizontal" style="line-height:32px;" title="'+i.controller.HorizontalSplit+'">'+i.controller.HorizontalSplit+"</li></ul></div></div></div>",l},appendTable:function(){const t=this.util.createElement("TABLE"),e=this.plugins.table.createCells,i=this.context.table._tableXY[0];let n=this.context.table._tableXY[1],l="<tbody>";for(;n>0;)l+="<tr>"+e.call(this,"td",i)+"</tr>",--n;l+="</tbody>",t.innerHTML=l;if(this.insertComponent(t,!1,!0,!1)){const e=t.querySelector("td div");this.setRange(e,0,e,0),this.plugins.table.reset_table_picker.call(this)}},createCells:function(t,e,i){if(t=t.toLowerCase(),i){const e=this.util.createElement(t);return e.innerHTML="<div><br></div>",e}{let i="";for(;e>0;)i+="<"+t+"><div><br></div></"+t+">",e--;return i}},onMouseMove_tablePicker:function(t,e){e.stopPropagation();let i=this._w.Math.ceil(e.offsetX/18),n=this._w.Math.ceil(e.offsetY/18);i=i<1?1:i,n=n<1?1:n,t._rtl&&(t.tableHighlight.style.left=18*i-13+"px",i=11-i),t.tableHighlight.style.width=i+"em",t.tableHighlight.style.height=n+"em",this.util.changeTxt(t.tableDisplay,i+" x "+n),t._tableXY=[i,n]},reset_table_picker:function(){if(!this.context.table.tableHighlight)return;const t=this.context.table.tableHighlight.style,e=this.context.table.tableUnHighlight.style;t.width="1em",t.height="1em",e.width="10em",e.height="10em",this.util.changeTxt(this.context.table.tableDisplay,"1 x 1"),this.submenuOff()},init:function(){const t=this.context.table,e=this.plugins.table;if(e._removeEvents.call(this),e._selectedTable){const t=e._selectedTable.querySelectorAll(".se-table-selected-cell");for(let e=0,i=t.length;e<i;e++)this.util.removeClass(t[e],"se-table-selected-cell")}e._toggleEditor.call(this,!0),t._element=null,t._tdElement=null,t._trElement=null,t._trElements=null,t._tableXY=[],t._maxWidth=!0,t._fixedColumn=!1,t._physical_cellCnt=0,t._logical_cellCnt=0,t._rowCnt=0,t._rowIndex=0,t._physical_cellIndex=0,t._logical_cellIndex=0,t._current_colSpan=0,t._current_rowSpan=0,e._shift=!1,e._selectedCells=null,e._selectedTable=null,e._ref=null,e._fixedCell=null,e._selectedCell=null,e._fixedCellName=null},call_controller_tableEdit:function(t){const e=this.plugins.table,i=this.context.table;if(!this.getSelection().isCollapsed&&!e._selectedCell)return this.controllersOff(),void this.util.removeClass(t,"se-table-selected-cell");const n=i._element||this.plugins.table._selectedTable||this.util.getParentElement(t,"TABLE");i._maxWidth=this.util.hasClass(n,"se-table-size-100")||"100%"===n.style.width||!n.style.width&&!this.util.hasClass(n,"se-table-size-auto"),i._fixedColumn=this.util.hasClass(n,"se-table-layout-fixed")||"fixed"===n.style.tableLayout,e.setTableStyle.call(this,i._maxWidth?"width|column":"width"),e.setPositionControllerTop.call(this,n),e.setPositionControllerDiv.call(this,t,e._shift),e._shift||this.controllersOn(i.resizeDiv,i.tableController,e.init.bind(this),t,"table")},setPositionControllerTop:function(t){this.setControllerPosition(this.context.table.tableController,t,"top",{left:0,top:0})},setPositionControllerDiv:function(t,e){const i=this.context.table,n=i.resizeDiv;this.plugins.table.setCellInfo.call(this,t,e),i.cellControllerTop?this.setControllerPosition(n,i._element,"top",{left:i.tableController.offsetWidth,top:0}):this.setControllerPosition(n,t,"bottom",{left:0,top:0})},setCellInfo:function(t,e){const i=this.context.table,n=i._element=this.plugins.table._selectedTable||this.util.getParentElement(t,"TABLE");if(/THEAD/i.test(n.firstElementChild.nodeName)?this.util.addClass(i.headerButton,"active"):this.util.removeClass(i.headerButton,"active"),e||0===i._physical_cellCnt){i._tdElement!==t&&(i._tdElement=t,i._trElement=t.parentNode);const e=i._trElements=n.rows,l=t.cellIndex;let s=0;for(let t=0,i=e[0].cells,n=e[0].cells.length;t<n;t++)s+=i[t].colSpan;const o=i._rowIndex=i._trElement.rowIndex;i._rowCnt=e.length,i._physical_cellCnt=i._trElement.cells.length,i._logical_cellCnt=s,i._physical_cellIndex=l,i._current_colSpan=i._tdElement.colSpan-1,i._current_rowSpan,i._trElement.cells[l].rowSpan;let a=[],r=[];for(let t,n,s=0;s<=o;s++){t=e[s].cells,n=0;for(let e,c,u,d,h=0,p=t.length;h<p;h++){if(e=t[h],c=e.colSpan-1,u=e.rowSpan-1,d=h+n,r.length>0)for(let t,e=0;e<r.length;e++)t=r[e],t.row>s||(d>=t.index?(n+=t.cs,d+=t.cs,t.rs-=1,t.row=s+1,t.rs<1&&(r.splice(e,1),e--)):h===p-1&&(t.rs-=1,t.row=s+1,t.rs<1&&(r.splice(e,1),e--)));if(s===o&&h===l){i._logical_cellIndex=d;break}u>0&&a.push({index:d,cs:c+1,rs:u,row:-1}),n+=c}r=r.concat(a).sort((function(t,e){return t.index-e.index})),a=[]}a=null,r=null}},editTable:function(t,e){const i=this.plugins.table,n=this.context.table,l=n._element,s="row"===t;if(s){const t=n._trElement.parentNode;if(/^THEAD$/i.test(t.nodeName)){if("up"===e)return;if(!t.nextElementSibling||!/^TBODY$/i.test(t.nextElementSibling.nodeName))return void(l.innerHTML+="<tbody><tr>"+i.createCells.call(this,"td",n._logical_cellCnt,!1)+"</tr></tbody>")}}if(i._ref){const t=n._tdElement,l=i._selectedCells;if(s)if(e)i.setCellInfo.call(this,"up"===e?l[0]:l[l.length-1],!0),i.editRow.call(this,e,t);else{let t=l[0].parentNode;const n=[l[0]];for(let e,i=1,s=l.length;i<s;i++)e=l[i],t!==e.parentNode&&(n.push(e),t=e.parentNode);for(let t=0,l=n.length;t<l;t++)i.setCellInfo.call(this,n[t],!0),i.editRow.call(this,e)}else{const n=l[0].parentNode;if(e){let s=null;for(let t=0,e=l.length-1;t<e;t++)if(n!==l[t+1].parentNode){s=l[t];break}i.setCellInfo.call(this,"left"===e?l[0]:s||l[0],!0),i.editCell.call(this,e,t)}else{const t=[l[0]];for(let e,i=1,s=l.length;i<s&&(e=l[i],n===e.parentNode);i++)t.push(e);for(let n=0,l=t.length;n<l;n++)i.setCellInfo.call(this,t[n],!0),i.editCell.call(this,e)}}e||i.init.call(this)}else i[s?"editRow":"editCell"].call(this,e);if(!e){const t=l.children;for(let e=0;e<t.length;e++)0===t[e].children.length&&(this.util.removeItem(t[e]),e--);0===l.children.length&&this.util.removeItem(l)}},editRow:function(t,e){const i=this.context.table,n=!t,l="up"===t,s=i._rowIndex,o=n||l?s:s+i._current_rowSpan+1,a=n?-1:1,r=i._trElements;let c=i._logical_cellCnt;for(let t,e=0,i=s+(n?-1:0);e<=i;e++){if(t=r[e].cells,0===t.length)return;for(let i,n,l=0,s=t.length;l<s;l++)i=t[l].rowSpan,n=t[l].colSpan,i<2&&n<2||i+e>o&&o>e&&(t[l].rowSpan=i+a,c-=n)}if(n){const t=r[s+1];if(t){const e=[];let i=r[s].cells,n=0;for(let t,l,s=0,o=i.length;s<o;s++)t=i[s],l=s+n,n+=t.colSpan-1,t.rowSpan>1&&(t.rowSpan-=1,e.push({cell:t.cloneNode(!1),index:l}));if(e.length>0){let l=e.shift();i=t.cells,n=0;for(let s,o,a=0,r=i.length;a<r&&(s=i[a],o=a+n,n+=s.colSpan-1,!(o>=l.index)||(a--,n--,n+=l.cell.colSpan-1,t.insertBefore(l.cell,s),l=e.shift(),l));a++);if(l){t.appendChild(l.cell);for(let i=0,n=e.length;i<n;i++)t.appendChild(e[i].cell)}}}i._element.deleteRow(o)}else{i._element.insertRow(o).innerHTML=this.plugins.table.createCells.call(this,"td",c,!1)}n?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,e||i._tdElement,!0)},editCell:function(t,e){const i=this.context.table,n=this.util,l=!t,s="left"===t,o=i._current_colSpan,a=l||s?i._logical_cellIndex:i._logical_cellIndex+o+1,r=i._trElements;let c=[],u=[],d=0;const h=[],p=[];for(let t,e,s,g,m,f,_=0,b=i._rowCnt;_<b;_++){t=r[_],e=a,m=!1,s=t.cells,f=0;for(let t,i,r,g,b=0,v=s.length;b<v&&(t=s[b],t);b++)if(i=t.rowSpan-1,r=t.colSpan-1,l){if(g=b+f,u.length>0){const t=!s[b+1];for(let e,i=0;i<u.length;i++)e=u[i],e.row>_||(g>=e.index?(f+=e.cs,g=b+f,e.rs-=1,e.row=_+1,e.rs<1&&(u.splice(i,1),i--)):t&&(e.rs-=1,e.row=_+1,e.rs<1&&(u.splice(i,1),i--)))}i>0&&c.push({rs:i,cs:r+1,index:g,row:-1}),g>=e&&g+r<=e+o?h.push(t):g<=e+o&&g+r>=e?t.colSpan-=n.getOverlapRangeAtIndex(a,a+o,g,g+r):i>0&&(g<e||g+r>e+o)&&p.push({cell:t,i:_,rs:_+i}),f+=r}else{if(b>=e)break;if(r>0){if(d<1&&r+b>=e){t.colSpan+=1,e=null,d=i+1;break}e-=r}if(!m){for(let t,i=0;i<u.length;i++)t=u[i],e-=t.cs,t.rs-=1,t.rs<1&&(u.splice(i,1),i--);m=!0}}if(u=u.concat(c).sort((function(t,e){return t.index-e.index})),c=[],!l){if(d>0){d-=1;continue}null!==e&&s.length>0&&(g=this.plugins.table.createCells.call(this,s[0].nodeName,0,!0),g=t.insertBefore(g,s[e]))}}if(l){let t,e;for(let i,l=0,s=h.length;l<s;l++)i=h[l].parentNode,n.removeItem(h[l]),0===i.cells.length&&(t||(t=n.getArrayIndex(r,i)),e=n.getArrayIndex(r,i),n.removeItem(i));for(let i,l=0,s=p.length;l<s;l++)i=p[l],i.cell.rowSpan=n.getOverlapRangeAtIndex(t,e,i.i,i.rs);this.controllersOff()}else this.plugins.table.setPositionControllerDiv.call(this,e||i._tdElement,!0)},_closeSplitMenu:null,openSplitMenu:function(){this.util.addClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="inline-table",this.plugins.table._closeSplitMenu=function(){this.util.removeClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="none",this.removeDocEvent("click",this.plugins.table._closeSplitMenu),this.plugins.table._closeSplitMenu=null}.bind(this),this.addDocEvent("click",this.plugins.table._closeSplitMenu)},splitCells:function(t){const e=this.util,i="vertical"===t,n=this.context.table,l=n._tdElement,s=n._trElements,o=n._trElement,a=n._logical_cellIndex,r=n._rowIndex,c=this.plugins.table.createCells.call(this,l.nodeName,0,!0);if(i){const t=l.colSpan;if(c.rowSpan=l.rowSpan,t>1)c.colSpan=this._w.Math.floor(t/2),l.colSpan=t-c.colSpan,o.insertBefore(c,l.nextElementSibling);else{let e=[],i=[];for(let o,r,c=0,u=n._rowCnt;c<u;c++){o=s[c].cells,r=0;for(let n,s,u,d,h=0,p=o.length;h<p;h++){if(n=o[h],s=n.colSpan-1,u=n.rowSpan-1,d=h+r,i.length>0)for(let t,e=0;e<i.length;e++)t=i[e],t.row>c||(d>=t.index?(r+=t.cs,d+=t.cs,t.rs-=1,t.row=c+1,t.rs<1&&(i.splice(e,1),e--)):h===p-1&&(t.rs-=1,t.row=c+1,t.rs<1&&(i.splice(e,1),e--)));if(d<=a&&u>0&&e.push({index:d,cs:s+1,rs:u,row:-1}),n!==l&&d<=a&&d+s>=a+t-1){n.colSpan+=1;break}if(d>a)break;r+=s}i=i.concat(e).sort((function(t,e){return t.index-e.index})),e=[]}o.insertBefore(c,l.nextElementSibling)}}else{const t=l.rowSpan;if(c.colSpan=l.colSpan,t>1){c.rowSpan=this._w.Math.floor(t/2);const i=t-c.rowSpan,n=[],r=e.getArrayIndex(s,o)+i;for(let t,e,i=0;i<r;i++){t=s[i].cells,e=0;for(let l,s,o,c=0,u=t.length;c<u&&(o=c+e,!(o>=a));c++)l=t[c],s=l.rowSpan-1,s>0&&s+i>=r&&o<a&&n.push({index:o,cs:l.colSpan}),e+=l.colSpan-1}const u=s[r],d=u.cells;let h=n.shift();for(let t,e,i,l,s=0,o=d.length,r=0;s<o;s++){if(i=s+r,t=d[s],e=t.colSpan-1,l=i+e+1,h&&l>=h.index&&(r+=h.cs,l+=h.cs,h=n.shift()),l>=a||s===o-1){u.insertBefore(c,t.nextElementSibling);break}r+=e}l.rowSpan=i}else{c.rowSpan=l.rowSpan;const t=e.createElement("TR");t.appendChild(c);for(let t,e=0;e<r;e++){if(t=s[e].cells,0===t.length)return;for(let i=0,n=t.length;i<n;i++)e+t[i].rowSpan-1>=r&&(t[i].rowSpan+=1)}const i=n._physical_cellIndex,a=o.cells;for(let t=0,e=a.length;t<e;t++)t!==i&&(a[t].rowSpan+=1);o.parentNode.insertBefore(t,o.nextElementSibling)}}this.focusEdge(l),this.plugins.table.setPositionControllerDiv.call(this,l,!0)},mergeCells:function(){const t=this.plugins.table,e=this.context.table,i=this.util,n=t._ref,l=t._selectedCells,s=l[0];let o=null,a=null,r=n.ce-n.cs+1,c=n.re-n.rs+1,u="",d=null;for(let t,e,n=1,s=l.length;n<s;n++){t=l[n],d!==t.parentNode&&(d=t.parentNode),e=t.children;for(let t=0,n=e.length;t<n;t++)i.isFormatElement(e[t])&&i.onlyZeroWidthSpace(e[t].textContent)&&i.removeItem(e[t]);u+=t.innerHTML,i.removeItem(t),0===d.cells.length&&(o?a=d:o=d,c-=1)}if(o){const t=e._trElements,n=i.getArrayIndex(t,o),l=i.getArrayIndex(t,a||o),s=[];for(let e,o=0;o<=l;o++)if(e=t[o].cells,0!==e.length)for(let t,s,a=0,r=e.length;a<r;a++)t=e[a],s=t.rowSpan-1,s>0&&o+s>=n&&(t.rowSpan-=i.getOverlapRangeAtIndex(n,l,o,o+s));else s.push(t[o]);for(let t=0,e=s.length;t<e;t++)i.removeItem(s[t])}s.innerHTML+=u,s.colSpan=r,s.rowSpan=c,this.controllersOff(),t.setActiveButton.call(this,!0,!1),t.call_controller_tableEdit.call(this,s),i.addClass(s,"se-table-selected-cell"),this.focusEdge(s)},toggleHeader:function(){const t=this.util,e=this.context.table.headerButton,i=t.hasClass(e,"active"),n=this.context.table._element;if(i)t.removeItem(n.querySelector("thead"));else{const e=t.createElement("THEAD");e.innerHTML="<tr>"+this.plugins.table.createCells.call(this,"th",this.context.table._logical_cellCnt,!1)+"</tr>",n.insertBefore(e,n.firstElementChild)}t.toggleClass(e,"active"),/TH/i.test(this.context.table._tdElement.nodeName)?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,this.context.table._tdElement,!1)},setTableStyle:function(t){const e=this.context.table,i=e._element;let n,l,s,o;t.indexOf("width")>-1&&(n=e.resizeButton.firstElementChild,l=e.resizeText,e._maxWidth?(s=e.icons.reduction,o=e.minText,e.columnFixedButton.style.display="block",this.util.removeClass(i,"se-table-size-auto"),this.util.addClass(i,"se-table-size-100")):(s=e.icons.expansion,o=e.maxText,e.columnFixedButton.style.display="none",this.util.removeClass(i,"se-table-size-100"),this.util.addClass(i,"se-table-size-auto")),this.util.changeElement(n,s),this.util.changeTxt(l,o)),t.indexOf("column")>-1&&(e._fixedColumn?(this.util.removeClass(i,"se-table-layout-auto"),this.util.addClass(i,"se-table-layout-fixed"),this.util.addClass(e.columnFixedButton,"active")):(this.util.removeClass(i,"se-table-layout-fixed"),this.util.addClass(i,"se-table-layout-auto"),this.util.removeClass(e.columnFixedButton,"active")))},setActiveButton:function(t,e){const i=this.context.table;/^TH$/i.test(t.nodeName)?(i.insertRowAboveButton.setAttribute("disabled",!0),i.insertRowBelowButton.setAttribute("disabled",!0)):(i.insertRowAboveButton.removeAttribute("disabled"),i.insertRowBelowButton.removeAttribute("disabled")),e&&t!==e?(i.splitButton.setAttribute("disabled",!0),i.mergeButton.removeAttribute("disabled")):(i.splitButton.removeAttribute("disabled"),i.mergeButton.setAttribute("disabled",!0))},_bindOnSelect:null,_bindOffSelect:null,_bindOffShift:null,_selectedCells:null,_shift:!1,_fixedCell:null,_fixedCellName:null,_selectedCell:null,_selectedTable:null,_ref:null,_toggleEditor:function(t){this.context.element.wysiwyg.setAttribute("contenteditable",t),t?this.util.removeClass(this.context.element.wysiwyg,"se-disabled"):this.util.addClass(this.context.element.wysiwyg,"se-disabled")},_offCellMultiSelect:function(t){t.stopPropagation();const e=this.plugins.table;e._shift?e._initBind&&(this._wd.removeEventListener("touchmove",e._initBind),e._initBind=null):(e._removeEvents.call(this),e._toggleEditor.call(this,!0)),e._fixedCell&&e._selectedTable&&(e.setActiveButton.call(this,e._fixedCell,e._selectedCell),e.call_controller_tableEdit.call(this,e._selectedCell||e._fixedCell),e._selectedCells=e._selectedTable.querySelectorAll(".se-table-selected-cell"),e._selectedCell&&e._fixedCell&&this.focusEdge(e._selectedCell),e._shift||(e._fixedCell=null,e._selectedCell=null,e._fixedCellName=null))},_onCellMultiSelect:function(t){this._antiBlur=!0;const e=this.plugins.table,i=this.util.getParentElement(t.target,this.util.isCell);if(e._shift)i===e._fixedCell?e._toggleEditor.call(this,!0):e._toggleEditor.call(this,!1);else if(!e._ref){if(i===e._fixedCell)return;e._toggleEditor.call(this,!1)}i&&i!==e._selectedCell&&e._fixedCellName===i.nodeName&&e._selectedTable===this.util.getParentElement(i,"TABLE")&&(e._selectedCell=i,e._setMultiCells.call(this,e._fixedCell,i))},_setMultiCells:function(t,e){const i=this.plugins.table,n=i._selectedTable.rows,l=this.util,s=i._selectedTable.querySelectorAll(".se-table-selected-cell");for(let t=0,e=s.length;t<e;t++)l.removeClass(s[t],"se-table-selected-cell");if(t===e&&(l.addClass(t,"se-table-selected-cell"),!i._shift))return;let o=!0,a=[],r=[];const c=i._ref={_i:0,cs:null,ce:null,rs:null,re:null};for(let i,s,u=0,d=n.length;u<d;u++){i=n[u].cells,s=0;for(let n,d,h,p,g=0,m=i.length;g<m;g++){if(n=i[g],h=n.colSpan-1,p=n.rowSpan-1,d=g+s,a.length>0)for(let t,e=0;e<a.length;e++)t=a[e],t.row>u||(d>=t.index?(s+=t.cs,d+=t.cs,t.rs-=1,t.row=u+1,t.rs<1&&(a.splice(e,1),e--)):g===m-1&&(t.rs-=1,t.row=u+1,t.rs<1&&(a.splice(e,1),e--)));if(o){if(n!==t&&n!==e||(c.cs=null!==c.cs&&c.cs<d?c.cs:d,c.ce=null!==c.ce&&c.ce>d+h?c.ce:d+h,c.rs=null!==c.rs&&c.rs<u?c.rs:u,c.re=null!==c.re&&c.re>u+p?c.re:u+p,c._i+=1),2===c._i){o=!1,a=[],r=[],u=-1;break}}else if(l.getOverlapRangeAtIndex(c.cs,c.ce,d,d+h)&&l.getOverlapRangeAtIndex(c.rs,c.re,u,u+p)){const t=c.cs<d?c.cs:d,e=c.ce>d+h?c.ce:d+h,i=c.rs<u?c.rs:u,s=c.re>u+p?c.re:u+p;if(c.cs!==t||c.ce!==e||c.rs!==i||c.re!==s){c.cs=t,c.ce=e,c.rs=i,c.re=s,u=-1,a=[],r=[];break}l.addClass(n,"se-table-selected-cell")}p>0&&r.push({index:d,cs:h+1,rs:p,row:-1}),s+=n.colSpan-1}a=a.concat(r).sort((function(t,e){return t.index-e.index})),r=[]}},_removeEvents:function(){const t=this.plugins.table;t._initBind&&(this._wd.removeEventListener("touchmove",t._initBind),t._initBind=null),t._bindOnSelect&&(this._wd.removeEventListener("mousedown",t._bindOnSelect),this._wd.removeEventListener("mousemove",t._bindOnSelect),t._bindOnSelect=null),t._bindOffSelect&&(this._wd.removeEventListener("mouseup",t._bindOffSelect),t._bindOffSelect=null),t._bindOffShift&&(this._wd.removeEventListener("keyup",t._bindOffShift),t._bindOffShift=null)},_initBind:null,onTableCellMultiSelect:function(t,e){const i=this.plugins.table;i._removeEvents.call(this),this.controllersOff(),i._shift=e,i._fixedCell=t,i._fixedCellName=t.nodeName,i._selectedTable=this.util.getParentElement(t,"TABLE");const n=i._selectedTable.querySelectorAll(".se-table-selected-cell");for(let t=0,e=n.length;t<e;t++)this.util.removeClass(n[t],"se-table-selected-cell");this.util.addClass(t,"se-table-selected-cell"),i._bindOnSelect=i._onCellMultiSelect.bind(this),i._bindOffSelect=i._offCellMultiSelect.bind(this),e?(i._bindOffShift=function(){this.controllersOn(this.context.table.resizeDiv,this.context.table.tableController,this.plugins.table.init.bind(this),t,"table"),i._ref||this.controllersOff()}.bind(this),this._wd.addEventListener("keyup",i._bindOffShift,!1),this._wd.addEventListener("mousedown",i._bindOnSelect,!1)):this._wd.addEventListener("mousemove",i._bindOnSelect,!1),this._wd.addEventListener("mouseup",i._bindOffSelect,!1),i._initBind=i.init.bind(this),this._wd.addEventListener("touchmove",i._initBind,!1)},onClick_tableController:function(t){t.stopPropagation();const e=t.target.getAttribute("data-command")?t.target:t.target.parentNode;if(e.getAttribute("disabled"))return;const i=e.getAttribute("data-command"),n=e.getAttribute("data-value"),l=e.getAttribute("data-option"),s=this.plugins.table;if("function"==typeof s._closeSplitMenu&&(s._closeSplitMenu(),"onsplit"===i))return;if(!i)return;t.preventDefault();const o=this.context.table;switch(i){case"insert":case"delete":s.editTable.call(this,n,l);break;case"header":s.toggleHeader.call(this);break;case"onsplit":s.openSplitMenu.call(this);break;case"split":s.splitCells.call(this,n);break;case"merge":s.mergeCells.call(this);break;case"resize":o._maxWidth=!o._maxWidth,s.setTableStyle.call(this,"width"),s.setPositionControllerTop.call(this,o._element),s.setPositionControllerDiv.call(this,o._tdElement,s._shift);break;case"layout":o._fixedColumn=!o._fixedColumn,s.setTableStyle.call(this,"column"),s.setPositionControllerTop.call(this,o._element),s.setPositionControllerDiv.call(this,o._tdElement,s._shift);break;case"remove":const t=o._element.parentNode;this.util.removeItem(o._element),this.controllersOff(),t!==this.context.element.wysiwyg&&this.util.removeItemAllParents(t,(function(t){return 0===t.childNodes.length}),null),this.focus()}this.history.push(!1)}},formatBlock:{name:"formatBlock",display:"submenu",add:function(t,e){const i=t.context;i.formatBlock={targetText:e.querySelector(".txt"),targetTooltip:e.parentNode.querySelector(".se-tooltip-text"),_formatList:null,currentFormat:""};let n=this.setSubmenu(t);n.querySelector("ul").addEventListener("click",this.pickUp.bind(t)),i.formatBlock._formatList=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null},setSubmenu:function(t){const e=t.options,i=t.lang.toolbar,n=t.util.createElement("DIV");n.className="se-submenu se-list-layer se-list-format";const l=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6"],s=e.formats&&0!==e.formats.length?e.formats:l;let o='<div class="se-list-inner"><ul class="se-list-basic">';for(let t,e,n,a,r,c,u,d=0,h=s.length;d<h;d++)t=s[d],"string"==typeof t&&l.indexOf(t)>-1?(e=t.toLowerCase(),n="blockquote"===e?"range":"pre"===e?"free":"replace",r=/^h/.test(e)?e.match(/\d+/)[0]:"",a=i["tag_"+(r?"h":e)]+r,u="",c=""):(e=t.tag.toLowerCase(),n=t.command,a=t.name||e,u=t.class,c=u?' class="'+u+'"':""),o+='<li><button type="button" class="se-btn-list" data-command="'+n+'" data-value="'+e+'" data-class="'+u+'" title="'+a+'"><'+e+c+">"+a+"</"+e+"></button></li>";return o+="</ul></div>",n.innerHTML=o,n},active:function(t){let e=this.lang.toolbar.formats;const i=this.context.formatBlock.targetText;if(t){if(this.util.isFormatElement(t)){const n=this.context.formatBlock._formatList,l=t.nodeName.toLowerCase(),s=(t.className.match(/(\s|^)__se__format__[^\s]+/)||[""])[0].trim();for(let t,i=0,o=n.length;i<o;i++)if(t=n[i],l===t.getAttribute("data-value")&&s===t.getAttribute("data-class")){e=t.title;break}return this.util.changeTxt(i,e),i.setAttribute("data-value",l),i.setAttribute("data-class",s),!0}}else this.util.changeTxt(i,e);return!1},on:function(){const t=this.context.formatBlock,e=t._formatList,i=t.targetText,n=(i.getAttribute("data-value")||"")+(i.getAttribute("data-class")||"");if(n!==t.currentFormat){for(let t,i=0,l=e.length;i<l;i++)t=e[i],n===t.getAttribute("data-value")+t.getAttribute("data-class")?this.util.addClass(t,"active"):this.util.removeClass(t,"active");t.currentFormat=n}},pickUp:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i=null,n=null,l=null,s="";for(;!i&&!/UL/i.test(e.tagName);){if(i=e.getAttribute("data-command"),n=e.getAttribute("data-value"),s=e.getAttribute("data-class"),i){l=e.firstChild;break}e=e.parentNode}if(i){if("range"===i){const t=l.cloneNode(!1);this.applyRangeFormatElement(t)}else{let t=this.getRange(),e=this.getSelectedElementsAndComponents(!1);if(0===e.length&&(t=this.getRange_addLine(t,null),e=this.getSelectedElementsAndComponents(!1),0===e.length))return;const o=t.startOffset,a=t.endOffset,r=this.util;let c=e[0],u=e[e.length-1];const d=r.getNodePath(t.startContainer,c,null,null),h=r.getNodePath(t.endContainer,u,null,null),p=this.detachList(e,!1);p.sc&&(c=p.sc),p.ec&&(u=p.ec),this.setRange(r.getNodeFromPath(d,c),o,r.getNodeFromPath(h,u),a);const g=this.getSelectedElementsAndComponents(!1);if("free"===i){const t=g.length-1;let e=g[t].parentNode,i=l.cloneNode(!1);const n=i;for(let n,s,o,a,c,u,d=t,h=!0;d>=0;d--)if(n=g[d],n!==(g[d+1]?g[d+1].parentNode:null)){if(u=r.isComponent(n),s=u?"":n.innerHTML.replace(/(?!>)\s+(?=<)|\n/g," "),o=r.getParentElement(n,(function(t){return t.parentNode===e})),(e!==n.parentNode||u)&&(r.isFormatElement(e)?(e.parentNode.insertBefore(i,e.nextSibling),e=e.parentNode):(e.insertBefore(i,o?o.nextSibling:null),e=n.parentNode),a=i.nextSibling,a&&i.nodeName===a.nodeName&&r.isSameAttributes(i,a)&&(i.innerHTML+="<BR>"+a.innerHTML,r.removeItem(a)),i=l.cloneNode(!1),h=!0),c=i.innerHTML,i.innerHTML=(h||!s||!c||/<br>$/i.test(s)?s:s+"<BR>")+c,0===d){e.insertBefore(i,n),a=n.nextSibling,a&&i.nodeName===a.nodeName&&r.isSameAttributes(i,a)&&(i.innerHTML+="<BR>"+a.innerHTML,r.removeItem(a));const t=i.previousSibling;t&&i.nodeName===t.nodeName&&r.isSameAttributes(i,t)&&(t.innerHTML+="<BR>"+i.innerHTML,r.removeItem(i))}u||r.removeItem(n),s&&(h=!1)}this.setRange(n,0,n,0)}else{for(let t,e,i=0,o=g.length;i<o;i++)t=g[i],t.nodeName.toLowerCase()===n.toLowerCase()&&(t.className.match(/(\s|^)__se__format__[^\s]+/)||[""])[0].trim()===s||r.isComponent(t)||(e=l.cloneNode(!1),r.copyFormatAttributes(e,t),e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)),0===i&&(c=e||t),i===o-1&&(u=e||t),e=null;this.setRange(r.getNodeFromPath(d,c),o,r.getNodeFromPath(h,u),a)}this.history.push(!1)}this.submenuOff()}}},lineHeight:{name:"lineHeight",display:"submenu",add:function(t,e){const i=t.context;i.lineHeight={_sizeList:null,currentSize:-1};let n=this.setSubmenu(t),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(t)),i.lineHeight._sizeList=l.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null,l=null},setSubmenu:function(t){const e=t.options,i=t.lang,n=t.util.createElement("DIV");n.className="se-submenu se-list-layer";const l=e.lineHeights?e.lineHeights:[{text:"1",value:1},{text:"1.15",value:1.15},{text:"1.5",value:1.5},{text:"2",value:2}];let s='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(let t,e=0,i=l.length;e<i;e++)t=l[e],s+='<li><button type="button" class="se-btn-list" data-value="'+t.value+'" title="'+t.text+'">'+t.text+"</button></li>";return s+="</ul></div>",n.innerHTML=s,n},on:function(){const t=this.context.lineHeight,e=t._sizeList,i=this.util.getFormatElement(this.getSelectionNode()),n=i?i.style.lineHeight+"":"";if(n!==t.currentSize){for(let t=0,i=e.length;t<i;t++)n===e[t].getAttribute("data-value")?this.util.addClass(e[t],"active"):this.util.removeClass(e[t],"active");t.currentSize=n}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();const e=t.target.getAttribute("data-value")||"",i=this.getSelectedElements();for(let t=0,n=i.length;t<n;t++)i[t].style.lineHeight=e;this.submenuOff(),this.history.push(!1)}},template:o,paragraphStyle:{name:"paragraphStyle",display:"submenu",add:function(t,e){const i=t.context;i.paragraphStyle={_classList:null};let n=this.setSubmenu(t);n.querySelector("ul").addEventListener("click",this.pickUp.bind(t)),i.paragraphStyle._classList=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null},setSubmenu:function(t){const e=t.options,i=t.util.createElement("DIV");i.className="se-submenu se-list-layer se-list-format";const n=t.lang.menu,l={spaced:{name:n.spaced,class:"__se__p-spaced",_class:""},bordered:{name:n.bordered,class:"__se__p-bordered",_class:""},neon:{name:n.neon,class:"__se__p-neon",_class:""}},s=e.paragraphStyles&&0!==e.paragraphStyles.length?e.paragraphStyles:["spaced","bordered","neon"];let o='<div class="se-list-inner"><ul class="se-list-basic">';for(let t,e,i,n,a=0,r=s.length;a<r;a++){if(t=s[a],"string"==typeof t){const e=l[t.toLowerCase()];if(!e)continue;t=e}e=t.name,i=t.class?' class="'+t.class+'"':"",n=t._class,o+='<li><button type="button" class="se-btn-list'+(n?" "+n:"")+'" data-value="'+t.class+'" title="'+e+'"><div'+i+">"+e+"</div></button></li>"}return o+="</ul></div>",i.innerHTML=o,i},on:function(){const t=this.context.paragraphStyle._classList,e=this.util.getFormatElement(this.getSelectionNode());for(let i=0,n=t.length;i<n;i++)this.util.hasClass(e,t[i].getAttribute("data-value"))?this.util.addClass(t[i],"active"):this.util.removeClass(t[i],"active")},pickUp:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i=null;for(;!/^UL$/i.test(e.tagName)&&(i=e.getAttribute("data-value"),!i);)e=e.parentNode;if(!i)return;let n=this.getSelectedElements();if(0===n.length&&(this.getRange_addLine(this.getRange(),null),n=this.getSelectedElements(),0===n.length))return;const l=this.util.hasClass(e,"active")?this.util.removeClass.bind(this.util):this.util.addClass.bind(this.util);for(let t=0,e=n.length;t<e;t++)l(n[t],i);this.submenuOff(),this.history.push(!1)}},textStyle:{name:"textStyle",display:"submenu",add:function(t,e){const i=t.context;i.textStyle={_styleList:null};let n=this.setSubmenu(t),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(t)),i.textStyle._styleList=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null,l=null},setSubmenu:function(t){const e=t.options,i=t.util.createElement("DIV");i.className="se-submenu se-list-layer se-list-format";const n={code:{name:t.lang.menu.code,class:"__se__t-code",tag:"code"},translucent:{name:t.lang.menu.translucent,style:"opacity: 0.5;",tag:"span"},shadow:{name:t.lang.menu.shadow,class:"__se__t-shadow",tag:"span"}},l=e.textStyles?e.textStyles:t._w.Object.keys(n);let s='<div class="se-list-inner"><ul class="se-list-basic">';for(let t,e,i,o,a,r,c,u=0,d=l.length;u<d;u++){if(t=l[u],o="",r="",a=[],"string"==typeof t){const e=n[t.toLowerCase()];if(!e)continue;t=e}i=t.name,e=t.tag||"span",c=t._class,t.style&&(o+=' style="'+t.style+'"',r+=t.style.replace(/:[^;]+(;|$)\s*/g,","),a.push("style")),t.class&&(o+=' class="'+t.class+'"',r+="."+t.class.trim().replace(/\s+/g,",."),a.push("class")),r=r.replace(/,$/,""),s+='<li><button type="button" class="se-btn-list'+(c?" "+c:"")+'" data-command="'+e+'" data-value="'+r+'" title="'+i+'"><'+e+o+">"+i+"</"+e+"></button></li>"}return s+="</ul></div>",i.innerHTML=s,i},on:function(){const t=this.util,e=this.context.textStyle._styleList,i=this.getSelectionNode();for(let n,l,s,o=0,a=e.length;o<a;o++){n=e[o],l=n.getAttribute("data-value").split(",");for(let e,o,a=0;a<l.length;a++){for(e=i,s=!1;e&&!t.isFormatElement(e)&&!t.isComponent(e);){if(e.nodeName.toLowerCase()===n.getAttribute("data-command").toLowerCase()&&(o=l[a],/^\./.test(o)?t.hasClass(e,o.replace(/^\./,"")):e.style[o])){s=!0;break}e=e.parentNode}if(!s)break}s?t.addClass(n,"active"):t.removeClass(n,"active")}},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,i=null,n=null;for(;!i&&!/UL/i.test(e.tagName);){if(i=e.getAttribute("data-command"),i){n=e.firstChild;break}e=e.parentNode}if(!i)return;const l=n.style.cssText.replace(/:.+(;|$)/g,",").split(",");l.pop();const s=n.classList;for(let t=0,e=s.length;t<e;t++)l.push("."+s[t]);const o=this.util.hasClass(e,"active")?null:n.cloneNode(!1),a=o?null:[n.nodeName];this.nodeChange(o,l,a,!0),this.submenuOff()}},link:d,image:b,video:v,audio:y,math:x,imageGallery:{name:"imageGallery",add:function(t){t.addModule([C()]);t.context.imageGallery={title:t.lang.toolbar.imageGallery,url:t.options.imageGalleryUrl,header:t.options.imageGalleryHeader,listClass:"se-image-list",itemTemplateHandler:this.drawItems,selectorHandler:this.setImage.bind(t),columnSize:4}},open:function(t){this.plugins.fileBrowser.open.call(this,"imageGallery",t)},drawItems:function(t){const e=t.src.split("/").pop();return'<div class="se-file-item-img"><img src="'+(t.thumbnail||t.src)+'" alt="'+(t.alt||e)+'" data-command="pick" data-value="'+(t.src||t.thumbnail)+'"><div class="se-file-img-name se-file-name-back"></div><div class="se-file-img-name __se__img_name">'+(t.name||e)+"</div></div>"},setImage:function(t){this.callPlugin("image",function(){const e={name:t.parentNode.querySelector(".__se__img_name").textContent,size:0};this.plugins.image.create_image.call(this,t.getAttribute("data-value"),null,this.context.image._origin_w,this.context.image._origin_h,"none",e,t.alt)}.bind(this),null)}}}},1841:function(t){var e,i;e="undefined"!=typeof window?window:this,i=function(t,e){const i={name:"component",set_container:function(t,e){const i=this.util.createElement("DIV");return i.className="se-component "+e,i.setAttribute("contenteditable",!1),i.appendChild(t),i},set_cover:function(t){const e=this.util.createElement("FIGURE");return e.appendChild(t),e},create_caption:function(){const t=this.util.createElement("FIGCAPTION");return t.setAttribute("contenteditable",!0),t.innerHTML="<div>"+this.lang.dialogBox.caption+"</div>",t}};return void 0===e&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"component",{enumerable:!0,writable:!1,configurable:!1,value:i})),i},"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("SUNEDITOR_MODULES a window with a document");return i(t)}:i(e)},8784:function(t){var e,i;e="undefined"!=typeof window?window:this,i=function(t,e){const i={name:"dialog",add:function(t){const e=t.context;e.dialog={kind:"",updateModal:!1,_closeSignal:!1};let i=t.util.createElement("DIV");i.className="se-dialog sun-editor-common";let n=t.util.createElement("DIV");n.className="se-dialog-back",n.style.display="none";let l=t.util.createElement("DIV");l.className="se-dialog-inner",l.style.display="none",i.appendChild(n),i.appendChild(l),e.dialog.modalArea=i,e.dialog.back=n,e.dialog.modal=l,e.dialog.modal.addEventListener("mousedown",this._onMouseDown_dialog.bind(t)),e.dialog.modal.addEventListener("click",this._onClick_dialog.bind(t)),e.element.relative.appendChild(i),i=null,n=null,l=null},_onMouseDown_dialog:function(t){/se-dialog-inner/.test(t.target.className)?this.context.dialog._closeSignal=!0:this.context.dialog._closeSignal=!1},_onClick_dialog:function(t){(/close/.test(t.target.getAttribute("data-command"))||this.context.dialog._closeSignal)&&this.plugins.dialog.close.call(this)},open:function(t,e){if(this.modalForm)return!1;this.plugins.dialog._bindClose&&(this._d.removeEventListener("keydown",this.plugins.dialog._bindClose),this.plugins.dialog._bindClose=null),this.plugins.dialog._bindClose=function(t){/27/.test(t.keyCode)&&this.plugins.dialog.close.call(this)}.bind(this),this._d.addEventListener("keydown",this.plugins.dialog._bindClose),this.context.dialog.updateModal=e,"full"===this.options.popupDisplay?this.context.dialog.modalArea.style.position="fixed":this.context.dialog.modalArea.style.position="absolute",this.context.dialog.kind=t,this.modalForm=this.context[t].modal;const i=this.context[t].focusElement;"function"==typeof this.plugins[t].on&&this.plugins[t].on.call(this,e),this.context.dialog.modalArea.style.display="block",this.context.dialog.back.style.display="block",this.context.dialog.modal.style.display="block",this.modalForm.style.display="block",i&&i.focus()},_bindClose:null,close:function(){this.plugins.dialog._bindClose&&(this._d.removeEventListener("keydown",this.plugins.dialog._bindClose),this.plugins.dialog._bindClose=null);const t=this.context.dialog.kind;this.modalForm.style.display="none",this.context.dialog.back.style.display="none",this.context.dialog.modalArea.style.display="none",this.context.dialog.updateModal=!1,"function"==typeof this.plugins[t].init&&this.plugins[t].init.call(this),this.context.dialog.kind="",this.modalForm=null,this.focus()}};return void 0===e&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"dialog",{enumerable:!0,writable:!1,configurable:!1,value:i})),i},"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("SUNEDITOR_MODULES a window with a document");return i(t)}:i(e)},1665:function(t){var e,i;e="undefined"!=typeof window?window:this,i=function(t,e){const i={name:"fileBrowser",_xmlHttp:null,_loading:null,add:function(t){const e=t.context;e.fileBrowser={_closeSignal:!1,area:null,header:null,tagArea:null,body:null,list:null,tagElements:null,items:[],selectedTags:[],selectorHandler:null,contextPlugin:"",columnSize:4};let i=t.util.createElement("DIV");i.className="se-file-browser sun-editor-common";let n=t.util.createElement("DIV");n.className="se-file-browser-back";let l=t.util.createElement("DIV");l.className="se-file-browser-inner",l.innerHTML=this.set_browser(t),i.appendChild(n),i.appendChild(l),this._loading=i.querySelector(".se-loading-box"),e.fileBrowser.area=i,e.fileBrowser.header=l.querySelector(".se-file-browser-header"),e.fileBrowser.titleArea=l.querySelector(".se-file-browser-title"),e.fileBrowser.tagArea=l.querySelector(".se-file-browser-tags"),e.fileBrowser.body=l.querySelector(".se-file-browser-body"),e.fileBrowser.list=l.querySelector(".se-file-browser-list"),e.fileBrowser.tagArea.addEventListener("click",this.onClickTag.bind(t)),e.fileBrowser.list.addEventListener("click",this.onClickFile.bind(t)),l.addEventListener("mousedown",this._onMouseDown_browser.bind(t)),l.addEventListener("click",this._onClick_browser.bind(t)),e.element.relative.appendChild(i),i=null,n=null,l=null},set_browser:function(t){return'<div class="se-file-browser-content"><div class="se-file-browser-header"><button type="button" data-command="close" class="se-btn se-file-browser-close" class="close" aria-label="Close" title="'+t.lang.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-file-browser-title"></span><div class="se-file-browser-tags"></div></div><div class="se-file-browser-body"><div class="se-loading-box sun-editor-common"><div class="se-loading-effect"></div></div><div class="se-file-browser-list"></div></div></div>'},_onMouseDown_browser:function(t){/se-file-browser-inner/.test(t.target.className)?this.context.fileBrowser._closeSignal=!0:this.context.fileBrowser._closeSignal=!1},_onClick_browser:function(t){t.stopPropagation(),(/close/.test(t.target.getAttribute("data-command"))||this.context.fileBrowser._closeSignal)&&this.plugins.fileBrowser.close.call(this)},open:function(t,e){this.plugins.fileBrowser._bindClose&&(this._d.removeEventListener("keydown",this.plugins.fileBrowser._bindClose),this.plugins.fileBrowser._bindClose=null),this.plugins.fileBrowser._bindClose=function(t){/27/.test(t.keyCode)&&this.plugins.fileBrowser.close.call(this)}.bind(this),this._d.addEventListener("keydown",this.plugins.fileBrowser._bindClose);const i=this.context.fileBrowser;i.contextPlugin=t,i.selectorHandler=e;const n=this.context[t],l=n.listClass;this.util.hasClass(i.list,l)||(i.list.className="se-file-browser-list "+l),"full"===this.options.popupDisplay?i.area.style.position="fixed":i.area.style.position="absolute",i.titleArea.textContent=n.title,i.area.style.display="block",this.plugins.fileBrowser._drawFileList.call(this,this.context[t].url,this.context[t].header)},_bindClose:null,close:function(){const t=this.plugins.fileBrowser;t._xmlHttp&&t._xmlHttp.abort(),t._bindClose&&(this._d.removeEventListener("keydown",t._bindClose),t._bindClose=null);const e=this.context.fileBrowser;e.area.style.display="none",e.selectorHandler=null,e.selectedTags=[],e.items=[],e.list.innerHTML=e.tagArea.innerHTML=e.titleArea.textContent="","function"==typeof this.plugins[e.contextPlugin].init&&this.plugins[e.contextPlugin].init.call(this),e.contextPlugin=""},showBrowserLoading:function(){this._loading.style.display="block"},closeBrowserLoading:function(){this._loading.style.display="none"},_drawFileList:function(t,e){const i=this.plugins.fileBrowser,n=i._xmlHttp=this.util.getXMLHttpRequest();if(n.onreadystatechange=i._callBackGet.bind(this,n),n.open("get",t,!0),null!==e&&"object"==typeof e&&this._w.Object.keys(e).length>0)for(let t in e)n.setRequestHeader(t,e[t]);n.send(null),this.plugins.fileBrowser.showBrowserLoading()},_callBackGet:function(t){if(4===t.readyState)if(this.plugins.fileBrowser._xmlHttp=null,200===t.status)try{const e=JSON.parse(t.responseText);e.result.length>0?this.plugins.fileBrowser._drawListItem.call(this,e.result,!0):e.nullMessage&&(this.context.fileBrowser.list.innerHTML=e.nullMessage)}catch(t){throw Error('[SUNEDITOR.fileBrowser.drawList.fail] cause : "'+t.message+'"')}finally{this.plugins.fileBrowser.closeBrowserLoading(),this.context.fileBrowser.body.style.maxHeight=this._w.innerHeight-this.context.fileBrowser.header.offsetHeight-50+"px"}else if(this.plugins.fileBrowser.closeBrowserLoading(),0!==t.status){const e=t.responseText?JSON.parse(t.responseText):t,i="[SUNEDITOR.fileBrowser.get.serverException] status: "+t.status+", response: "+(e.errorMessage||t.responseText);throw Error(i)}},_drawListItem:function(t,e){const i=this.context.fileBrowser,n=this.context[i.contextPlugin],l=[],s=t.length,o=n.columnSize||i.columnSize,a=o<=1?1:Math.round(s/o)||1,r=n.itemTemplateHandler;let c="",u='<div class="se-file-item-column">',d=1;for(let i,n,h=0;h<s;h++)if(i=t[h],n=i.tag?"string"==typeof i.tag?i.tag.split(","):i.tag:[],n=i.tag=n.map((function(t){return t.trim()})),u+=r(i),(h+1)%a==0&&d<o&&h+1<s&&(d++,u+='</div><div class="se-file-item-column">'),e&&n.length>0)for(let t,e=0,i=n.length;e<i;e++)t=n[e],t&&-1===l.indexOf(t)&&(l.push(t),c+='<a title="'+t+'">'+t+"</a>");u+="</div>",i.list.innerHTML=u,e&&(i.items=t,i.tagArea.innerHTML=c,i.tagElements=i.tagArea.querySelectorAll("A"))},onClickTag:function(t){const e=t.target;if(!this.util.isAnchor(e))return;const i=e.textContent,n=this.plugins.fileBrowser,l=this.context.fileBrowser,s=l.tagArea.querySelector('a[title="'+i+'"]'),o=l.selectedTags,a=o.indexOf(i);a>-1?(o.splice(a,1),this.util.removeClass(s,"on")):(o.push(i),this.util.addClass(s,"on")),n._drawListItem.call(this,0===o.length?l.items:l.items.filter((function(t){return t.tag.some((function(t){return o.indexOf(t)>-1}))})),!1)},onClickFile:function(t){t.preventDefault(),t.stopPropagation();const e=this.context.fileBrowser,i=e.list;let n=t.target,l=null;if(n===i)return;for(;i!==n.parentNode&&(l=n.getAttribute("data-command"),!l);)n=n.parentNode;if(!l)return;const s=e.selectorHandler||this.context[e.contextPlugin].selectorHandler;this.plugins.fileBrowser.close.call(this),s(n)}};return void 0===e&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"fileBrowser",{enumerable:!0,writable:!1,configurable:!1,value:i})),i},"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("SUNEDITOR_MODULES a window with a document");return i(t)}:i(e)},2527:function(t){var e,i;e="undefined"!=typeof window?window:this,i=function(t,e){const i={name:"fileManager",_xmlHttp:null,_checkMediaComponent:function(t){return!/IMG/i.test(t)||!/FIGURE/i.test(t.parentElement.nodeName)||!/FIGURE/i.test(t.parentElement.parentElement.nodeName)},upload:function(t,e,i,n,l){this.showLoading();const s=this.plugins.fileManager,o=s._xmlHttp=this.util.getXMLHttpRequest();if(o.onreadystatechange=s._callBackUpload.bind(this,o,n,l),o.open("post",t,!0),null!==e&&"object"==typeof e&&this._w.Object.keys(e).length>0)for(let t in e)o.setRequestHeader(t,e[t]);o.send(i)},_callBackUpload:function(t,e,i){if(4===t.readyState)if(200===t.status)try{e(t)}catch(t){throw Error('[SUNEDITOR.fileManager.upload.callBack.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}else{this.closeLoading();const e=t.responseText?JSON.parse(t.responseText):t;if("function"!=typeof i||i("",e,this)){const i="[SUNEDITOR.fileManager.upload.serverException] status: "+t.status+", response: "+(e.errorMessage||t.responseText);throw this.functions.noticeOpen(i),Error(i)}}},checkInfo:function(t,e,i,n,l){let s=[];for(let t=0,i=e.length;t<i;t++)s=s.concat([].slice.call(this.context.element.wysiwyg.querySelectorAll(e[t]+':not([data-se-embed="true"])')));const o=this.plugins.fileManager,a=this.context[t],r=a._infoList,c=o.setInfo.bind(this);if(s.length===r.length){if(this._componentsInfoReset){for(let e=0,n=s.length;e<n;e++)c(t,s[e],i,null,l);return}{let t=!1;for(let e,i=0,n=r.length;i<n;i++)if(e=r[i],0===s.filter((function(t){return e.src===t.src&&e.index.toString()===t.getAttribute("data-index")})).length){t=!0;break}if(!t)return}}const u=l?this.context.resizing._resize_plugin:"";l&&(this.context.resizing._resize_plugin=t);const d=[],h=[];for(let t=0,e=r.length;t<e;t++)h[t]=r[t].index;for(let e,r=0,u=s.length;r<u;r++)e=s[r],this.util.getParentElement(e,this.util.isMediaComponent)&&o._checkMediaComponent(e)?!e.getAttribute("data-index")||h.indexOf(1*e.getAttribute("data-index"))<0?(d.push(a._infoIndex),e.removeAttribute("data-index"),c(t,e,i,null,l)):d.push(1*e.getAttribute("data-index")):(d.push(a._infoIndex),n(e));for(let t,e=0;e<r.length;e++)t=r[e].index,d.indexOf(t)>-1||(r.splice(e,1),"function"==typeof i&&i(null,t,"delete",null,0,this),e--);l&&(this.context.resizing._resize_plugin=u)},setInfo:function(t,e,i,n,l){const s=l?this.context.resizing._resize_plugin:"";l&&(this.context.resizing._resize_plugin=t);const o=this.plugins[t],a=this.context[t],r=a._infoList;let c=e.getAttribute("data-index"),u=null,d="";if(n||(n={name:e.getAttribute("data-file-name")||("string"==typeof e.src?e.src.split("/").pop():""),size:e.getAttribute("data-file-size")||0}),!c||this._componentsInfoInit)d="create",c=a._infoIndex++,e.setAttribute("data-index",c),e.setAttribute("data-file-name",n.name),e.setAttribute("data-file-size",n.size),u={src:e.src,index:1*c,name:n.name,size:n.size},r.push(u);else{d="update",c*=1;for(let t=0,e=r.length;t<e;t++)if(c===r[t].index){u=r[t];break}u||(c=a._infoIndex++,u={index:c},r.push(u)),u.src=e.src,u.name=e.getAttribute("data-file-name"),u.size=1*e.getAttribute("data-file-size")}if(u.element=e,u.delete=o.destroy.bind(this,e),u.select=function(t){t.scrollIntoView(!0),this._w.setTimeout(o.select.bind(this,t))}.bind(this,e),l){if(!e.getAttribute("origin-size")&&e.naturalWidth&&e.setAttribute("origin-size",e.naturalWidth+","+e.naturalHeight),!e.getAttribute("data-origin")){const t=this.util.getParentElement(e,this.util.isMediaComponent),i=this.util.getParentElement(e,"FIGURE"),n=this.plugins.resizing._module_getSizeX.call(this,a,e,i,t),l=this.plugins.resizing._module_getSizeY.call(this,a,e,i,t);e.setAttribute("data-origin",n+","+l),e.setAttribute("data-size",n+","+l)}if(!e.style.width){const t=(e.getAttribute("data-size")||e.getAttribute("data-origin")||"").split(",");o.onModifyMode.call(this,e,null),o.applySize.call(this,t[0],t[1])}this.context.resizing._resize_plugin=s}"function"==typeof i&&i(e,c,d,u,--a._uploadFileLength<0?0:a._uploadFileLength,this)},deleteInfo:function(t,e,i){if(e>=0){const n=this.context[t]._infoList;for(let t=0,l=n.length;t<l;t++)if(e===n[t].index)return n.splice(t,1),void("function"==typeof i&&i(null,e,"delete",null,0,this))}},resetInfo:function(t,e){const i=this.context[t];if("function"==typeof e){const t=i._infoList;for(let i=0,n=t.length;i<n;i++)e(null,t[i].index,"delete",null,0,this)}i._infoList=[],i._infoIndex=0}};return void 0===e&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"fileManager",{enumerable:!0,writable:!1,configurable:!1,value:i})),i},"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("SUNEDITOR_MODULES a window with a document");return i(t)}:i(e)},5076:function(t){var e,i;e="undefined"!=typeof window?window:this,i=function(t,e){const i={name:"resizing",add:function(t){const e=t.icons,i=t.context;i.resizing={_resizeClientX:0,_resizeClientY:0,_resize_plugin:"",_resize_w:0,_resize_h:0,_origin_w:0,_origin_h:0,_rotateVertical:!1,_resize_direction:"",_move_path:null,_isChange:!1,alignIcons:{basic:e.align_justify,left:e.align_left,right:e.align_right,center:e.align_center}};let n=this.setController_resize(t);i.resizing.resizeContainer=n,i.resizing.resizeDiv=n.querySelector(".se-modal-resize"),i.resizing.resizeDot=n.querySelector(".se-resize-dot"),i.resizing.resizeDisplay=n.querySelector(".se-resize-display");let l=this.setController_button(t);i.resizing.resizeButton=l;let s=i.resizing.resizeHandles=i.resizing.resizeDot.querySelectorAll("span");i.resizing.resizeButtonGroup=l.querySelector("._se_resizing_btn_group"),i.resizing.rotationButtons=l.querySelectorAll("._se_resizing_btn_group ._se_rotation"),i.resizing.percentageButtons=l.querySelectorAll("._se_resizing_btn_group ._se_percentage"),i.resizing.alignMenu=l.querySelector(".se-resizing-align-list"),i.resizing.alignMenuList=i.resizing.alignMenu.querySelectorAll("button"),i.resizing.alignButton=l.querySelector("._se_resizing_align_button"),i.resizing.autoSizeButton=l.querySelector("._se_resizing_btn_group ._se_auto_size"),i.resizing.captionButton=l.querySelector("._se_resizing_caption_button"),n.addEventListener("mousedown",(function(t){t.preventDefault()})),s[0].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[1].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[2].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[3].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[4].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[5].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[6].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),s[7].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(t)),l.addEventListener("click",this.onClick_resizeButton.bind(t)),i.element.relative.appendChild(n),i.element.relative.appendChild(l),n=null,l=null,s=null},setController_resize:function(t){const e=t.util.createElement("DIV");return e.className="se-controller se-resizing-container",e.style.display="none",e.innerHTML='<div class="se-modal-resize"></div><div class="se-resize-dot"><span class="tl"></span><span class="tr"></span><span class="bl"></span><span class="br"></span><span class="lw"></span><span class="th"></span><span class="rw"></span><span class="bh"></span><div class="se-resize-display"></div></div>',e},setController_button:function(t){const e=t.lang,i=t.icons,n=t.util.createElement("DIV");return n.className="se-controller se-controller-resizing",n.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="se-btn-group _se_resizing_btn_group"><button type="button" data-command="percent" data-value="1" class="se-tooltip _se_percentage"><span>100%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.resize100+'</span></span></button><button type="button" data-command="percent" data-value="0.75" class="se-tooltip _se_percentage"><span>75%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.resize75+'</span></span></button><button type="button" data-command="percent" data-value="0.5" class="se-tooltip _se_percentage"><span>50%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.resize50+'</span></span></button><button type="button" data-command="auto" class="se-btn se-tooltip _se_auto_size">'+i.auto_size+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.autoSize+'</span></span></button><button type="button" data-command="rotate" data-value="-90" class="se-btn se-tooltip _se_rotation">'+i.rotate_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.rotateLeft+'</span></span></button><button type="button" data-command="rotate" data-value="90" class="se-btn se-tooltip _se_rotation">'+i.rotate_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.rotateRight+'</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="mirror" data-value="h" class="se-btn se-tooltip">'+i.mirror_horizontal+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.mirrorHorizontal+'</span></span></button><button type="button" data-command="mirror" data-value="v" class="se-btn se-tooltip">'+i.mirror_vertical+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.mirrorVertical+'</span></span></button><button type="button" data-command="onalign" class="se-btn se-tooltip _se_resizing_align_button">'+i.align_justify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.toolbar.align+'</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-resizing-align-list"><div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="basic">'+i.align_justify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.basic+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="left">'+i.align_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.left+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="center">'+i.align_center+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.center+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="right">'+i.align_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.right+'</span></span></button></li></ul></div></div><button type="button" data-command="caption" class="se-btn se-tooltip _se_resizing_caption_button">'+i.caption+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.caption+'</span></span></button><button type="button" data-command="revert" class="se-btn se-tooltip">'+i.revert+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.dialogBox.revertButton+'</span></span></button><button type="button" data-command="update" class="se-btn se-tooltip">'+i.modify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="delete" class="se-btn se-tooltip">'+i.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div>",n},_module_getSizeX:function(t,e,i,n){return e||(e=t._element),i||(i=t._cover),n||(n=t._container),e?/%$/.test(e.style.width)?(n&&this.util.getNumber(n.style.width,2)||100)+"%":e.style.width:""},_module_getSizeY:function(t,e,i,n){return e||(e=t._element),i||(i=t._cover),n||(n=t._container),n&&i?this.util.getNumber(i.style.paddingBottom,0)>0&&!this.context.resizing._rotateVertical?i.style.height:/%$/.test(e.style.height)&&/%$/.test(e.style.width)?(n&&this.util.getNumber(n.style.height,2)||100)+"%":e.style.height:e&&e.style.height||""},_module_setModifyInputSize:function(t,e){const i=t._onlyPercentage&&this.context.resizing._rotateVertical;t.proportion.checked=t._proportionChecked="false"!==t._element.getAttribute("data-proportion");let n=i?"":this.plugins.resizing._module_getSizeX.call(this,t);if(n===t._defaultSizeX&&(n=""),t._onlyPercentage&&(n=this.util.getNumber(n,2)),t.inputX.value=n,e.setInputSize.call(this,"x"),!t._onlyPercentage){let e=i?"":this.plugins.resizing._module_getSizeY.call(this,t);e===t._defaultSizeY&&(e=""),t._onlyPercentage&&(e=this.util.getNumber(e,2)),t.inputY.value=e}t.inputX.disabled=!!i,t.inputY.disabled=!!i,t.proportion.disabled=!!i,e.setRatio.call(this)},_module_setInputSize:function(t,e){if(t._onlyPercentage)"x"===e&&t.inputX.value>100&&(t.inputX.value=100);else if(t.proportion.checked&&t._ratio&&/\d/.test(t.inputX.value)&&/\d/.test(t.inputY.value)){const i=t.inputX.value.replace(/\d+|\./g,"")||t.sizeUnit,n=t.inputY.value.replace(/\d+|\./g,"")||t.sizeUnit;if(i!==n)return;const l="%"===i?2:0;"x"===e?t.inputY.value=this.util.getNumber(t._ratioY*this.util.getNumber(t.inputX.value,l),l)+n:t.inputX.value=this.util.getNumber(t._ratioX*this.util.getNumber(t.inputY.value,l),l)+i}},_module_setRatio:function(t){const e=t.inputX.value,i=t.inputY.value;if(t.proportion.checked&&/\d+/.test(e)&&/\d+/.test(i)){if((e.replace(/\d+|\./g,"")||t.sizeUnit)!==(i.replace(/\d+|\./g,"")||t.sizeUnit))t._ratio=!1;else if(!t._ratio){const n=this.util.getNumber(e,0),l=this.util.getNumber(i,0);t._ratio=!0,t._ratioX=n/l,t._ratioY=l/n}}else t._ratio=!1},_module_sizeRevert:function(t){t._onlyPercentage?t.inputX.value=t._origin_w>100?100:t._origin_w:(t.inputX.value=t._origin_w,t.inputY.value=t._origin_h)},_module_saveCurrentSize:function(t){const e=this.plugins.resizing._module_getSizeX.call(this,t),i=this.plugins.resizing._module_getSizeY.call(this,t);t._element.setAttribute("data-size",e+","+i),t._videoRatio&&(t._videoRatio=i)},call_controller_resize:function(t,e){const i=this.context.resizing,n=this.context[e];i._resize_plugin=e;const l=i.resizeContainer,s=i.resizeDiv,o=this.util.getOffset(t,this.context.element.wysiwygFrame),a=i._rotateVertical=/^(90|270)$/.test(Math.abs(t.getAttribute("data-rotate")).toString()),r=a?t.offsetHeight:t.offsetWidth,c=a?t.offsetWidth:t.offsetHeight,u=o.top,d=o.left-this.context.element.wysiwygFrame.scrollLeft;l.style.top=u+"px",l.style.left=d+"px",l.style.width=r+"px",l.style.height=c+"px",s.style.top="0px",s.style.left="0px",s.style.width=r+"px",s.style.height=c+"px";let h=t.getAttribute("data-align")||"basic";h="none"===h?"basic":h;const p=this.util.getParentElement(t,this.util.isComponent),g=this.util.getParentElement(t,"FIGURE"),m=this.plugins.resizing._module_getSizeX.call(this,n,t,g,p)||"auto",f=n._onlyPercentage&&"image"===e?"":", "+(this.plugins.resizing._module_getSizeY.call(this,n,t,g,p)||"auto");this.util.changeTxt(i.resizeDisplay,this.lang.dialogBox[h]+" ("+m+f+")"),i.resizeButtonGroup.style.display=n._resizing?"":"none";const _=!n._resizing||n._resizeDotHide||n._onlyPercentage?"none":"flex",b=i.resizeHandles;for(let t=0,e=b.length;t<e;t++)b[t].style.display=_;if(n._resizing){const t=i.rotationButtons;t[0].style.display=t[1].style.display=n._rotation?"":"none"}if(n._alignHide)i.alignButton.style.display="none";else{i.alignButton.style.display="";const t=i.alignMenuList;this.util.changeElement(i.alignButton.firstElementChild,i.alignIcons[h]);for(let e=0,i=t.length;e<i;e++)t[e].getAttribute("data-value")===h?this.util.addClass(t[e],"on"):this.util.removeClass(t[e],"on")}const v=i.percentageButtons,y=/%$/.test(t.style.width)&&/%$/.test(p.style.width)?this.util.getNumber(p.style.width,0)/100+"":"";for(let t=0,e=v.length;t<e;t++)v[t].getAttribute("data-value")===y?this.util.addClass(v[t],"active"):this.util.removeClass(v[t],"active");n._captionShow?(i.captionButton.style.display="",this.util.getChildElement(t.parentNode,"figcaption")?(this.util.addClass(i.captionButton,"active"),n._captionChecked=!0):(this.util.removeClass(i.captionButton,"active"),n._captionChecked=!1)):i.captionButton.style.display="none",l.style.display="block";const x={left:0,top:50};this.options.iframe&&(x.left-=this.context.element.wysiwygFrame.parentElement.offsetLeft,x.top-=this.context.element.wysiwygFrame.parentElement.offsetTop),this.setControllerPosition(i.resizeButton,l,"bottom",x),this.controllersOn(l,i.resizeButton,this.util.setDisabledButtons.bind(this.util,!1,this.resizingDisabledButtons),t,e),this.util.setDisabledButtons(!0,this.resizingDisabledButtons),i._resize_w=r,i._resize_h=c;const w=(t.getAttribute("origin-size")||"").split(",");return i._origin_w=w[0]||t.naturalWidth,i._origin_h=w[1]||t.naturalHeight,{w:r,h:c,t:u,l:d}},_closeAlignMenu:null,openAlignMenu:function(){const t=this.context.resizing.alignButton;this.util.addClass(t,"on"),this.context.resizing.alignMenu.style.top=t.offsetTop+t.offsetHeight+"px",this.context.resizing.alignMenu.style.left=t.offsetLeft-t.offsetWidth/2+"px",this.context.resizing.alignMenu.style.display="block",this.plugins.resizing._closeAlignMenu=function(){this.util.removeClass(this.context.resizing.alignButton,"on"),this.context.resizing.alignMenu.style.display="none",this.removeDocEvent("click",this.plugins.resizing._closeAlignMenu),this.plugins.resizing._closeAlignMenu=null}.bind(this),this.addDocEvent("click",this.plugins.resizing._closeAlignMenu)},onClick_resizeButton:function(t){t.stopPropagation();const e=t.target,i=e.getAttribute("data-command")||e.parentNode.getAttribute("data-command");if(!i)return;const n=e.getAttribute("data-value")||e.parentNode.getAttribute("data-value"),l=this.context.resizing._resize_plugin,s=this.context[l],o=s._element,a=this.plugins[l];if(t.preventDefault(),"function"!=typeof this.plugins.resizing._closeAlignMenu||(this.plugins.resizing._closeAlignMenu(),"onalign"!==i)){switch(i){case"auto":this.plugins.resizing.resetTransform.call(this,o),a.setAutoSize.call(this),this.selectComponent(o,l);break;case"percent":let t=this.plugins.resizing._module_getSizeY.call(this,s);if(this.context.resizing._rotateVertical){const e=o.getAttribute("data-percentage");e&&(t=e.split(",")[1])}this.plugins.resizing.resetTransform.call(this,o),a.setPercentSize.call(this,100*n,null!==this.util.getNumber(t,0)&&/%$/.test(t)?t:""),this.selectComponent(o,l);break;case"mirror":const e=o.getAttribute("data-rotate")||"0";let i=o.getAttribute("data-rotateX")||"",r=o.getAttribute("data-rotateY")||"";"h"===n&&!this.context.resizing._rotateVertical||"v"===n&&this.context.resizing._rotateVertical?r=r?"":"180":i=i?"":"180",o.setAttribute("data-rotateX",i),o.setAttribute("data-rotateY",r),this.plugins.resizing._setTransForm(o,e,i,r);break;case"rotate":const c=this.context.resizing,u=1*o.getAttribute("data-rotate")+1*n,d=this._w.Math.abs(u)>=360?0:u;o.setAttribute("data-rotate",d),c._rotateVertical=/^(90|270)$/.test(this._w.Math.abs(d).toString()),this.plugins.resizing.setTransformSize.call(this,o,null,null),this.selectComponent(o,l);break;case"onalign":return void this.plugins.resizing.openAlignMenu.call(this);case"align":const h="basic"===n?"none":n;a.setAlign.call(this,h,null,null,null),this.selectComponent(o,l);break;case"caption":const p=!s._captionChecked;if(a.openModify.call(this,!0),s._captionChecked=s.captionCheckEl.checked=p,a.update_image.call(this,!1,!1,!1),p){const t=this.util.getChildElement(s._caption,(function(t){return 3===t.nodeType}));t?this.setRange(t,0,t,t.textContent.length):s._caption.focus(),this.controllersOff()}else this.selectComponent(o,l),a.openModify.call(this,!0);break;case"revert":a.setOriginSize.call(this),this.selectComponent(o,l);break;case"update":a.openModify.call(this),this.controllersOff();break;case"delete":a.destroy.call(this)}this.history.push(!1)}},resetTransform:function(t){const e=(t.getAttribute("data-size")||t.getAttribute("data-origin")||"").split(",");this.context.resizing._rotateVertical=!1,t.style.maxWidth="",t.style.transform="",t.style.transformOrigin="",t.setAttribute("data-rotate",""),t.setAttribute("data-rotateX",""),t.setAttribute("data-rotateY",""),this.plugins[this.context.resizing._resize_plugin].setSize.call(this,e[0]?e[0]:"auto",e[1]?e[1]:"",!0)},setTransformSize:function(t,e,i){let n=t.getAttribute("data-percentage");const l=this.context.resizing._rotateVertical,s=1*t.getAttribute("data-rotate");let o="";if(n&&!l)n=n.split(","),"auto"===n[0]&&"auto"===n[1]?this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this):this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this,n[0],n[1]);else{const n=this.util.getParentElement(t,"FIGURE"),a=e||t.offsetWidth,r=i||t.offsetHeight,c=(l?r:a)+"px",u=(l?a:r)+"px";if(this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this),this.plugins[this.context.resizing._resize_plugin].setSize.call(this,a+"px",r+"px",!0),n.style.width=c,n.style.height=this.context[this.context.resizing._resize_plugin]._caption?"":u,l){let t=a/2+"px "+a/2+"px 0",e=r/2+"px "+r/2+"px 0";o=90===s||-270===s?e:t}}t.style.transformOrigin=o,this.plugins.resizing._setTransForm(t,s.toString(),t.getAttribute("data-rotateX")||"",t.getAttribute("data-rotateY")||""),t.style.maxWidth=l?"none":"",this.plugins.resizing.setCaptionPosition.call(this,t)},_setTransForm:function(t,e,i,n){let l=(t.offsetWidth-t.offsetHeight)*(/-/.test(e)?1:-1),s="";if(/[1-9]/.test(e)&&(i||n))switch(s=i?"Y":"X",e){case"90":s=i&&n?"X":n?s:"";break;case"270":l*=-1,s=i&&n?"Y":i?s:"";break;case"-90":s=i&&n?"Y":i?s:"";break;case"-270":l*=-1,s=i&&n?"X":n?s:"";break;default:s=""}e%180==0&&(t.style.maxWidth=""),t.style.transform="rotate("+e+"deg)"+(i?" rotateX("+i+"deg)":"")+(n?" rotateY("+n+"deg)":"")+(s?" translate"+s+"("+l+"px)":"")},setCaptionPosition:function(t){const e=this.util.getChildElement(this.util.getParentElement(t,"FIGURE"),"FIGCAPTION");e&&(e.style.marginTop=(this.context.resizing._rotateVertical?t.offsetWidth-t.offsetHeight:0)+"px")},onMouseDown_resize_handle:function(t){t.stopPropagation(),t.preventDefault();const e=this.context.resizing,i=e._resize_direction=t.target.classList[0];e._resizeClientX=t.clientX,e._resizeClientY=t.clientY,this.context.element.resizeBackground.style.display="block",e.resizeButton.style.display="none",e.resizeDiv.style.float=/l/.test(i)?"right":/r/.test(i)?"left":"none";const n=function(t){if("keydown"===t.type&&27!==t.keyCode)return;const s=e._isChange;e._isChange=!1,this.removeDocEvent("mousemove",l),this.removeDocEvent("mouseup",n),this.removeDocEvent("keydown",n),"keydown"===t.type?(this.controllersOff(),this.context.element.resizeBackground.style.display="none",this.plugins[this.context.resizing._resize_plugin].init.call(this)):(this.plugins.resizing.cancel_controller_resize.call(this,i),s&&this.history.push(!1))}.bind(this),l=this.plugins.resizing.resizing_element.bind(this,e,i,this.context[e._resize_plugin]);this.addDocEvent("mousemove",l),this.addDocEvent("mouseup",n),this.addDocEvent("keydown",n)},resizing_element:function(t,e,i,n){const l=n.clientX,s=n.clientY;let o=i._element_w,a=i._element_h;const r=i._element_w+(/r/.test(e)?l-t._resizeClientX:t._resizeClientX-l),c=i._element_h+(/b/.test(e)?s-t._resizeClientY:t._resizeClientY-s),u=i._element_h/i._element_w*r;/t/.test(e)&&(t.resizeDiv.style.top=i._element_h-(/h/.test(e)?c:u)+"px"),/l/.test(e)&&(t.resizeDiv.style.left=i._element_w-r+"px"),/r|l/.test(e)&&(t.resizeDiv.style.width=r+"px",o=r),/^(t|b)[^h]$/.test(e)?(t.resizeDiv.style.height=u+"px",a=u):/^(t|b)h$/.test(e)&&(t.resizeDiv.style.height=c+"px",a=c),t._resize_w=o,t._resize_h=a,this.util.changeTxt(t.resizeDisplay,this._w.Math.round(o)+" x "+this._w.Math.round(a)),t._isChange=!0},cancel_controller_resize:function(t){const e=this.context.resizing._rotateVertical;this.controllersOff(),this.context.element.resizeBackground.style.display="none";let i=this._w.Math.round(e?this.context.resizing._resize_h:this.context.resizing._resize_w),n=this._w.Math.round(e?this.context.resizing._resize_w:this.context.resizing._resize_h);if(!e&&!/%$/.test(i)){const t=16,e=this.context.element.wysiwygFrame.clientWidth-2*t-2;this.util.getNumber(i,0)>e&&(n=this._w.Math.round(n/i*e),i=e)}const l=this.context.resizing._resize_plugin;this.plugins[l].setSize.call(this,i,n,!1,t),e&&this.plugins.resizing.setTransformSize.call(this,this.context[this.context.resizing._resize_plugin]._element,i,n),this.selectComponent(this.context[l]._element,l)}};return void 0===e&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"resizing",{enumerable:!0,writable:!1,configurable:!1,value:i})),i},"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("SUNEDITOR_MODULES a window with a document");return i(t)}:i(e)},2664:(t,e,i)=>{i.r(e),i.d(e,{default:()=>V});var n=i(821),l={class:"container"},s=["action"],o=["value"],a={class:"row"},r={class:"main_info d-flex justify-content-between"},c=(0,n.Uk)("Изображение товара"),u=(0,n._)("input",{type:"file",style:{"font-size":"10px","margin-top":"20px"},id:"img",name:"img",accept:"image/png",required:""},null,-1),d={class:"col-5 card__text"},h=(0,n._)("label",{for:"name"},"Название товара:",-1),p=(0,n._)("input",{type:"text",class:"w-100 mb-2",id:"name",name:"name",required:""},null,-1),g=(0,n.Uk)("Краткое описание"),m=(0,n._)("textarea",{class:"w-100",id:"short_text",name:"short_text",rows:"2",required:""},null,-1),f=(0,n.uE)('<div class="card__price-and-buy-button d-flex flex-column col-4 align-items-end justify-content-between"><div class="row mb-5"><label for="price" class="col-3">Цена:</label><div class="col-6"><input type="number" id="price" name="price" required></div><label for="price" class="col-2">руб</label></div><div class="row"><label for="count" class="col-4">Количество:</label><div class="col-5"><input type="number" id="count" name="count" required></div><label for="count" class="col-1">шт</label></div><button type="submit" class="card__edit-button btn">Добавить товар</button></div>',1),_={class:"mt-2"},b=(0,n.Uk)("Полное описание"),v=(0,n._)("textarea",{class:"w-100",id:"full_text",name:"full_text",required:""},null,-1),y={class:"card__specs row"},x={class:"card__name-specs col-6 d-flex flex-column"},w=(0,n._)("strong",{class:"mb-2"},[(0,n._)("label",{for:"brand"},"Бренд")],-1),C=(0,n._)("strong",{class:"mb-2"},[(0,n._)("label",{for:"type"},"Тип")],-1),k=["for"],S=(0,n._)("strong",{class:"mb-2"},[(0,n._)("label",{for:"made_in"},"Страна производитель")],-1),E={class:"card__name-specs col-6 d-flex flex-column"},z={class:"mb-2 input"},L=["value"],A={class:"mb-2 input"},I=["value"],N=["id","name"],M=(0,n._)("div",{class:"mb-2 input"},[(0,n._)("input",{type:"text",id:"made_in",name:"made_in",size:"18",required:""})],-1),B=(0,n._)("input",{type:"file",style:{"font-size":"10px","margin-bottom":"20px"},id:"audio",name:"audio",accept:".mp3"},null,-1);var T=i(9669),R=i.n(T),D=i(9518),U=i(6012);const F={name:"AddProduct",components:{vSeparation:i(6409).Z},data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),title:null,brands:[],types:[],specs_name:[],path:window.location.pathname,selected_brand:"",selected_type:""}},mounted:function(){var t=this;R().get("/api"+window.location.pathname+"/get-info").then((function(e){t.title=e.data[0],t.brands=e.data[1],t.types=e.data[2],t.specs_name=e.data[3]}));var e=D.Z.create("full_text",{plugins:U.ZP,buttonList:[["undo","redo"],["font","fontSize","formatBlock"],["paragraphStyle","blockquote"],["bold","underline","italic","strike","subscript","superscript"],["removeFormat"],"/",["outdent","indent"],["align","horizontalRule","list","lineHeight"],["link","image","video"]]});e.onChange=function(){e.save()}}};var O=i(3379),P=i.n(O),H=i(2525),q={insert:"head",singleton:!1};P()(H.Z,q);H.Z.locals;const V=(0,i(3744).Z)(F,[["render",function(t,e,i,T,R,D){var U=(0,n.up)("v-separation"),F=(0,n.up)("lable");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("form",{method:"post",action:"/api"+R.path,enctype:"multipart/form-data"},[(0,n._)("input",{type:"hidden",name:"_token",value:R.csrf},null,8,o),(0,n.Wm)(U,{title:"Добавить товар в категорию ("+R.title+")"},null,8,["title"]),(0,n._)("div",null,[(0,n._)("div",a,[(0,n._)("div",r,[(0,n._)("div",null,[(0,n.Wm)(F,{for:"img"},{default:(0,n.w5)((function(){return[c]})),_:1}),u]),(0,n._)("div",d,[h,p,(0,n.Wm)(F,{for:"short_text"},{default:(0,n.w5)((function(){return[g]})),_:1}),m]),f])]),(0,n._)("div",_,[(0,n.Wm)(F,{for:"full_text"},{default:(0,n.w5)((function(){return[b]})),_:1}),v])]),(0,n.Wm)(U,{title:"Характеристики"}),(0,n._)("div",y,[(0,n._)("div",x,[w,C,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(R.specs_name,(function(t){return(0,n.wg)(),(0,n.iD)("strong",{class:"mb-2",key:t.id},[(0,n._)("label",{for:t.count_spec},(0,n.zw)(t.name),9,k)])})),128)),S]),(0,n._)("div",E,[(0,n._)("div",z,[(0,n.wy)((0,n._)("select",{id:"brand",name:"brand","onUpdate:modelValue":e[0]||(e[0]=function(t){return R.selected_brand=t}),required:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(R.brands,(function(t){return(0,n.wg)(),(0,n.iD)("option",{value:t},(0,n.zw)(t),9,L)})),256))],512),[[n.bM,R.selected_brand]])]),(0,n._)("div",A,[(0,n.wy)((0,n._)("select",{id:"type",name:"type","onUpdate:modelValue":e[1]||(e[1]=function(t){return R.selected_type=t}),required:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(R.types,(function(t){return(0,n.wg)(),(0,n.iD)("option",{value:t.text},(0,n.zw)(t.text),9,I)})),256))],512),[[n.bM,R.selected_type]])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(R.specs_name,(function(t){return(0,n.wg)(),(0,n.iD)("div",{class:"mb-2 input",key:t.id},[(0,n._)("input",{type:"text",id:t.count_spec,name:t.count_spec,size:"18",required:""},null,8,N)])})),128)),M])]),(0,n.Wm)(U,{title:"Звучание инструмента"}),B],8,s)])}]])}}]);